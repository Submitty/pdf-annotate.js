{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/pdf-annotate.min.js","webpack:///webpack/bootstrap f514bf1d80ed5ef5c12d","webpack:///./index.js","webpack:///./src/PDFJSAnnotate.js","webpack:///./src/adapter/StoreAdapter.js","webpack:///./src/utils/abstractFunction.js","webpack:///./src/UI/event.js","webpack:///./~/events/events.js","webpack:///./src/UI/utils.js","webpack:///./~/create-stylesheet/index.js","webpack:///./src/render/appendChild.js","webpack:///./~/object-assign/index.js","webpack:///./src/render/renderLine.js","webpack:///./src/utils/setAttributes.js","webpack:///./src/utils/normalizeColor.js","webpack:///./src/render/renderPath.js","webpack:///./src/render/renderPoint.js","webpack:///./src/render/renderRect.js","webpack:///./src/render/renderText.js","webpack:///./src/render/renderCircle.js","webpack:///./src/render/renderArrow.js","webpack:///./src/utils/mathUtils.js","webpack:///./src/adapter/LocalStoreAdapter.js","webpack:///./src/utils/uuid.js","webpack:///./src/render/index.js","webpack:///./src/a11y/renderScreenReaderHints.js","webpack:///./src/a11y/insertScreenReaderHint.js","webpack:///./src/a11y/createScreenReaderOnly.js","webpack:///./src/a11y/insertElementWithinChildren.js","webpack:///./src/config.js","webpack:///./src/a11y/insertElementWithinElement.js","webpack:///./src/a11y/renderScreenReaderComments.js","webpack:///./src/a11y/insertScreenReaderComment.js","webpack:///./src/a11y/initEventHandlers.js","webpack:///./src/UI/index.js","webpack:///./src/UI/edit.js","webpack:///./src/UI/pen.js","webpack:///./src/UI/eraser.js","webpack:///./src/UI/arrow.js","webpack:///./src/UI/point.js","webpack:///./src/UI/rect.js","webpack:///./src/UI/circle.js","webpack:///./src/UI/text.js","webpack:///./src/UI/page.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_PDFJSAnnotate","_PDFJSAnnotate2","PDFJSAnnotate","_StoreAdapter","_StoreAdapter2","_LocalStoreAdapter","_LocalStoreAdapter2","_render","_render2","_UI","_UI2","_config","_config2","_uuid","_uuid2","_utils","findAnnotationAtPoint","findSVGContainer","convertToScreenPoint","StoreAdapter","LocalStoreAdapter","__storeAdapter","getStoreAdapter","setStoreAdapter","adapter","UI","render","getAnnotations","documentId","pageNumber","_getStoreAdapter","apply","arguments","config","uuid","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_abstractFunction","_abstractFunction2","_event","_this","definition","undefined","keys","forEach","annotationId","annotation","content","commentId","get","__getAnnotations","set","fn","then","annotations","a","__addAnnotation","fireEvent","__editAnnotation","__deleteAnnotation","success","__addComment","comment","__deleteComment","abstractFunction","name","Error","emitter","emit","addEventListener","on","removeEventListener","removeListener","_events","_events2","EventEmitter","clickNode","document","e","findSVGAtPoint","clientX","clientY","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","type","er","handler","len","args","listeners","error","err","context","Array","slice","addListener","listener","newListener","push","warned","console","trace","once","g","fired","list","position","splice","removeAllListeners","ret","listenerCount","evlistener","node","parentNode","nodeName","toUpperCase","getAttribute","x","y","elements","querySelectorAll","l","el","rect","getBoundingClientRect","pointIntersectsRect","candidate","elementFromPoint","top","bottom","left","right","getOffsetAnnotationRect","_getOffset","getOffset","offsetLeft","offsetTop","width","height","scaleUp","svg","result","_getMetadata","getMetadata","viewport","scale","convertToSvgRect","pt1","pt2","convertToSvgPoint","Math","min","abs","pt","xform","_mathUtils","rotate","rotation","offset","_appendChild","getTranslation","translate","applyInverseTransform","applyTransform","scaleDown","_getMetadata2","getScroll","scrollTop","scrollLeft","disableUserSelect","userSelectStyleSheet","head","appendChild","enableUserSelect","removeChild","parseInt","JSON","parse","BORDER_COLOR","_createStylesheet","_createStylesheet2","body","-webkit-user-select","-moz-user-select","-ms-user-select","user-select","setAttribute","processRuleSet","selector","block","processDeclarationBlock","map","prop","processDeclaration","join","hyphenate","replace","match","toLowerCase","blocks","style","createElement","text","createTextNode","transform","trans","isFirefox","path","querySelector","_objectAssign2","child","_renderRect2","_renderCircle2","_renderLine2","_renderPoint2","_renderText2","_renderPath2","_renderArrow2","userId","transformChild","_objectAssign","_renderLine","_renderPath","_renderPoint","_renderRect","_renderText","_renderCircle","_renderArrow","test","navigator","userAgent","toObject","val","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","test3","split","letter","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","source","from","symbols","to","s","renderLine","group","createElementNS","_setAttributes2","stroke","_normalizeColor2","color","strokeWidth","rectangles","r","line","x1","y1","x2","y2","_setAttributes","_normalizeColor","setAttributes","attributes","keyCase","UPPER_REGEX","BLACKLIST","indexOf","normalizeColor","REGEX_HASHLESS_HEX","renderPath","d","lines","p1","p2","fill","renderPoint","outerSVG","innerSVG","SIZE","viewBox","D","renderRect","fillOpacity","createRect","renderText","fontSize","size","innerHTML","renderCircle","circle","createCircle","stroke-width","cx","cy","renderArrow","arrow","arrowLength","pt0","makePoint","makeVectorFromPoints","unitX","unitVector","addVector","multiplyVector","unitZ","makeVector","unitY","crossProduct","thickness","A","B","magnitude","C","G","negateVector","F","E","points","xt","yt","m1","m2","angle","PI","cosValue","cos","sinValue","sin","z","xcoord","ycoord","zcoord","v","scalar","sqrt","pow","mag","u","_toConsumableArray","arr","isArray","arr2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getAllAnnotations","all_annotations","localStorage","includes","getItem","updateAnnotations","setItem","stringify","findAnnotation","index","_StoreAdapter3","getPrototypeOf","Promise","resolve","reject","filter","page","getAnnotation","addAnnotation","editAnnotation","deleteAnnotation","getComments","addComment","class","deleteComment","_userId","replacement","random","toString","PATTERN","REGEXP","data","removeAttribute","_renderScreenReaderHints","renderScreenReaderHints","SORT_TYPES","sortBy","sort","_insertScreenReaderHint2","sortByPoint","b","sortByRectPoint","sortByLinePoint","lineA","lineB","_insertScreenReaderHint","_initEventHandlers","_initEventHandlers2","highlight","strikeout","drawing","textbox","point","area","insertScreenReaderHint","num","rects","first","last","_insertElementWithinElement2","_createScreenReaderOnly2","_insertElementWithinChildren2","COMMENT_TYPES","_renderScreenReaderComments2","_createScreenReaderOnly","_insertElementWithinChildren","_insertElementWithinElement","_renderScreenReaderComments","createScreenReaderOnly","overflow","insertElementWithinChildren","nodes","textClassQuery","insertBefore","textLayer","textRect","annotationLayerName","textLayerName","annotationSvgQuery","annotationClassQuery","insertElementWithinElement","OFFSET_ADJUST","max","textLayerElementFromPoint","temp","cloneNode","tail","unshift","pop","outerHTML","concat","renderScreenReaderComments","comments","promise","getElementById","insertScreenReaderComment","_insertScreenReaderComment","_insertScreenReaderComment2","item","initEventHandlers","reorderAnnotationsByType","removeAnnotation","insertComment","removeComment","removeElementById","elementId","_renderScreenReaderHints2","_edit","_pen","_eraser","_arrow","_point","_rect","_circle","_text","_page","disableEdit","enableEdit","disablePen","enablePen","setPen","enableEraser","disableEraser","disablePoint","enablePoint","disableRect","enableRect","disableCircle","enableCircle","setCircle","addCircle","disableArrow","enableArrow","setArrow","disableText","enableText","setText","createPage","renderPage","createEditOverlay","destroyEditOverlay","overlay","anchor","styleLeft","OVERLAY_BORDER_SIZE","styleTop","boxSizing","border","borderRadius","zIndex","background","padding","textAlign","textDecoration","handleDocumentClick","handleDocumentKeyup","handleDocumentMousedown","borderColor","boxShadow","isDragging","display","handleDocumentMousemove","handleDocumentMouseup","keyCode","dragOffsetX","dragOffsetY","dragStartX","dragStartY","cursor","minY","maxY","minX","maxX","offsetHeight","offsetWidth","attribX","attribY","modelStart","modelEnd","modelDelta","firstChild","t","modelX","modelY","viewY","viewX","_annotation$lines$i","_slicedToArray","setTimeout","handleAnnotationClick","_enabled","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","handleDocumentPointerdown","preventDefault","_candraw","handleDocumentKeyupChrome","saveToStorage","changedTouches","handleDocumentPointerup","_penSize","_penColor","handleDocumentPointermove","srcElement","classList","contains","savePoint","handleDocumentPointermoveChrome","toFixed","penSize","penColor","handleDocumentMouseDown","_canerase","handleDocumentMouseUp","handleDocumentMouseMove","parentElement","originX","originY","input","handleInputBlur","handleInputKeyup","focus","closeInput","trim","getSelectionRects","selection","window","getSelection","range","getRangeAt","getClientRects","_type","saveRect","removeAllRanges","boundingRect","circleRadius","circleColor","_circleRadius","_circleColor","saveCircle","radius","svg_pt","oldType","_textSize","saveText","_textColor","textSize","textColor","PAGE_TEMPLATE","children","canvas","mozOpaque","renderOptions","pdfDocument","all","getPage","_ref","_ref2","pdfPage","canvasContext","getContext","alpha","totalRotation","getViewport","scalePage","getTextContent","normalizeWhitespace","textContent","textLayerFactory","PDFJS","DefaultTextLayerFactory","textLayerBuilder","createTextLayerBuilder","setTextContent","wrapper","outputScale","getOutputScale","scaled","sx","sy","sfx","approximateFraction","sfy","visibility","roundToDivide","floor","xinv","limit","x_","q","ctx","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","div","round"],"mappings":"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","file":"dist/pdf-annotate.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnotate\"] = factory();\n\telse\n\t\troot[\"PDFAnnotate\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnotate\"] = factory();\n\telse\n\t\troot[\"PDFAnnotate\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = _PDFJSAnnotate2.default;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _StoreAdapter = __webpack_require__(2);\n\t\n\tvar _StoreAdapter2 = _interopRequireDefault(_StoreAdapter);\n\t\n\tvar _LocalStoreAdapter = __webpack_require__(20);\n\t\n\tvar _LocalStoreAdapter2 = _interopRequireDefault(_LocalStoreAdapter);\n\t\n\tvar _render = __webpack_require__(22);\n\t\n\tvar _render2 = _interopRequireDefault(_render);\n\t\n\tvar _UI = __webpack_require__(32);\n\t\n\tvar _UI2 = _interopRequireDefault(_UI);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _uuid = __webpack_require__(21);\n\t\n\tvar _uuid2 = _interopRequireDefault(_uuid);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  findAnnotationAtPoint: _utils.findAnnotationAtPoint,\n\t  findSVGContainer: _utils.findSVGContainer,\n\t  convertToScreenPoint: _utils.convertToScreenPoint,\n\t\n\t  /**\r\n\t   * Abstract class that needs to be defined so PDFJSAnnotate\r\n\t   * knows how to communicate with your server.\r\n\t   */\n\t  StoreAdapter: _StoreAdapter2.default,\n\t\n\t  /**\r\n\t   * Implementation of StoreAdapter that stores annotation data to localStorage.\r\n\t   */\n\t  LocalStoreAdapter: _LocalStoreAdapter2.default,\n\t\n\t  /**\r\n\t   * Abstract instance of StoreAdapter\r\n\t   */\n\t  __storeAdapter: new _StoreAdapter2.default(),\n\t\n\t  /**\r\n\t   * Getter for the underlying StoreAdapter property\r\n\t   *\r\n\t   * @return {StoreAdapter}\r\n\t   */\n\t  getStoreAdapter: function getStoreAdapter() {\n\t    return this.__storeAdapter;\n\t  },\n\t\n\t\n\t  /**\r\n\t   * Setter for the underlying StoreAdapter property\r\n\t   *\r\n\t   * @param {StoreAdapter} adapter The StoreAdapter implementation to be used.\r\n\t   */\n\t  setStoreAdapter: function setStoreAdapter(adapter) {\n\t    // TODO this throws an error when bundled\n\t    // if (!(adapter instanceof StoreAdapter)) {\n\t    //   throw new Error('adapter must be an instance of StoreAdapter');\n\t    // }\n\t\n\t    this.__storeAdapter = adapter;\n\t  },\n\t\n\t\n\t  /**\r\n\t   * UI is a helper for instrumenting UI interactions for creating,\r\n\t   * editing, and deleting annotations in the browser.\r\n\t   */\n\t  UI: _UI2.default,\n\t\n\t  /**\r\n\t   * Render the annotations for a page in the PDF Document\r\n\t   *\r\n\t   * @param {SVGElement} svg The SVG element that annotations should be rendered to\r\n\t   * @param {PageViewport} viewport The PDFPage.getViewport data\r\n\t   * @param {Object} data The StoreAdapter.getAnnotations data\r\n\t   * @return {Promise}\r\n\t   */\n\t  render: _render2.default,\n\t\n\t  /**\r\n\t   * Convenience method for getting annotation data\r\n\t   *\r\n\t   * @alias StoreAdapter.getAnnotations\r\n\t   * @param {String} documentId The ID of the document\r\n\t   * @param {String} pageNumber The page number\r\n\t   * @return {Promise}\r\n\t   */\n\t  getAnnotations: function getAnnotations(documentId, pageNumber) {\n\t    var _getStoreAdapter;\n\t\n\t    return (_getStoreAdapter = this.getStoreAdapter()).getAnnotations.apply(_getStoreAdapter, arguments);\n\t  },\n\t\n\t\n\t  config: _config2.default,\n\t\n\t  uuid: _uuid2.default\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _abstractFunction = __webpack_require__(3);\n\t\n\tvar _abstractFunction2 = _interopRequireDefault(_abstractFunction);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// Adapter should never be invoked publicly\n\tvar StoreAdapter = function () {\n\t  /**\r\n\t   * Create a new StoreAdapter instance\r\n\t   *\r\n\t   * @param {Object} [definition] The definition to use for overriding abstract methods\r\n\t   */\n\t  function StoreAdapter() {\n\t    var _this = this;\n\t\n\t    var definition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, StoreAdapter);\n\t\n\t    // Copy each function from definition if it is a function we know about\n\t    Object.keys(definition).forEach(function (key) {\n\t      if (typeof definition[key] === 'function' && typeof _this[key] === 'function') {\n\t        _this[key] = definition[key];\n\t      }\n\t    });\n\t  }\n\t\n\t  /**\r\n\t   * Get all the annotations for a given document and page number.\r\n\t   *\r\n\t   * @param {String} documentId The ID for the document the annotations belong to\r\n\t   * @param {Number} pageNumber The number of the page the annotations belong to\r\n\t   * @return {Promise}\r\n\t   */\n\t\n\t\n\t  _createClass(StoreAdapter, [{\n\t    key: '__getAnnotations',\n\t    value: function __getAnnotations(documentId, pageNumber) {\n\t      (0, _abstractFunction2.default)('getAnnotations');\n\t    }\n\t  }, {\n\t    key: 'getAnnotation',\n\t\n\t\n\t    /**\r\n\t     * Get the definition for a specific annotation.\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document the annotation belongs to\r\n\t     * @param {String} annotationId The ID for the annotation\r\n\t     * @return {Promise}\r\n\t     */\n\t    value: function getAnnotation(documentId, annotationId) {\n\t      (0, _abstractFunction2.default)('getAnnotation');\n\t    }\n\t\n\t    /**\r\n\t     * Add an annotation\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document to add the annotation to\r\n\t     * @param {String} pageNumber The page number to add the annotation to\r\n\t     * @param {Object} annotation The definition for the new annotation\r\n\t     * @return {Promise}\r\n\t     */\n\t\n\t  }, {\n\t    key: '__addAnnotation',\n\t    value: function __addAnnotation(documentId, pageNumber, annotation) {\n\t      (0, _abstractFunction2.default)('addAnnotation');\n\t    }\n\t  }, {\n\t    key: '__editAnnotation',\n\t\n\t\n\t    /**\r\n\t     * Edit an annotation\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document\r\n\t     * @param {String} pageNumber the page number of the annotation\r\n\t     * @param {Object} annotation The definition of the modified annotation\r\n\t     * @return {Promise}\r\n\t     */\n\t    value: function __editAnnotation(documentId, pageNumber, annotation) {\n\t      (0, _abstractFunction2.default)('editAnnotation');\n\t    }\n\t  }, {\n\t    key: '__deleteAnnotation',\n\t\n\t\n\t    /**\r\n\t     * Delete an annotation\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document\r\n\t     * @param {String} annotationId The ID for the annotation\r\n\t     * @return {Promise}\r\n\t     */\n\t    value: function __deleteAnnotation(documentId, annotationId) {\n\t      (0, _abstractFunction2.default)('deleteAnnotation');\n\t    }\n\t  }, {\n\t    key: 'getComments',\n\t\n\t\n\t    /**\r\n\t     * Get all the comments for an annotation\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document\r\n\t     * @param {String} annotationId The ID for the annotation\r\n\t     * @return {Promise}\r\n\t     */\n\t    value: function getComments(documentId, annotationId) {\n\t      (0, _abstractFunction2.default)('getComments');\n\t    }\n\t\n\t    /**\r\n\t     * Add a new comment\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document\r\n\t     * @param {String} annotationId The ID for the annotation\r\n\t     * @param {Object} content The definition of the comment\r\n\t     * @return {Promise}\r\n\t     */\n\t\n\t  }, {\n\t    key: '__addComment',\n\t    value: function __addComment(documentId, annotationId, content) {\n\t      (0, _abstractFunction2.default)('addComment');\n\t    }\n\t  }, {\n\t    key: '__deleteComment',\n\t\n\t\n\t    /**\r\n\t     * Delete a comment\r\n\t     *\r\n\t     * @param {String} documentId The ID for the document\r\n\t     * @param {String} commentId The ID for the comment\r\n\t     * @return {Promise}\r\n\t     */\n\t    value: function __deleteComment(documentId, commentId) {\n\t      (0, _abstractFunction2.default)('deleteComment');\n\t    }\n\t  }, {\n\t    key: 'getAnnotations',\n\t    get: function get() {\n\t      return this.__getAnnotations;\n\t    },\n\t    set: function set(fn) {\n\t      this.__getAnnotations = function getAnnotations(documentId, pageNumber) {\n\t        return fn.apply(undefined, arguments).then(function (annotations) {\n\t          // TODO may be best to have this happen on the server\n\t          if (annotations.annotations) {\n\t            annotations.annotations.forEach(function (a) {\n\t              a.documentId = documentId;\n\t            });\n\t          }\n\t          return annotations;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'addAnnotation',\n\t    get: function get() {\n\t      return this.__addAnnotation;\n\t    },\n\t    set: function set(fn) {\n\t      this.__addAnnotation = function addAnnotation(documentId, pageNumber, annotation) {\n\t        return fn.apply(undefined, arguments).then(function (annotation) {\n\t          (0, _event.fireEvent)('annotation:add', documentId, pageNumber, annotation);\n\t          return annotation;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'editAnnotation',\n\t    get: function get() {\n\t      return this.__editAnnotation;\n\t    },\n\t    set: function set(fn) {\n\t      this.__editAnnotation = function editAnnotation(documentId, annotationId, annotation) {\n\t        return fn.apply(undefined, arguments).then(function (annotation) {\n\t          (0, _event.fireEvent)('annotation:edit', documentId, annotationId, annotation);\n\t          return annotation;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'deleteAnnotation',\n\t    get: function get() {\n\t      return this.__deleteAnnotation;\n\t    },\n\t    set: function set(fn) {\n\t      this.__deleteAnnotation = function deleteAnnotation(documentId, annotationId) {\n\t        return fn.apply(undefined, arguments).then(function (success) {\n\t          if (success) {\n\t            (0, _event.fireEvent)('annotation:delete', documentId, annotationId);\n\t          }\n\t          return success;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'addComment',\n\t    get: function get() {\n\t      return this.__addComment;\n\t    },\n\t    set: function set(fn) {\n\t      this.__addComment = function addComment(documentId, annotationId, content) {\n\t        return fn.apply(undefined, arguments).then(function (comment) {\n\t          (0, _event.fireEvent)('comment:add', documentId, annotationId, comment);\n\t          return comment;\n\t        });\n\t      };\n\t    }\n\t  }, {\n\t    key: 'deleteComment',\n\t    get: function get() {\n\t      return this.__deleteComment;\n\t    },\n\t    set: function set(fn) {\n\t      this.__deleteComment = function deleteComment(documentId, commentId) {\n\t        return fn.apply(undefined, arguments).then(function (success) {\n\t          if (success) {\n\t            (0, _event.fireEvent)('comment:delete', documentId, commentId);\n\t          }\n\t          return success;\n\t        });\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return StoreAdapter;\n\t}();\n\t\n\texports.default = StoreAdapter;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = abstractFunction;\n\t/**\r\n\t * Throw an Error for an abstract function that hasn't been implemented.\r\n\t *\r\n\t * @param {String} name The name of the abstract function\r\n\t */\n\tfunction abstractFunction(name) {\n\t  throw new Error(name + ' is not implemented');\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.fireEvent = fireEvent;\n\texports.addEventListener = addEventListener;\n\texports.removeEventListener = removeEventListener;\n\t\n\tvar _events = __webpack_require__(5);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar emitter = new _events2.default();\n\t\n\tvar clickNode = void 0;\n\t\n\t/**\r\n\t * Handle document.click event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tdocument.addEventListener('click', function handleDocumentClick(e) {\n\t  if (!(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  var target = (0, _utils.findAnnotationAtPoint)(e.clientX, e.clientY);\n\t\n\t  // Emit annotation:blur if clickNode is no longer clicked\n\t  if (clickNode && clickNode !== target) {\n\t    emitter.emit('annotation:blur', clickNode);\n\t  }\n\t\n\t  // Emit annotation:click if target was clicked\n\t  if (target) {\n\t    emitter.emit('annotation:click', target);\n\t  }\n\t\n\t  clickNode = target;\n\t});\n\t\n\t// let mouseOverNode;\n\t// document.addEventListener('mousemove', function handleDocumentMousemove(e) {\n\t//   let target = findAnnotationAtPoint(e.clientX, e.clientY);\n\t//\n\t//   // Emit annotation:mouseout if target was mouseout'd\n\t//   if (mouseOverNode && !target) {\n\t//     emitter.emit('annotation:mouseout', mouseOverNode);\n\t//   }\n\t//\n\t//   // Emit annotation:mouseover if target was mouseover'd\n\t//   if (target && mouseOverNode !== target) {\n\t//     emitter.emit('annotation:mouseover', target);\n\t//   }\n\t//\n\t//   mouseOverNode = target;\n\t// });\n\t\n\tfunction fireEvent() {\n\t  emitter.emit.apply(emitter, arguments);\n\t};\n\tfunction addEventListener() {\n\t  emitter.on.apply(emitter, arguments);\n\t};\n\tfunction removeEventListener() {\n\t  emitter.removeListener.apply(emitter, arguments);\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function(n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n))\n\t    throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function(type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error ||\n\t        (isObject(this._events.error) && !this._events.error.length)) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler))\n\t    return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++)\n\t      listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function(type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener)\n\t    this.emit('newListener', type,\n\t              isFunction(listener.listener) ?\n\t              listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;\n\t  else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);\n\t  else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' +\n\t                    'leak detected. %d listeners added. ' +\n\t                    'Use emitter.setMaxListeners() to increase limit.',\n\t                    this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function(type, listener) {\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function(type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type])\n\t    return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener ||\n\t      (isFunction(list.listener) && list.listener === listener)) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener ||\n\t          (list[i].listener && list[i].listener === listener)) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0)\n\t      return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function(type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events)\n\t    return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0)\n\t      this._events = {};\n\t    else if (this._events[type])\n\t      delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length)\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function(type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type])\n\t    ret = [];\n\t  else if (isFunction(this._events[type]))\n\t    ret = [this._events[type]];\n\t  else\n\t    ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function(type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener))\n\t      return 1;\n\t    else if (evlistener)\n\t      return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function(emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.BORDER_COLOR = undefined;\n\texports.findSVGContainer = findSVGContainer;\n\texports.findSVGAtPoint = findSVGAtPoint;\n\texports.findAnnotationAtPoint = findAnnotationAtPoint;\n\texports.pointIntersectsRect = pointIntersectsRect;\n\texports.getOffsetAnnotationRect = getOffsetAnnotationRect;\n\texports.scaleUp = scaleUp;\n\texports.convertToSvgRect = convertToSvgRect;\n\texports.convertToSvgPoint = convertToSvgPoint;\n\texports.convertToScreenPoint = convertToScreenPoint;\n\texports.scaleDown = scaleDown;\n\texports.getScroll = getScroll;\n\texports.getOffset = getOffset;\n\texports.disableUserSelect = disableUserSelect;\n\texports.enableUserSelect = enableUserSelect;\n\texports.getMetadata = getMetadata;\n\t\n\tvar _createStylesheet = __webpack_require__(7);\n\t\n\tvar _createStylesheet2 = _interopRequireDefault(_createStylesheet);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _mathUtils = __webpack_require__(19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar BORDER_COLOR = exports.BORDER_COLOR = '#00BFFF';\n\t\n\tvar userSelectStyleSheet = (0, _createStylesheet2.default)({\n\t  body: {\n\t    '-webkit-user-select': 'none',\n\t    '-moz-user-select': 'none',\n\t    '-ms-user-select': 'none',\n\t    'user-select': 'none'\n\t  }\n\t});\n\tuserSelectStyleSheet.setAttribute('data-pdf-annotate-user-select', 'true');\n\t\n\t/**\r\n\t * Find the SVGElement that contains all the annotations for a page\r\n\t *\r\n\t * @param {Element} node An annotation within that container\r\n\t * @return {SVGElement} The container SVG or null if it can't be found\r\n\t */\n\tfunction findSVGContainer(node) {\n\t  var parentNode = node;\n\t\n\t  while ((parentNode = parentNode.parentNode) && parentNode !== document) {\n\t    if (parentNode.nodeName.toUpperCase() === 'SVG' && parentNode.getAttribute('data-pdf-annotate-container') === 'true') {\n\t      return parentNode;\n\t    }\n\t  }\n\t\n\t  return null;\n\t}\n\t\n\t/**\r\n\t * Find an SVGElement container at a given point\r\n\t *\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t * @return {SVGElement} The container SVG or null if one can't be found\r\n\t */\n\tfunction findSVGAtPoint(x, y) {\n\t  var elements = document.querySelectorAll('svg[data-pdf-annotate-container=\"true\"]');\n\t\n\t  for (var i = 0, l = elements.length; i < l; i++) {\n\t    var el = elements[i];\n\t    var rect = el.getBoundingClientRect();\n\t\n\t    if (pointIntersectsRect(x, y, rect)) {\n\t      return el;\n\t    }\n\t  }\n\t\n\t  return null;\n\t}\n\t\n\t/**\r\n\t * Find an Element that represents an annotation at a given point.\r\n\t * \r\n\t * IMPORTANT: Requires the annotation layer to be the top most element so\r\n\t *            either use z-ordering or make it the leaf container.\r\n\t *\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t * @return {Element} The annotation element or null if one can't be found\r\n\t */\n\tfunction findAnnotationAtPoint(x, y) {\n\t  var el = null;\n\t  var candidate = document.elementFromPoint(x, y);\n\t  while (!el && candidate && candidate !== document) {\n\t    var type = candidate.getAttribute('data-pdf-annotate-type');\n\t    if (type) {\n\t      el = candidate;\n\t    }\n\t    candidate = candidate.parentNode;\n\t  }\n\t  return el;\n\t}\n\t\n\t/**\r\n\t * Determine if a point intersects a rect\r\n\t *\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t * @param {Object} rect The points of a rect (likely from getBoundingClientRect)\r\n\t * @return {Boolean} True if a collision occurs, otherwise false\r\n\t */\n\tfunction pointIntersectsRect(x, y, rect) {\n\t  return y >= rect.top && y <= rect.bottom && x >= rect.left && x <= rect.right;\n\t}\n\t\n\t/**\r\n\t * Get the rect of an annotation element accounting for offset.\r\n\t *\r\n\t * @param {Element} el The element to get the rect of\r\n\t * @return {Object} The dimensions of the element\r\n\t */\n\tfunction getOffsetAnnotationRect(el) {\n\t  var rect = el.getBoundingClientRect();\n\t\n\t  var _getOffset = getOffset(el),\n\t      offsetLeft = _getOffset.offsetLeft,\n\t      offsetTop = _getOffset.offsetTop;\n\t\n\t  return {\n\t    top: rect.top - offsetTop,\n\t    left: rect.left - offsetLeft,\n\t    right: rect.right - offsetLeft,\n\t    bottom: rect.bottom - offsetTop,\n\t    width: rect.width,\n\t    height: rect.height\n\t  };\n\t}\n\t\n\t/**\r\n\t * Adjust scale from normalized scale (100%) to rendered scale.\r\n\t *\r\n\t * @param {SVGElement} svg The SVG to gather metadata from\r\n\t * @param {Object} rect A map of numeric values to scale\r\n\t * @return {Object} A copy of `rect` with values scaled up\r\n\t */\n\tfunction scaleUp(svg, rect) {\n\t  var result = {};\n\t\n\t  var _getMetadata = getMetadata(svg),\n\t      viewport = _getMetadata.viewport;\n\t\n\t  Object.keys(rect).forEach(function (key) {\n\t    result[key] = rect[key] * viewport.scale;\n\t  });\n\t\n\t  return result;\n\t}\n\t\n\tfunction convertToSvgRect(rect, svg, viewport) {\n\t  var pt1 = [rect.x, rect.y];\n\t  var pt2 = [rect.x + rect.width, rect.y + rect.height];\n\t\n\t  pt1 = convertToSvgPoint(pt1, svg, viewport);\n\t  pt2 = convertToSvgPoint(pt2, svg, viewport);\n\t\n\t  return {\n\t    x: Math.min(pt1[0], pt2[0]),\n\t    y: Math.min(pt1[1], pt2[1]),\n\t    width: Math.abs(pt2[0] - pt1[0]),\n\t    height: Math.abs(pt2[1] - pt1[1])\n\t  };\n\t}\n\t\n\tfunction convertToSvgPoint(pt, svg, viewport) {\n\t  var result = {};\n\t  viewport = viewport || getMetadata(svg).viewport;\n\t\n\t  var xform = [1, 0, 0, 1, 0, 0];\n\t  xform = (0, _mathUtils.scale)(xform, viewport.scale, viewport.scale);\n\t  xform = (0, _mathUtils.rotate)(xform, viewport.rotation);\n\t\n\t  var offset = (0, _appendChild.getTranslation)(viewport);\n\t  xform = (0, _mathUtils.translate)(xform, offset.x, offset.y);\n\t\n\t  return (0, _mathUtils.applyInverseTransform)(pt, xform);\n\t}\n\t\n\tfunction convertToScreenPoint(pt, svg, viewport) {\n\t  var result = {};\n\t  viewport = viewport || getMetadata(svg).viewport;\n\t\n\t  var xform = [1, 0, 0, 1, 0, 0];\n\t  xform = (0, _mathUtils.scale)(xform, viewport.scale, viewport.scale);\n\t  xform = (0, _mathUtils.rotate)(xform, viewport.rotation);\n\t\n\t  var offset = (0, _appendChild.getTranslation)(viewport);\n\t  xform = (0, _mathUtils.translate)(xform, offset.x, offset.y);\n\t\n\t  return (0, _mathUtils.applyTransform)(pt, xform);\n\t}\n\t\n\t/**\r\n\t * Adjust scale from rendered scale to a normalized scale (100%).\r\n\t *\r\n\t * @param {SVGElement} svg The SVG to gather metadata from\r\n\t * @param {Object} rect A map of numeric values to scale\r\n\t * @return {Object} A copy of `rect` with values scaled down\r\n\t */\n\tfunction scaleDown(svg, rect) {\n\t  var result = {};\n\t\n\t  var _getMetadata2 = getMetadata(svg),\n\t      viewport = _getMetadata2.viewport;\n\t\n\t  Object.keys(rect).forEach(function (key) {\n\t    result[key] = rect[key] / viewport.scale;\n\t  });\n\t\n\t  return result;\n\t}\n\t\n\t/**\r\n\t * Get the scroll position of an element, accounting for parent elements\r\n\t *\r\n\t * @param {Element} el The element to get the scroll position for\r\n\t * @return {Object} The scrollTop and scrollLeft position\r\n\t */\n\tfunction getScroll(el) {\n\t  var scrollTop = 0;\n\t  var scrollLeft = 0;\n\t  var parentNode = el;\n\t\n\t  while ((parentNode = parentNode.parentNode) && parentNode !== document) {\n\t    scrollTop += parentNode.scrollTop;\n\t    scrollLeft += parentNode.scrollLeft;\n\t  }\n\t\n\t  return { scrollTop: scrollTop, scrollLeft: scrollLeft };\n\t}\n\t\n\t/**\r\n\t * Get the offset position of an element, accounting for parent elements\r\n\t *\r\n\t * @param {Element} el The element to get the offset position for\r\n\t * @return {Object} The offsetTop and offsetLeft position\r\n\t */\n\tfunction getOffset(el) {\n\t  var parentNode = el;\n\t\n\t  while ((parentNode = parentNode.parentNode) && parentNode !== document) {\n\t    if (parentNode.nodeName.toUpperCase() === 'SVG') {\n\t      break;\n\t    }\n\t  }\n\t\n\t  var rect = parentNode.getBoundingClientRect();\n\t\n\t  return { offsetLeft: rect.left, offsetTop: rect.top };\n\t}\n\t\n\t/**\r\n\t * Disable user ability to select text on page\r\n\t */\n\tfunction disableUserSelect() {\n\t  if (!userSelectStyleSheet.parentNode) {\n\t    document.head.appendChild(userSelectStyleSheet);\n\t  }\n\t}\n\t\n\t/**\r\n\t * Enable user ability to select text on page\r\n\t */\n\tfunction enableUserSelect() {\n\t  if (userSelectStyleSheet.parentNode) {\n\t    userSelectStyleSheet.parentNode.removeChild(userSelectStyleSheet);\n\t  }\n\t}\n\t\n\t/**\r\n\t * Get the metadata for a SVG container\r\n\t *\r\n\t * @param {SVGElement} svg The SVG container to get metadata for\r\n\t */\n\tfunction getMetadata(svg) {\n\t  return {\n\t    documentId: svg.getAttribute('data-pdf-annotate-document'),\n\t    pageNumber: parseInt(svg.getAttribute('data-pdf-annotate-page'), 10),\n\t    viewport: JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'))\n\t  };\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function createStyleSheet(blocks) {\n\t  var style = document.createElement('style');\n\t  var text = Object.keys(blocks).map(function (selector) {\n\t    return processRuleSet(selector, blocks[selector]);\n\t  }).join('\\n');\n\t  \n\t  style.setAttribute('type', 'text/css');\n\t  style.appendChild(document.createTextNode(text));\n\t\n\t  return style;\n\t}\n\t\n\tfunction processRuleSet(selector, block) {\n\t  return selector + ' {\\n' + processDeclarationBlock(block) + '\\n}';\n\t}\n\t\n\tfunction processDeclarationBlock(block) {\n\t  return Object.keys(block).map(function (prop) {\n\t    return processDeclaration(prop, block[prop]);\n\t  }).join('\\n');\n\t}\n\t\n\tfunction processDeclaration(prop, value) {\n\t  if (!isNaN(value) && value != 0) {\n\t    value = value + 'px';\n\t  }\n\t\n\t  return hyphenate(prop) + ': ' + value + ';';\n\t}\n\t\n\tfunction hyphenate(prop) {\n\t  return prop.replace(/[A-Z]/g, function (match) {\n\t    return '-' + match.toLowerCase();\n\t  });\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getTranslation = getTranslation;\n\texports.appendChild = appendChild;\n\texports.transformChild = transformChild;\n\t\n\tvar _objectAssign = __webpack_require__(9);\n\t\n\tvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\t\n\tvar _renderLine = __webpack_require__(10);\n\t\n\tvar _renderLine2 = _interopRequireDefault(_renderLine);\n\t\n\tvar _renderPath = __webpack_require__(13);\n\t\n\tvar _renderPath2 = _interopRequireDefault(_renderPath);\n\t\n\tvar _renderPoint = __webpack_require__(14);\n\t\n\tvar _renderPoint2 = _interopRequireDefault(_renderPoint);\n\t\n\tvar _renderRect = __webpack_require__(15);\n\t\n\tvar _renderRect2 = _interopRequireDefault(_renderRect);\n\t\n\tvar _renderText = __webpack_require__(16);\n\t\n\tvar _renderText2 = _interopRequireDefault(_renderText);\n\t\n\tvar _renderCircle = __webpack_require__(17);\n\t\n\tvar _renderCircle2 = _interopRequireDefault(_renderCircle);\n\t\n\tvar _renderArrow = __webpack_require__(18);\n\t\n\tvar _renderArrow2 = _interopRequireDefault(_renderArrow);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar isFirefox = /firefox/i.test(navigator.userAgent);\n\t\n\t/**\r\n\t * Get the x/y translation to be used for transforming the annotations\r\n\t * based on the rotation of the viewport.\r\n\t *\r\n\t * @param {Object} viewport The viewport data from the page\r\n\t * @return {Object}\r\n\t */\n\tfunction getTranslation(viewport) {\n\t  var x = void 0;\n\t  var y = void 0;\n\t\n\t  // Modulus 360 on the rotation so that we only\n\t  // have to worry about four possible values.\n\t  switch (viewport.rotation % 360) {\n\t    case 0:\n\t      x = y = 0;\n\t      break;\n\t    case 90:\n\t      x = 0;\n\t      y = viewport.width / viewport.scale * -1;\n\t      break;\n\t    case 180:\n\t      x = viewport.width / viewport.scale * -1;\n\t      y = viewport.height / viewport.scale * -1;\n\t      break;\n\t    case 270:\n\t      x = viewport.height / viewport.scale * -1;\n\t      y = 0;\n\t      break;\n\t  }\n\t\n\t  return { x: x, y: y };\n\t}\n\t\n\t/**\r\n\t * Transform the rotation and scale of a node using SVG's native transform attribute.\r\n\t *\r\n\t * @param {Node} node The node to be transformed\r\n\t * @param {Object} viewport The page's viewport data\r\n\t * @return {Node}\r\n\t */\n\tfunction transform(node, viewport) {\n\t  var trans = getTranslation(viewport);\n\t\n\t  // Let SVG natively transform the element\n\t  node.setAttribute('transform', 'scale(' + viewport.scale + ') rotate(' + viewport.rotation + ') translate(' + trans.x + ', ' + trans.y + ')');\n\t\n\t  // Manually adjust x/y for nested SVG nodes\n\t  if (!isFirefox && node.nodeName.toLowerCase() === 'svg') {\n\t    node.setAttribute('x', parseInt(node.getAttribute('x'), 10) * viewport.scale);\n\t    node.setAttribute('y', parseInt(node.getAttribute('y'), 10) * viewport.scale);\n\t\n\t    var x = parseInt(node.getAttribute('x', 10));\n\t    var y = parseInt(node.getAttribute('y', 10));\n\t    var width = parseInt(node.getAttribute('width'), 10);\n\t    var height = parseInt(node.getAttribute('height'), 10);\n\t    var path = node.querySelector('path');\n\t    var svg = path.parentNode;\n\t\n\t    // Scale width/height\n\t    [node, svg, path, node.querySelector('rect')].forEach(function (n) {\n\t      n.setAttribute('width', parseInt(n.getAttribute('width'), 10) * viewport.scale);\n\t      n.setAttribute('height', parseInt(n.getAttribute('height'), 10) * viewport.scale);\n\t    });\n\t\n\t    // Transform path but keep scale at 100% since it will be handled natively\n\t    transform(path, (0, _objectAssign2.default)({}, viewport, { scale: 1 }));\n\t\n\t    switch (viewport.rotation % 360) {\n\t      case 90:\n\t        node.setAttribute('x', viewport.width - y - width);\n\t        node.setAttribute('y', x);\n\t        svg.setAttribute('x', 1);\n\t        svg.setAttribute('y', 0);\n\t        break;\n\t      case 180:\n\t        node.setAttribute('x', viewport.width - x - width);\n\t        node.setAttribute('y', viewport.height - y - height);\n\t        svg.setAttribute('y', 2);\n\t        break;\n\t      case 270:\n\t        node.setAttribute('x', y);\n\t        node.setAttribute('y', viewport.height - x - height);\n\t        svg.setAttribute('x', -1);\n\t        svg.setAttribute('y', 0);\n\t        break;\n\t    }\n\t  }\n\t\n\t  return node;\n\t}\n\t\n\t/**\r\n\t * Append an annotation as a child of an SVG.\r\n\t *\r\n\t * @param {SVGElement} svg The SVG element to append the annotation to\r\n\t * @param {Object} annotation The annotation definition to render and append\r\n\t * @param {Object} viewport The page's viewport data\r\n\t * @return {SVGElement} A node that was created and appended by this function\r\n\t */\n\tfunction appendChild(svg, annotation, viewport) {\n\t  if (!viewport) {\n\t    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n\t  }\n\t\n\t  var child = void 0;\n\t  switch (annotation.type) {\n\t    case 'area':\n\t    case 'highlight':\n\t      child = (0, _renderRect2.default)(annotation);\n\t      break;\n\t    case 'circle':\n\t    case 'fillcircle':\n\t    case 'emptycircle':\n\t      child = (0, _renderCircle2.default)(annotation);\n\t      break;\n\t    case 'strikeout':\n\t      child = (0, _renderLine2.default)(annotation);\n\t      break;\n\t    case 'point':\n\t      child = (0, _renderPoint2.default)(annotation);\n\t      break;\n\t    case 'textbox':\n\t      child = (0, _renderText2.default)(annotation);\n\t      break;\n\t    case 'drawing':\n\t      child = (0, _renderPath2.default)(annotation);\n\t      break;\n\t    case 'arrow':\n\t      child = (0, _renderArrow2.default)(annotation);\n\t      break;\n\t  }\n\t\n\t  // If no type was provided for an annotation it will result in node being null.\n\t  // Skip appending/transforming if node doesn't exist.\n\t  if (child) {\n\t    // Set attributes\n\t    child.setAttribute('data-pdf-annotate-id', annotation.uuid);\n\t    child.setAttribute('data-pdf-annotate-type', annotation.type);\n\t    child.setAttribute('data-pdf-annotate-userId', annotation.userId);\n\t    child.setAttribute('aria-hidden', true);\n\t\n\t    svg.appendChild(transform(child, viewport));\n\t  }\n\t\n\t  return child;\n\t}\n\t\n\t/**\r\n\t * Transform a child annotation of an SVG.\r\n\t *\r\n\t * @param {SVGElement} svg The SVG element with the child annotation\r\n\t * @param {Object} child The SVG child to transform\r\n\t * @param {Object} viewport The page's viewport data\r\n\t * @return {SVGElement} A node that was transformed by this function\r\n\t */\n\tfunction transformChild(svg, child, viewport) {\n\t  if (!viewport) {\n\t    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n\t  }\n\t\n\t  // If no type was provided for an annotation it will result in node being null.\n\t  // Skip transforming if node doesn't exist.\n\t  if (child) {\n\t    child = transform(child, viewport);\n\t  }\n\t\n\t  return child;\n\t}\n\t\n\texports.default = {\n\t  /**\r\n\t   * Get the x/y translation to be used for transforming the annotations\r\n\t   * based on the rotation of the viewport.\r\n\t   */\n\t  getTranslation: getTranslation,\n\t\n\t  /**\r\n\t   * Append an SVG child for an annotation\r\n\t   */\n\t  appendChild: appendChild,\n\t\n\t  /**\r\n\t   * Transform an existing SVG child\r\n\t   */\n\t  transformChild: transformChild\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderLine;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create SVGLineElements from an annotation definition.\r\n\t * This is used for anntations of type `strikeout`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGGElement} A group of all lines to be rendered\r\n\t */\n\tfunction renderLine(a) {\n\t  var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\t  (0, _setAttributes2.default)(group, {\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t    strokeWidth: 1\n\t  });\n\t\n\t  a.rectangles.forEach(function (r) {\n\t    var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n\t\n\t    (0, _setAttributes2.default)(line, {\n\t      x1: r.x,\n\t      y1: r.y,\n\t      x2: r.x + r.width,\n\t      y2: r.y\n\t    });\n\t\n\t    group.appendChild(line);\n\t  });\n\t\n\t  return group;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = setAttributes;\n\tvar UPPER_REGEX = /[A-Z]/g;\n\t\n\t// Don't convert these attributes from camelCase to hyphenated-attributes\n\tvar BLACKLIST = ['viewBox'];\n\t\n\tvar keyCase = function keyCase(key) {\n\t  if (BLACKLIST.indexOf(key) === -1) {\n\t    key = key.replace(UPPER_REGEX, function (match) {\n\t      return '-' + match.toLowerCase();\n\t    });\n\t  }\n\t  return key;\n\t};\n\t\n\t/**\r\n\t * Set attributes for a node from a map\r\n\t *\r\n\t * @param {Node} node The node to set attributes on\r\n\t * @param {Object} attributes The map of key/value pairs to use for attributes\r\n\t */\n\tfunction setAttributes(node, attributes) {\n\t  Object.keys(attributes).forEach(function (key) {\n\t    node.setAttribute(keyCase(key), attributes[key]);\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = normalizeColor;\n\tvar REGEX_HASHLESS_HEX = /^([a-f0-9]{6}|[a-f0-9]{3})$/i;\n\t\n\t/**\r\n\t * Normalize a color value\r\n\t *\r\n\t * @param {String} color The color to normalize\r\n\t * @return {String}\r\n\t */\n\tfunction normalizeColor(color) {\n\t  if (REGEX_HASHLESS_HEX.test(color)) {\n\t    color = \"#\" + color;\n\t  }\n\t  return color;\n\t}\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderPath;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create SVGPathElement from an annotation definition.\r\n\t * This is used for anntations of type `drawing`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGPathElement} The path to be rendered\r\n\t */\n\tfunction renderPath(a) {\n\t  var d = [];\n\t  var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\n\t  for (var i = 0, l = a.lines.length; i < l; i++) {\n\t    var p1 = a.lines[i];\n\t    var p2 = a.lines[i + 1];\n\t    if (p2) {\n\t      d.push('M' + p1[0] + ' ' + p1[1] + ' ' + p2[0] + ' ' + p2[1]);\n\t    }\n\t  }\n\t\n\t  /*\r\n\t    \r\n\t     if(a.lines.length>2) {\r\n\t      var p1 = a.lines[0];\r\n\t      var p2 = a.lines[a.lines.length-1];\r\n\t  \r\n\t      var p3 = []; //arrow \r\n\t      var p4 = [];\r\n\t      var p0 = []; //arrow intersection\r\n\t  \r\n\t  \r\n\t   \r\n\t      if (p2) {\r\n\t        var k = -(p2[0]-p1[0])/(p2[1]-p1[1]);\r\n\t  \r\n\t        var deltaX = 3;\r\n\t        p0[0] = p1[0]+0.8*(p2[0]-p1[0]);\r\n\t        p0[1] = p1[1]+0.8*(p2[1]-p1[1]);\r\n\t  \r\n\t        p3[0] = p0[0] + deltaX;\r\n\t        p3[1] = p0[1] + k*deltaX;\r\n\t  \r\n\t        p4[0] = p0[0] - deltaX;\r\n\t        p4[1] = p0[1] - k*deltaX;\r\n\t  \r\n\t        if(Math.abs(p2[1]-p1[1]) < 20) {\r\n\t  \r\n\t          p3[0] = p0[0] ;\r\n\t          p3[1] = p0[1] + deltaX*1;\r\n\t  \r\n\t          p4[0] = p0[0] ;\r\n\t          p4[1] = p0[1] - deltaX*1;\r\n\t  \r\n\t        }\r\n\t  \r\n\t        d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\r\n\t         //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\r\n\t        d.push(`M${p2[0]} ${p2[1]} ${p3[0]} ${p3[1]}`);\r\n\t        d.push(`M${p3[0]} ${p3[1]} ${p4[0]} ${p4[1]}`);\r\n\t        d.push(`M${p4[0]} ${p4[1]} ${p2[0]} ${p2[1]}`);\r\n\t       }\r\n\t      }*/\n\t\n\t  (0, _setAttributes2.default)(path, {\n\t    d: d.join(' ') + 'Z',\n\t    stroke: (0, _normalizeColor2.default)(a.color || '#000'),\n\t    strokeWidth: a.width || 1,\n\t    fill: 'none'\n\t  });\n\t\n\t  return path;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderPoint;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar SIZE = 25;\n\tvar D = 'M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z';\n\t\n\t/**\r\n\t * Create SVGElement from an annotation definition.\r\n\t * This is used for anntations of type `comment`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGElement} A svg to be rendered\r\n\t */\n\tfunction renderPoint(a) {\n\t  var outerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t  var innerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t  var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\t  var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\n\t  (0, _setAttributes2.default)(outerSVG, {\n\t    width: SIZE,\n\t    height: SIZE,\n\t    x: a.x,\n\t    y: a.y\n\t  });\n\t\n\t  (0, _setAttributes2.default)(innerSVG, {\n\t    width: SIZE,\n\t    height: SIZE,\n\t    x: 0,\n\t    y: SIZE * 0.05 * -1,\n\t    viewBox: '0 0 1000 1000'\n\t  });\n\t\n\t  (0, _setAttributes2.default)(rect, {\n\t    width: SIZE,\n\t    height: SIZE,\n\t    stroke: '#000',\n\t    fill: '#ff0'\n\t  });\n\t\n\t  (0, _setAttributes2.default)(path, {\n\t    d: D,\n\t    strokeWidth: 50,\n\t    stroke: '#000',\n\t    fill: '#fff'\n\t  });\n\t\n\t  innerSVG.appendChild(path);\n\t  outerSVG.appendChild(rect);\n\t  outerSVG.appendChild(innerSVG);\n\t\n\t  return outerSVG;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderRect;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create SVGRectElements from an annotation definition.\r\n\t * This is used for anntations of type `area` and `highlight`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGGElement|SVGRectElement} A group of all rects to be rendered\r\n\t */\n\tfunction renderRect(a) {\n\t  if (a.type === 'highlight') {\n\t    var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\t    (0, _setAttributes2.default)(group, {\n\t      fill: (0, _normalizeColor2.default)(a.color || '#ff0'),\n\t      fillOpacity: 0.2\n\t    });\n\t\n\t    a.rectangles.forEach(function (r) {\n\t      group.appendChild(createRect(r));\n\t    });\n\t\n\t    return group;\n\t  } else {\n\t    var rect = createRect(a);\n\t    (0, _setAttributes2.default)(rect, {\n\t      stroke: (0, _normalizeColor2.default)(a.color || '#f00'),\n\t      fill: 'none'\n\t    });\n\t\n\t    return rect;\n\t  }\n\t}\n\t\n\tfunction createRect(r) {\n\t  var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\t\n\t  (0, _setAttributes2.default)(rect, {\n\t    x: r.x,\n\t    y: r.y,\n\t    width: r.width,\n\t    height: r.height\n\t  });\n\t\n\t  return rect;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderText;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create SVGTextElement from an annotation definition.\r\n\t * This is used for anntations of type `textbox`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGTextElement} A text to be rendered\r\n\t */\n\tfunction renderText(a) {\n\t\n\t  // Text should be rendered at 0 degrees relative to\n\t  // document rotation\n\t  var text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n\t  var x = a.x;\n\t  var y = a.y;\n\t\n\t  (0, _setAttributes2.default)(text, {\n\t    x: x,\n\t    y: y,\n\t    fill: (0, _normalizeColor2.default)(a.color || '#000'),\n\t    fontSize: a.size,\n\t    transform: 'rotate(' + a.rotation + ', ' + x + ', ' + y + ')'\n\t  });\n\t  text.innerHTML = a.content;\n\t\n\t  var g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\t  g.appendChild(text);\n\t\n\t  return g;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderCircle;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create an SVGCircleElement from an annotation definition.\r\n\t * This is used for annotations of type `circle`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGGElement|SVGCircleElement} A circle to be rendered\r\n\t */\n\tfunction renderCircle(a) {\n\t  var circle = createCircle(a);\n\t  var color = (0, _normalizeColor2.default)(a.color || '#f00');\n\t\n\t  if (a.type === 'circle') (0, _setAttributes2.default)(circle, {\n\t    stroke: color,\n\t    fill: 'none',\n\t    'stroke-width': 5\n\t  });\n\t  if (a.type === 'emptycircle') (0, _setAttributes2.default)(circle, {\n\t    stroke: color,\n\t    fill: 'none',\n\t    'stroke-width': 2\n\t  });\n\t\n\t  if (a.type === 'fillcircle') (0, _setAttributes2.default)(circle, {\n\t    stroke: color,\n\t    fill: color,\n\t    'stroke-width': 5\n\t  });\n\t\n\t  return circle;\n\t}\n\t\n\tfunction createCircle(a) {\n\t  var circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\t  (0, _setAttributes2.default)(circle, {\n\t    cx: a.cx,\n\t    cy: a.cy,\n\t    r: a.r\n\t  });\n\t\n\t  return circle;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderArrow;\n\t\n\tvar _setAttributes = __webpack_require__(11);\n\t\n\tvar _setAttributes2 = _interopRequireDefault(_setAttributes);\n\t\n\tvar _normalizeColor = __webpack_require__(12);\n\t\n\tvar _normalizeColor2 = _interopRequireDefault(_normalizeColor);\n\t\n\tvar _mathUtils = __webpack_require__(19);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create SVGPathElement from an annotation definition.\r\n\t * This is used for anntations of type `drawing`.\r\n\t *\r\n\t * @param {Object} a The annotation definition\r\n\t * @return {SVGPathElement} The path to be rendered\r\n\t */\n\tfunction renderArrow(a) {\n\t  var d = [];\n\t  var arrow = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n\t\n\t  if (a.lines.length == 2) {\n\t    var p1 = a.lines[0];\n\t    var p2 = a.lines[a.lines.length - 1];\n\t\n\t    var arrowLength = 40;\n\t    var pt0 = (0, _mathUtils.makePoint)(p1[0], p1[1], 0);\n\t    var pt1 = (0, _mathUtils.makePoint)(p2[0], p2[1], 0);\n\t    var x = (0, _mathUtils.makeVectorFromPoints)(pt0, pt1);\n\t    var unitX = (0, _mathUtils.unitVector)(x);\n\t    pt1 = (0, _mathUtils.addVector)(pt0, (0, _mathUtils.multiplyVector)(unitX, arrowLength));\n\t    x = (0, _mathUtils.makeVectorFromPoints)(pt0, pt1);\n\t    var unitZ = (0, _mathUtils.makeVector)(0, 0, 1);\n\t    var unitY = (0, _mathUtils.unitVector)((0, _mathUtils.crossProduct)(unitX, unitZ));\n\t    var thickness = a.width || 10;\n\t\n\t    var A = (0, _mathUtils.addVector)(pt0, (0, _mathUtils.multiplyVector)(unitY, thickness * 0.5));\n\t    var B = (0, _mathUtils.addVector)(A, (0, _mathUtils.multiplyVector)(unitX, (0, _mathUtils.magnitude)(x) - thickness * 2.0));\n\t    var C = (0, _mathUtils.addVector)(B, (0, _mathUtils.multiplyVector)(unitY, thickness));\n\t    var D = pt1;\n\t    var G = (0, _mathUtils.addVector)(pt0, (0, _mathUtils.multiplyVector)((0, _mathUtils.negateVector)(unitY), thickness * 0.5));\n\t    var F = (0, _mathUtils.addVector)(G, (0, _mathUtils.multiplyVector)(unitX, (0, _mathUtils.magnitude)(x) - thickness * 2.0));\n\t    var E = (0, _mathUtils.addVector)(F, (0, _mathUtils.multiplyVector)((0, _mathUtils.negateVector)(unitY), thickness));\n\t\n\t    var points = '' + A.x + ',' + A.y + ' ' + B.x + ',' + B.y + ' ' + C.x + ',' + C.y + ' ' + D.x + ',' + D.y + ' ' + E.x + ',' + E.y + ' ' + F.x + ',' + F.y + ' ' + G.x + ',' + G.y;\n\t\n\t    (0, _setAttributes2.default)(arrow, {\n\t      points: points,\n\t      stroke: (0, _normalizeColor2.default)(a.color || '#000'),\n\t      fill: (0, _normalizeColor2.default)(a.color || '#000')\n\t    });\n\t  }\n\t\n\t  return arrow;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.applyTransform = applyTransform;\n\texports.applyInverseTransform = applyInverseTransform;\n\texports.transform = transform;\n\texports.translate = translate;\n\texports.rotate = rotate;\n\texports.scale = scale;\n\texports.makePoint = makePoint;\n\texports.makeVector = makeVector;\n\texports.makeVectorFromPoints = makeVectorFromPoints;\n\texports.addVector = addVector;\n\texports.multiplyVector = multiplyVector;\n\texports.magnitude = magnitude;\n\texports.negateVector = negateVector;\n\texports.unitVector = unitVector;\n\texports.crossProduct = crossProduct;\n\t// Transform point by matrix\n\t//\n\tfunction applyTransform(p, m) {\n\t  var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n\t  var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n\t  return [xt, yt];\n\t};\n\t\n\t// Transform point by matrix inverse\n\t//\n\tfunction applyInverseTransform(p, m) {\n\t  var d = m[0] * m[3] - m[1] * m[2];\n\t  var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n\t  var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n\t  return [xt, yt];\n\t};\n\t\n\t// Concatenates two transformation matrices together and returns the result.\n\tfunction transform(m1, m2) {\n\t  return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n\t};\n\t\n\tfunction translate(m, x, y) {\n\t  return [m[0], m[1], m[2], m[3], m[0] * x + m[2] * y + m[4], m[1] * x + m[3] * y + m[5]];\n\t};\n\t\n\tfunction rotate(m, angle) {\n\t  angle = angle * Math.PI / 180;\n\t\n\t  var cosValue = Math.cos(angle);\n\t  var sinValue = Math.sin(angle);\n\t\n\t  return [m[0] * cosValue + m[2] * sinValue, m[1] * cosValue + m[3] * sinValue, m[0] * -sinValue + m[2] * cosValue, m[1] * -sinValue + m[3] * cosValue, m[4], m[5]];\n\t};\n\t\n\tfunction scale(m, x, y) {\n\t  return [m[0] * x, m[1] * x, m[2] * y, m[3] * y, m[4], m[5]];\n\t};\n\t\n\tfunction getInverseTransform(m) {\n\t  var d = m[0] * m[3] - m[1] * m[2];\n\t  return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n\t};\n\t\n\tfunction makePoint(x, y, z) {\n\t  return { x: x, y: y, z: z };\n\t}\n\t\n\tfunction makeVector(xcoord, ycoord, zcoord) {\n\t  return { xcoord: xcoord, ycoord: ycoord, zcoord: zcoord };\n\t}\n\t\n\tfunction makeVectorFromPoints(pt1, pt2) {\n\t  var xcoord = pt2.x - pt1.x;\n\t  var ycoord = pt2.y - pt1.y;\n\t  var zcoord = pt2.z - pt1.z;\n\t  return makeVector(xcoord, ycoord, zcoord);\n\t}\n\t\n\tfunction addVector(pt, v) {\n\t  return makePoint(pt.x + v.xcoord, pt.y + v.ycoord, pt.z + v.zcoord);\n\t}\n\t\n\tfunction multiplyVector(v, scalar) {\n\t  return makeVector(v.xcoord * scalar, v.ycoord * scalar, v.zcoord * scalar);\n\t}\n\t\n\tfunction magnitude(v) {\n\t  return Math.sqrt(Math.pow(v.xcoord, 2) + Math.pow(v.ycoord, 2) + Math.pow(v.zcoord, 2));\n\t}\n\t\n\tfunction negateVector(v) {\n\t  return multiplyVector(v, -1);\n\t}\n\t\n\tfunction unitVector(v) {\n\t  var mag = magnitude(v);\n\t  var xcoord = v.xcoord / mag;\n\t  var ycoord = v.ycoord / mag;\n\t  var zcoord = v.zcoord / mag;\n\t  return makeVector(xcoord, ycoord, zcoord);\n\t}\n\t\n\tfunction crossProduct(u, v) {\n\t  //\n\t  // u X v = < u2*v3 - u3*v2,\n\t  //           u3*v1 - u1*v3,\n\t  //           u1*v2 - u2*v1 >\n\t  var xcoord = u.ycoord * v.zcoord - u.zcoord * v.ycoord;\n\t  var ycoord = u.zcoord * v.xcoord - u.xcoord * v.zcoord;\n\t  var zcoord = u.xcoord * v.ycoord - u.ycoord * v.xcoord;\n\t  return makeVector(xcoord, ycoord, zcoord);\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _uuid = __webpack_require__(21);\n\t\n\tvar _uuid2 = _interopRequireDefault(_uuid);\n\t\n\tvar _StoreAdapter2 = __webpack_require__(2);\n\t\n\tvar _StoreAdapter3 = _interopRequireDefault(_StoreAdapter2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// StoreAdapter for working with localStorage\n\t// This is ideal for testing, examples, and prototyping\n\tvar LocalStoreAdapter = function (_StoreAdapter) {\n\t  _inherits(LocalStoreAdapter, _StoreAdapter);\n\t\n\t  function LocalStoreAdapter() {\n\t    var userId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"user\";\n\t\n\t    _classCallCheck(this, LocalStoreAdapter);\n\t\n\t    var _this = _possibleConstructorReturn(this, (LocalStoreAdapter.__proto__ || Object.getPrototypeOf(LocalStoreAdapter)).call(this, {\n\t      getAnnotations: function getAnnotations(documentId, pageNumber) {\n\t        return new Promise(function (resolve, reject) {\n\t          var annotations = getAllAnnotations().filter(function (i) {\n\t            return i.page === pageNumber && i.class === 'Annotation';\n\t          });\n\t\n\t          resolve({\n\t            documentId: documentId,\n\t            pageNumber: pageNumber,\n\t            annotations: annotations\n\t          });\n\t        });\n\t      },\n\t      getAnnotation: function getAnnotation(documentId, annotationId) {\n\t        return Promise.resolve(getAnnotations(documentId, userId)[findAnnotation(documentId, userId, annotationId)]);\n\t      },\n\t      addAnnotation: function addAnnotation(documentId, pageNumber, annotation) {\n\t        return new Promise(function (resolve, reject) {\n\t          annotation.class = 'Annotation';\n\t          annotation.uuid = (0, _uuid2.default)();\n\t          annotation.page = pageNumber;\n\t          annotation.userId = userId;\n\t\n\t          var annotations = getAnnotations(documentId, userId);\n\t          annotations.push(annotation);\n\t          updateAnnotations(documentId, userId, annotations);\n\t\n\t          resolve(annotation);\n\t        });\n\t      },\n\t      editAnnotation: function editAnnotation(documentId, annotationId, annotation) {\n\t        return new Promise(function (resolve, reject) {\n\t          var annotations = getAnnotations(documentId, userId);\n\t          annotations[findAnnotation(documentId, userId, annotationId)] = annotation;\n\t          updateAnnotations(documentId, userId, annotations);\n\t\n\t          resolve(annotation);\n\t        });\n\t      },\n\t      deleteAnnotation: function deleteAnnotation(documentId, annotationId) {\n\t        return new Promise(function (resolve, reject) {\n\t          var index = findAnnotation(documentId, userId, annotationId);\n\t          if (index > -1) {\n\t            var annotations = getAnnotations(documentId, userId);\n\t            annotations.splice(index, 1);\n\t            updateAnnotations(documentId, userId, annotations);\n\t          }\n\t\n\t          resolve(true);\n\t        });\n\t      },\n\t      getComments: function getComments(documentId, annotationId) {\n\t        return new Promise(function (resolve, reject) {\n\t          resolve(getAnnotations(documentId, userId).filter(function (i) {\n\t            return i.class === 'Comment' && i.annotation === annotationId;\n\t          }));\n\t        });\n\t      },\n\t      addComment: function addComment(documentId, annotationId, content) {\n\t        return new Promise(function (resolve, reject) {\n\t          var comment = {\n\t            class: 'Comment',\n\t            uuid: (0, _uuid2.default)(),\n\t            annotation: annotationId,\n\t            content: content\n\t          };\n\t\n\t          var annotations = getAnnotations(documentId, userId);\n\t          annotations.push(comment);\n\t          updateAnnotations(documentId, userId, annotations);\n\t\n\t          resolve(comment);\n\t        });\n\t      },\n\t      deleteComment: function deleteComment(documentId, commentId) {\n\t        return new Promise(function (resolve, reject) {\n\t          getAnnotations(documentId, userId);\n\t          var index = -1;\n\t          var annotations = getAnnotations(documentId, userId);\n\t          for (var i = 0, l = annotations.length; i < l; i++) {\n\t            if (annotations[i].uuid === commentId) {\n\t              index = i;\n\t              break;\n\t            }\n\t          }\n\t\n\t          if (index > -1) {\n\t            annotations.splice(index, 1);\n\t            updateAnnotations(documentId, userId, annotations);\n\t          }\n\t\n\t          resolve(true);\n\t        });\n\t      }\n\t    }));\n\t\n\t    _this._userId = userId;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(LocalStoreAdapter, [{\n\t    key: 'userId',\n\t    get: function get() {\n\t      return this._userId;\n\t    }\n\t  }]);\n\t\n\t  return LocalStoreAdapter;\n\t}(_StoreAdapter3.default);\n\t\n\texports.default = LocalStoreAdapter;\n\t\n\t\n\tfunction getAllAnnotations() {\n\t  var all_annotations = [];\n\t  for (var i = 0; i < localStorage.length; i++) {\n\t    if (localStorage.key(i).includes('annotations')) {\n\t      all_annotations.push.apply(all_annotations, _toConsumableArray(JSON.parse(localStorage.getItem(localStorage.key(i)))));\n\t    }\n\t  }\n\t  return all_annotations;\n\t}\n\t\n\tfunction getAnnotations(documentId, userId) {\n\t  return JSON.parse(localStorage.getItem(documentId + '/' + userId + '/annotations')) || [];\n\t}\n\t\n\tfunction updateAnnotations(documentId, userId, annotations) {\n\t  localStorage.setItem(documentId + '/' + userId + '/annotations', JSON.stringify(annotations));\n\t}\n\t/**\r\n\t * \r\n\t * @param {String} documentId Document id of the annotation\r\n\t * @param {String} userId User id of the annotation\r\n\t * @param {String} annotationId The id of the annotation\r\n\t * \r\n\t * This function finds all the annotation made by one user.\r\n\t * \r\n\t * @return {int} The index of the annotation in localstorage\r\n\t */\n\tfunction findAnnotation(documentId, userId, annotationId) {\n\t  var index = -1;\n\t  var annotations = getAnnotations(documentId, userId);\n\t  for (var i = 0, l = annotations.length; i < l; i++) {\n\t    if (annotations[i].uuid === annotationId) {\n\t      index = i;\n\t      break;\n\t    }\n\t  }\n\t  return index;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = uuid;\n\tvar REGEXP = /[xy]/g;\n\tvar PATTERN = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n\t\n\tfunction replacement(c) {\n\t  var r = Math.random() * 16 | 0;\n\t  var v = c == 'x' ? r : r & 0x3 | 0x8;\n\t  return v.toString(16);\n\t}\n\t\n\t/**\r\n\t * Generate a univierally unique identifier\r\n\t *\r\n\t * @return {String}\r\n\t */\n\tfunction uuid() {\n\t  return PATTERN.replace(REGEXP, replacement);\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = render;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _renderScreenReaderHints = __webpack_require__(23);\n\t\n\tvar _renderScreenReaderHints2 = _interopRequireDefault(_renderScreenReaderHints);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Render the response from PDFJSAnnotate.getStoreAdapter().getAnnotations to SVG\r\n\t *\r\n\t * @param {SVGElement} svg The SVG element to render the annotations to\r\n\t * @param {Object} viewport The page viewport data\r\n\t * @param {Object} data The response from PDFJSAnnotate.getStoreAdapter().getAnnotations\r\n\t * @return {Promise} Settled once rendering has completed\r\n\t *  A settled Promise will be either:\r\n\t *    - fulfilled: SVGElement\r\n\t *    - rejected: Error\r\n\t */\n\tfunction render(svg, viewport, data) {\n\t  return new Promise(function (resolve, reject) {\n\t    // Reset the content of the SVG\n\t    svg.setAttribute('data-pdf-annotate-container', true);\n\t    svg.setAttribute('data-pdf-annotate-viewport', JSON.stringify(viewport));\n\t    svg.removeAttribute('data-pdf-annotate-document');\n\t    svg.removeAttribute('data-pdf-annotate-page');\n\t\n\t    // If there's no data nothing can be done\n\t    if (!data) {\n\t      svg.innerHTML = '';\n\t      return resolve(svg);\n\t    }\n\t\n\t    svg.setAttribute('data-pdf-annotate-document', data.documentId);\n\t    svg.setAttribute('data-pdf-annotate-page', data.pageNumber);\n\t\n\t    // Make sure annotations is an array\n\t    if (!Array.isArray(data.annotations) || data.annotations.length === 0) {\n\t      return resolve(svg);\n\t    }\n\t\n\t    // Append or transform annotation to svg\n\t    data.annotations.forEach(function (a) {\n\t      var node = svg.querySelector('[data-pdf-annotate-id=\"' + a.uuid + '\"]');\n\t      if (node) {\n\t        (0, _appendChild.transformChild)(svg, node, viewport);\n\t      } else {\n\t        (0, _appendChild.appendChild)(svg, a, viewport);\n\t      }\n\t    });\n\t\n\t    resolve(svg);\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderScreenReaderHints;\n\t\n\tvar _insertScreenReaderHint = __webpack_require__(24);\n\t\n\tvar _insertScreenReaderHint2 = _interopRequireDefault(_insertScreenReaderHint);\n\t\n\tvar _initEventHandlers = __webpack_require__(31);\n\t\n\tvar _initEventHandlers2 = _interopRequireDefault(_initEventHandlers);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// TODO This is not the right place for this to live\n\t(0, _initEventHandlers2.default)();\n\t\n\t/**\r\n\t * Insert hints into the DOM for screen readers.\r\n\t *\r\n\t * @param {Array} annotations The annotations that hints are inserted for\r\n\t */\n\tfunction renderScreenReaderHints(annotations) {\n\t  annotations = Array.isArray(annotations) ? annotations : [];\n\t\n\t  // Insert hints for each type\n\t  Object.keys(SORT_TYPES).forEach(function (type) {\n\t    var sortBy = SORT_TYPES[type];\n\t    annotations.filter(function (a) {\n\t      return a.type === type;\n\t    }).sort(sortBy).forEach(function (a, i) {\n\t      return (0, _insertScreenReaderHint2.default)(a, i + 1);\n\t    });\n\t  });\n\t}\n\t\n\t// Sort annotations first by y, then by x.\n\t// This allows hints to be injected in the order they appear,\n\t// which makes numbering them easier.\n\tfunction sortByPoint(a, b) {\n\t  if (a.y < b.y) {\n\t    return a.x - b.x;\n\t  } else {\n\t    return 1;\n\t  }\n\t}\n\t\n\t// Sort annotation by it's first rectangle\n\tfunction sortByRectPoint(a, b) {\n\t  return sortByPoint(a.rectangles[0], b.rectangles[0]);\n\t}\n\t\n\t// Sort annotation by it's first line\n\tfunction sortByLinePoint(a, b) {\n\t  var lineA = a.lines[0];\n\t  var lineB = b.lines[0];\n\t  return sortByPoint({ x: lineA[0], y: lineA[1] }, { x: lineB[0], y: lineB[1] });\n\t}\n\t\n\t// Arrange supported types and associated sort methods\n\tvar SORT_TYPES = {\n\t  'highlight': sortByRectPoint,\n\t  'strikeout': sortByRectPoint,\n\t  'drawing': sortByLinePoint,\n\t  'textbox': sortByPoint,\n\t  'point': sortByPoint,\n\t  'area': sortByPoint\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertScreenReaderHint;\n\t\n\tvar _createScreenReaderOnly = __webpack_require__(25);\n\t\n\tvar _createScreenReaderOnly2 = _interopRequireDefault(_createScreenReaderOnly);\n\t\n\tvar _insertElementWithinChildren = __webpack_require__(26);\n\t\n\tvar _insertElementWithinChildren2 = _interopRequireDefault(_insertElementWithinChildren);\n\t\n\tvar _insertElementWithinElement = __webpack_require__(28);\n\t\n\tvar _insertElementWithinElement2 = _interopRequireDefault(_insertElementWithinElement);\n\t\n\tvar _renderScreenReaderComments = __webpack_require__(29);\n\t\n\tvar _renderScreenReaderComments2 = _interopRequireDefault(_renderScreenReaderComments);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// Annotation types that support comments\n\tvar COMMENT_TYPES = ['highlight', 'point', 'area', 'circle', 'emptycircle', 'fillcircle'];\n\t\n\t/**\r\n\t * Insert a hint into the DOM for screen readers for a specific annotation.\r\n\t *\r\n\t * @param {Object} annotation The annotation to insert a hint for\r\n\t * @param {Number} num The number of the annotation out of all annotations of the same type\r\n\t */\n\tfunction insertScreenReaderHint(annotation) {\n\t  var num = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t  switch (annotation.type) {\n\t    case 'highlight':\n\t    case 'strikeout':\n\t      var rects = annotation.rectangles;\n\t      var first = rects[0];\n\t      var last = rects[rects.length - 1];\n\t\n\t      (0, _insertElementWithinElement2.default)((0, _createScreenReaderOnly2.default)('Begin ' + annotation.type + ' annotation ' + num, annotation.uuid), first.x, first.y, annotation.page, true);\n\t\n\t      (0, _insertElementWithinElement2.default)((0, _createScreenReaderOnly2.default)('End ' + annotation.type + ' annotation ' + num, annotation.uuid + '-end'), last.x + last.width, last.y, annotation.page, false);\n\t      break;\n\t\n\t    case 'textbox':\n\t    case 'point':\n\t      var text = annotation.type === 'textbox' ? ' (content: ' + annotation.content + ')' : '';\n\t\n\t      (0, _insertElementWithinChildren2.default)((0, _createScreenReaderOnly2.default)(annotation.type + ' annotation ' + num + text, annotation.uuid), annotation.x, annotation.y, annotation.page);\n\t      break;\n\t\n\t    case 'drawing':\n\t    case 'area':\n\t      var x = typeof annotation.x !== 'undefined' ? annotation.x : annotation.lines[0][0];\n\t      var y = typeof annotation.y !== 'undefined' ? annotation.y : annotation.lines[0][1];\n\t\n\t      (0, _insertElementWithinChildren2.default)((0, _createScreenReaderOnly2.default)('Unlabeled drawing', annotation.uuid), x, y, annotation.page);\n\t      break;\n\t\n\t    case 'circle':\n\t    case 'fillcircle':\n\t    case 'emptycircle':\n\t      var x2 = typeof annotation.cx !== 'undefined' ? annotation.cx : annotation.lines[0][0];\n\t      var y2 = typeof annotation.cy !== 'undefined' ? annotation.cy : annotation.lines[0][1];\n\t\n\t      (0, _insertElementWithinChildren2.default)((0, _createScreenReaderOnly2.default)('Unlabeled drawing', annotation.uuid), x2, y2, annotation.page);\n\t      break;\n\t  }\n\t\n\t  // Include comments in screen reader hint\n\t  if (COMMENT_TYPES.includes(annotation.type)) {\n\t    (0, _renderScreenReaderComments2.default)(annotation.documentId, annotation.uuid);\n\t  }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = createScreenReaderOnly;\n\t/**\r\n\t * Create a node that is only visible to screen readers\r\n\t *\r\n\t * @param {String} content The text content that should be read by screen reader\r\n\t * @param {String} [annotationId] The ID of the annotation assocaited\r\n\t * @return {Element} An Element that is only visible to screen readers\r\n\t */\n\tfunction createScreenReaderOnly(content, annotationId) {\n\t  var node = document.createElement('div');\n\t  var text = document.createTextNode(content);\n\t  node.appendChild(text);\n\t  node.setAttribute('id', 'pdf-annotate-screenreader-' + annotationId);\n\t  node.style.position = 'absolute';\n\t  node.style.left = '-10000px';\n\t  node.style.top = 'auto';\n\t  node.style.width = '1px';\n\t  node.style.height = '1px';\n\t  node.style.overflow = 'hidden';\n\t  return node;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertElementWithinChildren;\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _insertElementWithinElement = __webpack_require__(28);\n\t\n\tvar _insertElementWithinElement2 = _interopRequireDefault(_insertElementWithinElement);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t/**\r\n\t * Insert an element at a point within the document.\r\n\t * This algorithm will try to insert between elements if possible.\r\n\t * It will however use `insertElementWithinElement` if it is more accurate.\r\n\t *\r\n\t * @param {Element} el The element to be inserted\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t * @param {Number} pageNumber The page number to limit elements to\r\n\t * @return {Boolean} True if element was able to be inserted, otherwise false\r\n\t */\n\tfunction insertElementWithinChildren(el, x, y, pageNumber) {\n\t  // Try and use most accurate method of inserting within an element\n\t  if ((0, _insertElementWithinElement2.default)(el, x, y, pageNumber, true)) {\n\t    return true;\n\t  }\n\t\n\t  // Fall back to inserting between elements\n\t  var svg = document.querySelector('svg[data-pdf-annotate-page=\"' + pageNumber + '\"]');\n\t  var rect = svg.getBoundingClientRect();\n\t  var nodes = [].concat(_toConsumableArray(svg.parentNode.querySelectorAll(_config2.default.textClassQuery() + ' > div')));\n\t\n\t  y = (0, _utils.scaleUp)(svg, { y: y }).y + rect.top;\n\t  x = (0, _utils.scaleUp)(svg, { x: x }).x + rect.left;\n\t\n\t  // Find the best node to insert before\n\t  for (var i = 0, l = nodes.length; i < l; i++) {\n\t    var n = nodes[i];\n\t    var r = n.getBoundingClientRect();\n\t    if (y <= r.top) {\n\t      n.parentNode.insertBefore(el, n);\n\t      return true;\n\t    }\n\t  }\n\t\n\t  // If all else fails try to append to the bottom\n\t  var textLayer = svg.parentNode.querySelector(_config2.default.textClassQuery());\n\t  if (textLayer) {\n\t    var textRect = textLayer.getBoundingClientRect();\n\t    if ((0, _utils.pointIntersectsRect)(x, y, textRect)) {\n\t      textLayer.appendChild(el);\n\t      return true;\n\t    }\n\t  }\n\t\n\t  return false;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = {\n\t    annotationLayerName: 'annotationLayer',\n\t    textLayerName: 'textLayer',\n\t    annotationSvgQuery: function annotationSvgQuery() {\n\t        return 'svg.' + this.annotationLayerName;\n\t    },\n\t    annotationClassQuery: function annotationClassQuery() {\n\t        return '.' + this.annotationLayerName;\n\t    },\n\t    textClassQuery: function textClassQuery() {\n\t        return '.' + this.textLayerName;\n\t    }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertElementWithinElement;\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t/**\r\n\t * Insert an element at a point within the document.\r\n\t * This algorithm will only insert within an element amidst it's text content.\r\n\t *\r\n\t * @param {Element} el The element to be inserted\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t * @param {Number} pageNumber The page number to limit elements to\r\n\t * @param {Boolean} insertBefore Whether the element is to be inserted before or after x\r\n\t * @return {Boolean} True if element was able to be inserted, otherwise false\r\n\t */\n\tfunction insertElementWithinElement(el, x, y, pageNumber, insertBefore) {\n\t  var OFFSET_ADJUST = 2;\n\t\n\t  // If inserting before adjust `x` by looking for element a few px to the right\n\t  // Otherwise adjust a few px to the left\n\t  // This is to allow a little tolerance by searching within the box, instead\n\t  // of getting a false negative by testing right on the border.\n\t  x = Math.max(x + OFFSET_ADJUST * (insertBefore ? 1 : -1), 0);\n\t\n\t  var node = textLayerElementFromPoint(x, y + OFFSET_ADJUST, pageNumber);\n\t  if (!node) {\n\t    return false;\n\t  }\n\t\n\t  // Now that node has been found inverse the adjustment for `x`.\n\t  // This is done to accomodate tolerance by cutting off on the outside of the\n\t  // text boundary, instead of missing a character by cutting off within.\n\t  x = x + OFFSET_ADJUST * (insertBefore ? -1 : 1);\n\t\n\t  var svg = document.querySelector('svg[data-pdf-annotate-page=\"' + pageNumber + '\"]');\n\t  var left = (0, _utils.scaleDown)(svg, { left: node.getBoundingClientRect().left }).left - svg.getBoundingClientRect().left;\n\t  var temp = node.cloneNode(true);\n\t  var head = temp.innerHTML.split('');\n\t  var tail = [];\n\t\n\t  // Insert temp off screen\n\t  temp.style.position = 'absolute';\n\t  temp.style.top = '-10000px';\n\t  temp.style.left = '-10000px';\n\t  document.body.appendChild(temp);\n\t\n\t  while (head.length) {\n\t    // Don't insert within HTML tags\n\t    if (head[head.length - 1] === '>') {\n\t      while (head.length) {\n\t        tail.unshift(head.pop());\n\t        if (tail[0] === '<') {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t\n\t    // Check if width of temp based on current head value satisfies x\n\t    temp.innerHTML = head.join('');\n\t    var width = (0, _utils.scaleDown)(svg, { width: temp.getBoundingClientRect().width }).width;\n\t    if (left + width <= x) {\n\t      break;\n\t    }\n\t    tail.unshift(head.pop());\n\t  }\n\t\n\t  // Update original node with new markup, including element to be inserted\n\t  node.innerHTML = head.join('') + el.outerHTML + tail.join('');\n\t  temp.parentNode.removeChild(temp);\n\t\n\t  return true;\n\t}\n\t\n\t/**\r\n\t * Get a text layer element at a given point on a page\r\n\t *\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t * @param {Number} pageNumber The page to limit elements to\r\n\t * @return {Element} First text layer element found at the point\r\n\t */\n\tfunction textLayerElementFromPoint(x, y, pageNumber) {\n\t  var svg = document.querySelector('svg[data-pdf-annotate-page=\"' + pageNumber + '\"]');\n\t  var rect = svg.getBoundingClientRect();\n\t  y = (0, _utils.scaleUp)(svg, { y: y }).y + rect.top;\n\t  x = (0, _utils.scaleUp)(svg, { x: x }).x + rect.left;\n\t  return [].concat(_toConsumableArray(svg.parentNode.querySelectorAll(_config2.default.textClassQuery() + ' [data-canvas-width]'))).filter(function (el) {\n\t    return (0, _utils.pointIntersectsRect)(x, y, el.getBoundingClientRect());\n\t  })[0];\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = renderScreenReaderComments;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _insertScreenReaderComment = __webpack_require__(30);\n\t\n\tvar _insertScreenReaderComment2 = _interopRequireDefault(_insertScreenReaderComment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Insert the comments into the DOM to be available by screen reader\r\n\t *\r\n\t * Example output:\r\n\t *   <div class=\"screenReaderOnly\">\r\n\t *    <div>Begin highlight 1</div>\r\n\t *    <ol aria-label=\"Comments\">\r\n\t *      <li>Foo</li>\r\n\t *      <li>Bar</li>\r\n\t *      <li>Baz</li>\r\n\t *      <li>Qux</li>\r\n\t *    </ol>\r\n\t *  </div>\r\n\t *  <div>Some highlighted text goes here...</div>\r\n\t *  <div class=\"screenReaderOnly\">End highlight 1</div>\r\n\t *\r\n\t * NOTE: `screenReaderOnly` is not a real class, just used for brevity\r\n\t *\r\n\t * @param {String} documentId The ID of the document\r\n\t * @param {String} annotationId The ID of the annotation\r\n\t * @param {Array} [comments] Optionally preloaded comments to be rendered\r\n\t * @return {Promise}\r\n\t */\n\tfunction renderScreenReaderComments(documentId, annotationId, comments) {\n\t  var promise = void 0;\n\t\n\t  if (Array.isArray(comments)) {\n\t    promise = Promise.resolve(comments);\n\t  } else {\n\t    promise = _PDFJSAnnotate2.default.getStoreAdapter().getComments(documentId, annotationId);\n\t  }\n\t\n\t  return promise.then(function (comments) {\n\t    // Node needs to be found by querying DOM as it may have been inserted as innerHTML\n\t    // leaving `screenReaderNode` as an invalid reference (see `insertElementWithinElement`).\n\t    var node = document.getElementById('pdf-annotate-screenreader-' + annotationId);\n\t    if (node) {\n\t      var list = document.createElement('ol');\n\t      list.setAttribute('id', 'pdf-annotate-screenreader-comment-list-' + annotationId);\n\t      list.setAttribute('aria-label', 'Comments');\n\t      node.appendChild(list);\n\t      comments.forEach(_insertScreenReaderComment2.default);\n\t    }\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = insertScreenReaderComment;\n\t/**\r\n\t * Insert a comment into the DOM to be available by screen reader\r\n\t *\r\n\t * @param {Object} comment The comment to be inserted\r\n\t */\n\tfunction insertScreenReaderComment(comment) {\n\t  if (!comment) {\n\t    return;\n\t  }\n\t\n\t  var list = document.querySelector('#pdf-annotate-screenreader-' + comment.annotation + ' ol');\n\t  if (list) {\n\t    var item = document.createElement('li');\n\t    item.setAttribute('id', 'pdf-annotate-screenreader-comment-' + comment.uuid);\n\t    item.appendChild(document.createTextNode('' + comment.content));\n\t    list.appendChild(item);\n\t  }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = initEventHandlers;\n\t\n\tvar _insertScreenReaderHint = __webpack_require__(24);\n\t\n\tvar _insertScreenReaderHint2 = _interopRequireDefault(_insertScreenReaderHint);\n\t\n\tvar _renderScreenReaderHints = __webpack_require__(23);\n\t\n\tvar _renderScreenReaderHints2 = _interopRequireDefault(_renderScreenReaderHints);\n\t\n\tvar _insertScreenReaderComment = __webpack_require__(30);\n\t\n\tvar _insertScreenReaderComment2 = _interopRequireDefault(_insertScreenReaderComment);\n\t\n\tvar _renderScreenReaderComments = __webpack_require__(29);\n\t\n\tvar _renderScreenReaderComments2 = _interopRequireDefault(_renderScreenReaderComments);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Initialize the event handlers for keeping screen reader hints synced with data\r\n\t */\n\tfunction initEventHandlers() {\n\t  (0, _event.addEventListener)('annotation:add', function (documentId, pageNumber, annotation) {\n\t    reorderAnnotationsByType(documentId, pageNumber, annotation.type);\n\t  });\n\t  (0, _event.addEventListener)('annotation:edit', function (documentId, annotationId, annotation) {\n\t    reorderAnnotationsByType(documentId, annotation.page, annotation.type);\n\t  });\n\t  (0, _event.addEventListener)('annotation:delete', removeAnnotation);\n\t  (0, _event.addEventListener)('comment:add', insertComment);\n\t  (0, _event.addEventListener)('comment:delete', removeComment);\n\t}\n\t\n\t/**\r\n\t * Reorder the annotation numbers by annotation type\r\n\t *\r\n\t * @param {String} documentId The ID of the document\r\n\t * @param {Number} pageNumber The page number of the annotations\r\n\t * @param {Strig} type The annotation type\r\n\t */\n\tfunction reorderAnnotationsByType(documentId, pageNumber, type) {\n\t  _PDFJSAnnotate2.default.getStoreAdapter().getAnnotations(documentId, pageNumber).then(function (annotations) {\n\t    return annotations.annotations.filter(function (a) {\n\t      return a.type === type;\n\t    });\n\t  }).then(function (annotations) {\n\t    annotations.forEach(function (a) {\n\t      removeAnnotation(documentId, a.uuid);\n\t    });\n\t\n\t    return annotations;\n\t  }).then(_renderScreenReaderHints2.default);\n\t}\n\t\n\t/**\r\n\t * Remove the screen reader hint for an annotation\r\n\t *\r\n\t * @param {String} documentId The ID of the document\r\n\t * @param {String} annotationId The Id of the annotation\r\n\t */\n\tfunction removeAnnotation(documentId, annotationId) {\n\t  removeElementById('pdf-annotate-screenreader-' + annotationId);\n\t  removeElementById('pdf-annotate-screenreader-' + annotationId + '-end');\n\t}\n\t\n\t/**\r\n\t * Insert a screen reader hint for a comment\r\n\t *\r\n\t * @param {String} documentId The ID of the document\r\n\t * @param {String} annotationId The ID of tha assocated annotation\r\n\t * @param {Object} comment The comment to insert a hint for\r\n\t */\n\tfunction insertComment(documentId, annotationId, comment) {\n\t  var list = document.querySelector('pdf-annotate-screenreader-comment-list-' + annotationId);\n\t  var promise = void 0;\n\t\n\t  if (!list) {\n\t    promise = (0, _renderScreenReaderComments2.default)(documentId, annotationId, []).then(function () {\n\t      list = document.querySelector('pdf-annotate-screenreader-comment-list-' + annotationId);\n\t      return true;\n\t    });\n\t  } else {\n\t    promise = Promise.resolve(true);\n\t  }\n\t\n\t  promise.then(function () {\n\t    (0, _insertScreenReaderComment2.default)(comment);\n\t  });\n\t}\n\t\n\t/**\r\n\t * Remove a screen reader hint for a comment\r\n\t *\r\n\t * @param {String} documentId The ID of the document\r\n\t * @param {String} commentId The ID of the comment\r\n\t */\n\tfunction removeComment(documentId, commentId) {\n\t  removeElementById('pdf-annotate-screenreader-comment-' + commentId);\n\t}\n\t\n\t/**\r\n\t * Remove an element from the DOM by it's ID if it exists\r\n\t *\r\n\t * @param {String} elementID The ID of the element to be removed\r\n\t */\n\tfunction removeElementById(elementId) {\n\t  var el = document.getElementById(elementId);\n\t  if (el) {\n\t    el.parentNode.removeChild(el);\n\t  }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _edit = __webpack_require__(33);\n\t\n\tvar _pen = __webpack_require__(34);\n\t\n\tvar _eraser = __webpack_require__(35);\n\t\n\tvar _arrow = __webpack_require__(36);\n\t\n\tvar _point = __webpack_require__(37);\n\t\n\tvar _rect = __webpack_require__(38);\n\t\n\tvar _circle = __webpack_require__(39);\n\t\n\tvar _text = __webpack_require__(40);\n\t\n\tvar _page = __webpack_require__(41);\n\t\n\texports.default = {\n\t  addEventListener: _event.addEventListener, removeEventListener: _event.removeEventListener, fireEvent: _event.fireEvent,\n\t  disableEdit: _edit.disableEdit, enableEdit: _edit.enableEdit,\n\t  disablePen: _pen.disablePen, enablePen: _pen.enablePen, setPen: _pen.setPen,\n\t  enableEraser: _eraser.enableEraser, disableEraser: _eraser.disableEraser,\n\t  disablePoint: _point.disablePoint, enablePoint: _point.enablePoint,\n\t  disableRect: _rect.disableRect, enableRect: _rect.enableRect,\n\t  disableCircle: _circle.disableCircle, enableCircle: _circle.enableCircle, setCircle: _circle.setCircle, addCircle: _circle.addCircle,\n\t  disableArrow: _arrow.disableArrow, enableArrow: _arrow.enableArrow, setArrow: _arrow.setArrow,\n\t  disableText: _text.disableText, enableText: _text.enableText, setText: _text.setText,\n\t  createPage: _page.createPage, renderPage: _page.renderPage\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.enableEdit = enableEdit;\n\texports.disableEdit = disableEdit;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _event = __webpack_require__(4);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar _enabled = false;\n\tvar isDragging = false,\n\t    overlay = void 0;\n\tvar dragOffsetX = void 0,\n\t    dragOffsetY = void 0,\n\t    dragStartX = void 0,\n\t    dragStartY = void 0;\n\tvar OVERLAY_BORDER_SIZE = 3;\n\t\n\t/**\r\n\t * Create an overlay for editing an annotation.\r\n\t *\r\n\t * @param {Element} target The annotation element to apply overlay for\r\n\t */\n\tfunction createEditOverlay(target) {\n\t  destroyEditOverlay();\n\t\n\t  overlay = document.createElement('div');\n\t  var anchor = document.createElement('a');\n\t  var parentNode = (0, _utils.findSVGContainer)(target).parentNode;\n\t  var id = target.getAttribute('data-pdf-annotate-id');\n\t  var rect = (0, _utils.getOffsetAnnotationRect)(target);\n\t  var styleLeft = rect.left - OVERLAY_BORDER_SIZE;\n\t  var styleTop = rect.top - OVERLAY_BORDER_SIZE;\n\t\n\t  overlay.setAttribute('id', 'pdf-annotate-edit-overlay');\n\t  overlay.setAttribute('data-target-id', id);\n\t  overlay.style.boxSizing = 'content-box';\n\t  overlay.style.position = 'absolute';\n\t  overlay.style.top = styleTop + 'px';\n\t  overlay.style.left = styleLeft + 'px';\n\t  overlay.style.width = rect.width + 'px';\n\t  overlay.style.height = rect.height + 'px';\n\t  overlay.style.border = OVERLAY_BORDER_SIZE + 'px solid ' + _utils.BORDER_COLOR;\n\t  overlay.style.borderRadius = OVERLAY_BORDER_SIZE + 'px';\n\t  overlay.style.zIndex = 20100;\n\t\n\t  anchor.innerHTML = '';\n\t  anchor.setAttribute('href', 'javascript://');\n\t  anchor.style.background = '#fff';\n\t  anchor.style.borderRadius = '20px';\n\t  anchor.style.border = '1px solid #bbb';\n\t  anchor.style.color = '#bbb';\n\t  anchor.style.fontSize = '16px';\n\t  anchor.style.padding = '2px';\n\t  anchor.style.textAlign = 'center';\n\t  anchor.style.textDecoration = 'none';\n\t  anchor.style.position = 'absolute';\n\t  anchor.style.top = '-13px';\n\t  anchor.style.right = '-13px';\n\t  anchor.style.width = '25px';\n\t  anchor.style.height = '25px';\n\t\n\t  overlay.appendChild(anchor);\n\t  parentNode.appendChild(overlay);\n\t  document.addEventListener('click', handleDocumentClick);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  anchor.addEventListener('click', deleteAnnotation);\n\t  anchor.addEventListener('mouseover', function () {\n\t    anchor.style.color = '#35A4DC';\n\t    anchor.style.borderColor = '#999';\n\t    anchor.style.boxShadow = '0 1px 1px #ccc';\n\t  });\n\t  anchor.addEventListener('mouseout', function () {\n\t    anchor.style.color = '#bbb';\n\t    anchor.style.borderColor = '#bbb';\n\t    anchor.style.boxShadow = '';\n\t  });\n\t  overlay.addEventListener('mouseover', function () {\n\t    if (!isDragging) {\n\t      anchor.style.display = '';\n\t    }\n\t  });\n\t  overlay.addEventListener('mouseout', function () {\n\t    anchor.style.display = 'none';\n\t  });\n\t}\n\t\n\t/**\r\n\t * Destroy the edit overlay if it exists.\r\n\t */\n\tfunction destroyEditOverlay() {\n\t  if (overlay) {\n\t    overlay.parentNode.removeChild(overlay);\n\t    overlay = null;\n\t  }\n\t\n\t  document.removeEventListener('click', handleDocumentClick);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\t\n\t/**\r\n\t * Delete currently selected annotation\r\n\t */\n\tfunction deleteAnnotation() {\n\t  if (!overlay) {\n\t    return;\n\t  }\n\t\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var nodes = document.querySelectorAll('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t  var svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg),\n\t      documentId = _getMetadata.documentId;\n\t\n\t  [].concat(_toConsumableArray(nodes)).forEach(function (n) {\n\t    n.parentNode.removeChild(n);\n\t  });\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().deleteAnnotation(documentId, annotationId);\n\t\n\t  destroyEditOverlay();\n\t}\n\t\n\t/**\r\n\t * Handle document.click event\r\n\t *\r\n\t * @param {Event} e The DOM event that needs to be handled\r\n\t */\n\tfunction handleDocumentClick(e) {\n\t  if (!(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  // Remove current overlay\n\t  var overlay = document.getElementById('pdf-annotate-edit-overlay');\n\t  if (overlay) {\n\t    if (isDragging || e.target === overlay) {\n\t      return;\n\t    }\n\t\n\t    destroyEditOverlay();\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.keyup event\r\n\t *\r\n\t * @param {Event} e The DOM event that needs to be handled\r\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  if (overlay && e.keyCode === 46 && e.target.nodeName.toLowerCase() !== 'textarea' && e.target.nodeName.toLowerCase() !== 'input') {\n\t    deleteAnnotation();\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.mousedown event\r\n\t *\r\n\t * @param {Event} e The DOM event that needs to be handled\r\n\t */\n\tfunction handleDocumentMousedown(e) {\n\t  if (e.target !== overlay) {\n\t    return;\n\t  }\n\t\n\t  // Highlight and strikeout annotations are bound to text within the document.\n\t  // It doesn't make sense to allow repositioning these types of annotations.\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var target = document.querySelector('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t  var type = target.getAttribute('data-pdf-annotate-type');\n\t\n\t  if (type === 'highlight' || type === 'strikeout') {\n\t    return;\n\t  }\n\t\n\t  isDragging = true;\n\t  dragOffsetX = e.clientX;\n\t  dragOffsetY = e.clientY;\n\t  dragStartX = overlay.offsetLeft;\n\t  dragStartY = overlay.offsetTop;\n\t\n\t  overlay.style.background = 'rgba(255, 255, 255, 0.7)';\n\t  overlay.style.cursor = 'move';\n\t  overlay.querySelector('a').style.display = 'none';\n\t\n\t  document.addEventListener('mousemove', handleDocumentMousemove);\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\r\n\t * Handle document.mousemove event\r\n\t *\r\n\t * @param {Event} e The DOM event that needs to be handled\r\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var parentNode = overlay.parentNode;\n\t  var rect = parentNode.getBoundingClientRect();\n\t  var y = dragStartY + (e.clientY - dragOffsetY);\n\t  var x = dragStartX + (e.clientX - dragOffsetX);\n\t  var minY = 0;\n\t  var maxY = rect.height;\n\t  var minX = 0;\n\t  var maxX = rect.width;\n\t\n\t  if (y > minY && y + overlay.offsetHeight < maxY) {\n\t    overlay.style.top = y + 'px';\n\t  }\n\t\n\t  if (x > minX && x + overlay.offsetWidth < maxX) {\n\t    overlay.style.left = x + 'px';\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.mouseup event\r\n\t *\r\n\t * @param {Event} e The DOM event that needs to be handled\r\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var annotationId = overlay.getAttribute('data-target-id');\n\t  var target = document.querySelectorAll('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t  var type = target[0].getAttribute('data-pdf-annotate-type');\n\t  var svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t\n\t  var _getMetadata2 = (0, _utils.getMetadata)(svg),\n\t      documentId = _getMetadata2.documentId;\n\t\n\t  overlay.querySelector('a').style.display = '';\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().getAnnotation(documentId, annotationId).then(function (annotation) {\n\t    var attribX = 'x';\n\t    var attribY = 'y';\n\t    if (['circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n\t      attribX = 'cx';\n\t      attribY = 'cy';\n\t    }\n\t    if (['area', 'highlight', 'point', 'textbox', 'circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n\t      var modelStart = (0, _utils.convertToSvgPoint)([dragStartX, dragStartY], svg);\n\t      var modelEnd = (0, _utils.convertToSvgPoint)([overlay.offsetLeft, overlay.offsetTop], svg);\n\t      var modelDelta = {\n\t        x: modelEnd[0] - modelStart[0],\n\t        y: modelEnd[1] - modelStart[1]\n\t      };\n\t\n\t      if (type === 'textbox') {\n\t        target = [target[0].firstChild];\n\t      }\n\t\n\t      [].concat(_toConsumableArray(target)).forEach(function (t, i) {\n\t        var modelX = parseInt(t.getAttribute(attribX), 10);\n\t        var modelY = parseInt(t.getAttribute(attribY), 10);\n\t        if (modelDelta.y !== 0) {\n\t          modelY = modelY + modelDelta.y;\n\t          var viewY = modelY;\n\t\n\t          if (type === 'point') {\n\t            viewY = (0, _utils.scaleUp)(svg, { viewY: viewY }).viewY;\n\t          }\n\t\n\t          t.setAttribute(attribY, viewY);\n\t          if (annotation.rectangles && i < annotation.rectangles.length) {\n\t            annotation.rectangles[i].y = modelY;\n\t          } else if (annotation[attribY]) {\n\t            annotation[attribY] = modelY;\n\t          }\n\t        }\n\t        if (modelDelta.x !== 0) {\n\t          modelX = modelX + modelDelta.x;\n\t          var viewX = modelX;\n\t\n\t          if (type === 'point') {\n\t            viewX = (0, _utils.scaleUp)(svg, { viewX: viewX }).viewX;\n\t          }\n\t\n\t          t.setAttribute(attribX, viewX);\n\t          if (annotation.rectangles && i < annotation.rectangles.length) {\n\t            annotation.rectangles[i].x = modelX;\n\t          } else if (annotation[attribX]) {\n\t            annotation[attribX] = modelX;\n\t          }\n\t        }\n\t      });\n\t      // } else if (type === 'strikeout') {\n\t      //   let { deltaX, deltaY } = getDelta('x1', 'y1');\n\t      //   [...target].forEach(target, (t, i) => {\n\t      //     if (deltaY !== 0) {\n\t      //       t.setAttribute('y1', parseInt(t.getAttribute('y1'), 10) + deltaY);\n\t      //       t.setAttribute('y2', parseInt(t.getAttribute('y2'), 10) + deltaY);\n\t      //       annotation.rectangles[i].y = parseInt(t.getAttribute('y1'), 10);\n\t      //     }\n\t      //     if (deltaX !== 0) {\n\t      //       t.setAttribute('x1', parseInt(t.getAttribute('x1'), 10) + deltaX);\n\t      //       t.setAttribute('x2', parseInt(t.getAttribute('x2'), 10) + deltaX);\n\t      //       annotation.rectangles[i].x = parseInt(t.getAttribute('x1'), 10);\n\t      //     }\n\t      //   });\n\t    } else if (type === 'drawing' || type === 'arrow') {\n\t      var _modelStart = (0, _utils.convertToSvgPoint)([dragStartX, dragStartY], svg);\n\t      var _modelEnd = (0, _utils.convertToSvgPoint)([overlay.offsetLeft, overlay.offsetTop], svg);\n\t      var _modelDelta = {\n\t        x: _modelEnd[0] - _modelStart[0],\n\t        y: _modelEnd[1] - _modelStart[1]\n\t      };\n\t\n\t      annotation.lines.forEach(function (line, i) {\n\t        var _annotation$lines$i = _slicedToArray(annotation.lines[i], 2),\n\t            x = _annotation$lines$i[0],\n\t            y = _annotation$lines$i[1];\n\t\n\t        annotation.lines[i][0] = x + _modelDelta.x;\n\t        annotation.lines[i][1] = y + _modelDelta.y;\n\t      });\n\t\n\t      target[0].parentNode.removeChild(target[0]);\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    }\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().editAnnotation(documentId, annotationId, annotation);\n\t  });\n\t\n\t  setTimeout(function () {\n\t    isDragging = false;\n\t  }, 0);\n\t\n\t  overlay.style.background = '';\n\t  overlay.style.cursor = '';\n\t\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\t\n\t/**\r\n\t * Handle annotation.click event\r\n\t *\r\n\t * @param {Element} e The annotation element that was clicked\r\n\t */\n\tfunction handleAnnotationClick(target) {\n\t  createEditOverlay(target);\n\t}\n\t\n\t/**\r\n\t * Enable edit mode behavior.\r\n\t */\n\tfunction enableEdit() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  (0, _event.addEventListener)('annotation:click', handleAnnotationClick);\n\t};\n\t\n\t/**\r\n\t * Disable edit mode behavior.\r\n\t */\n\tfunction disableEdit() {\n\t  destroyEditOverlay();\n\t\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  (0, _event.removeEventListener)('annotation:click', handleAnnotationClick);\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setPen = setPen;\n\texports.enablePen = enablePen;\n\texports.disablePen = disablePen;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar _candraw = false;\n\tvar _penSize = void 0;\n\tvar _penColor = void 0;\n\tvar path = void 0;\n\tvar lines = [];\n\t\n\tvar isFirefox = /firefox/i.test(navigator.userAgent);\n\t\n\t/**\r\n\t * Handle document.touchdown or document.pointerdown event\r\n\t */\n\tfunction handleDocumentPointerdown(e) {\n\t  e.preventDefault();\n\t  path = null;\n\t  lines = [];\n\t  _candraw = true;\n\t}\n\t\n\t/**\r\n\t * Handle document.touchup or document.pointerup event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tfunction handleDocumentKeyupChrome(e) {\n\t  saveToStorage(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n\t}\n\t\n\tfunction handleDocumentPointerup(e) {\n\t  saveToStorage(e.clientX, e.clientY);\n\t}\n\t\n\tfunction saveToStorage(x, y) {\n\t  _candraw = false;\n\t  var svg = void 0;\n\t  if (lines.length > 1 && (svg = (0, _utils.findSVGAtPoint)(x, y))) {\n\t    var _getMetadata = (0, _utils.getMetadata)(svg),\n\t        documentId = _getMetadata.documentId,\n\t        pageNumber = _getMetadata.pageNumber;\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n\t      type: 'drawing',\n\t      width: _penSize,\n\t      color: _penColor,\n\t      lines: lines\n\t    }).then(function (annotation) {\n\t      if (path) {\n\t        svg.removeChild(path);\n\t      }\n\t\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    });\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.mousemove event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tfunction handleDocumentPointermove(e) {\n\t  if (!e.srcElement.classList.contains('annotationLayer')) {\n\t    return;\n\t  }\n\t  if (_candraw) {\n\t    savePoint(e.clientX, e.clientY);\n\t  }\n\t}\n\t\n\tfunction handleDocumentPointermoveChrome(e) {\n\t  if (!e.srcElement.classList.contains('annotationLayer')) {\n\t    return;\n\t  }\n\t  if (_candraw) {\n\t    savePoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.keyup event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  // Cancel rect if Esc is pressed\n\t  if (e.keyCode === 27) {\n\t    lines = null;\n\t    path.parentNode.removeChild(path);\n\t    document.removeEventListener('pointermove', handleDocumentPointermove);\n\t    document.removeEventListener('pointerup', handleDocumentPointerup);\n\t  }\n\t}\n\t\n\t/**\r\n\t * Save a point to the line being drawn.\r\n\t *\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t */\n\tfunction savePoint(x, y) {\n\t  var svg = (0, _utils.findSVGAtPoint)(x, y);\n\t  if (!svg) {\n\t    return;\n\t  }\n\t\n\t  var rect = svg.getBoundingClientRect();\n\t  var point = (0, _utils.convertToSvgPoint)([x - rect.left, y - rect.top], svg);\n\t  point[0] = point[0].toFixed(2);\n\t  point[1] = point[1].toFixed(2);\n\t  lines.push(point);\n\t\n\t  if (lines.length <= 1) {\n\t    return;\n\t  }\n\t\n\t  if (path) {\n\t    svg.removeChild(path);\n\t  }\n\t\n\t  path = (0, _appendChild.appendChild)(svg, {\n\t    type: 'drawing',\n\t    color: _penColor,\n\t    width: _penSize,\n\t    lines: lines\n\t  });\n\t}\n\t\n\t/**\r\n\t * Set the attributes of the pen.\r\n\t *\r\n\t * @param {Number} penSize The size of the lines drawn by the pen\r\n\t * @param {String} penColor The color of the lines drawn by the pen\r\n\t */\n\tfunction setPen() {\n\t  var penSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\t  var penColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '000000';\n\t\n\t  _penSize = parseInt(penSize, 10);\n\t  _penColor = penColor;\n\t}\n\t\n\t/**\r\n\t * Enable the pen behavior\r\n\t */\n\tfunction enablePen() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  // Chrome and Firefox has different behaviors with how pen works, so we need different events.\n\t  if (!isFirefox) {\n\t    document.addEventListener('touchstart', handleDocumentPointerdown);\n\t    document.addEventListener('touchmove', handleDocumentPointermoveChrome);\n\t    document.addEventListener('touchend', handleDocumentKeyupChrome);\n\t    document.addEventListener('mousedown', handleDocumentPointerdown);\n\t    document.addEventListener('mousemove', handleDocumentPointermove);\n\t    document.addEventListener('mouseup', handleDocumentPointerup);\n\t  } else {\n\t    document.addEventListener('pointerdown', handleDocumentPointerdown);\n\t    document.addEventListener('pointermove', handleDocumentPointermove);\n\t    document.addEventListener('pointerup', handleDocumentPointerup);\n\t  }\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\r\n\t * Disable the pen behavior\r\n\t */\n\tfunction disablePen() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  if (!isFirefox) {\n\t    document.removeEventListener('touchstart', handleDocumentPointerdown);\n\t    document.removeEventListener('touchmove', handleDocumentPointermoveChrome);\n\t    document.removeEventListener('touchend', handleDocumentKeyupChrome);\n\t    document.removeEventListener('mousedown', handleDocumentPointerdown);\n\t    document.removeEventListener('mousemove', handleDocumentPointermove);\n\t    document.removeEventListener('mouseup', handleDocumentPointerup);\n\t  } else {\n\t    document.removeEventListener('pointerdown', handleDocumentPointerdown);\n\t    document.removeEventListener('pointermove', handleDocumentPointermove);\n\t    document.removeEventListener('pointerup', handleDocumentPointerup);\n\t  }\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.enableEraser = enableEraser;\n\texports.disableEraser = disableEraser;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar _canerase = false;\n\tvar userId = \"user\";\n\t\n\tfunction handleDocumentMouseDown(e) {\n\t  _canerase = true;\n\t}\n\t\n\tfunction handleDocumentMouseUp(e) {\n\t  _canerase = false;\n\t}\n\t\n\tfunction handleDocumentMouseMove(e) {\n\t  if (_canerase) {\n\t    var target = (0, _utils.findAnnotationAtPoint)(e.clientX, e.clientY);\n\t    if (target && target.getAttribute('data-pdf-annotate-userId') == userId) {\n\t      var _getMetadata = (0, _utils.getMetadata)(target.parentElement),\n\t          documentId = _getMetadata.documentId;\n\t\n\t      var annotationId = target.getAttribute('data-pdf-annotate-id');\n\t      var nodes = document.querySelectorAll('[data-pdf-annotate-id=\"' + annotationId + '\"]');\n\t      [].concat(_toConsumableArray(nodes)).forEach(function (n) {\n\t        n.parentNode.removeChild(n);\n\t      });\n\t\n\t      _PDFJSAnnotate2.default.getStoreAdapter().deleteAnnotation(documentId, annotationId);\n\t    }\n\t  }\n\t}\n\t\n\tfunction enableEraser() {\n\t  userId = _PDFJSAnnotate2.default.getStoreAdapter().userId;\n\t  document.addEventListener('mousemove', handleDocumentMouseMove);\n\t  document.addEventListener('mousedown', handleDocumentMouseDown);\n\t  document.addEventListener('mouseup', handleDocumentMouseUp);\n\t}\n\t\n\tfunction disableEraser() {\n\t  document.removeEventListener('mousemove', handleDocumentMouseMove);\n\t  document.removeEventListener('mousedown', handleDocumentMouseDown);\n\t  document.removeEventListener('mouseup', handleDocumentMouseUp);\n\t}\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setArrow = setArrow;\n\texports.enableArrow = enableArrow;\n\texports.disableArrow = disableArrow;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar _penSize = void 0;\n\tvar _penColor = void 0;\n\tvar path = void 0;\n\tvar lines = void 0;\n\tvar originY = void 0;\n\tvar originX = void 0;\n\t\n\t/**\r\n\t * Handle document.mousedown event\r\n\t */\n\tfunction handleDocumentMousedown(e) {\n\t  var target = (0, _utils.findAnnotationAtPoint)(e.clientX, e.clientY);\n\t  if (target === null) return;\n\t\n\t  var type = target.getAttribute('data-pdf-annotate-type');\n\t  if (type !== 'circle' && type !== 'fillcircle' && type !== 'emptycircle') {\n\t    return;\n\t  }\n\t\n\t  var svg = (0, _utils.findSVGContainer)(target);\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg),\n\t      documentId = _getMetadata.documentId;\n\t\n\t  var annotationId = target.getAttribute('data-pdf-annotate-id');\n\t\n\t  var event = e;\n\t  _PDFJSAnnotate2.default.getStoreAdapter().getAnnotation(documentId, annotationId).then(function (annotation) {\n\t    if (annotation) {\n\t      path = null;\n\t      lines = [];\n\t\n\t      var point = (0, _utils.convertToScreenPoint)([annotation.cx, annotation.cy], svg);\n\t\n\t      var rect = svg.getBoundingClientRect();\n\t\n\t      originX = point[0] + rect.left;\n\t      originY = point[1] + rect.top;\n\t\n\t      document.addEventListener('mousemove', handleDocumentMousemove);\n\t      document.addEventListener('mouseup', handleDocumentMouseup);\n\t    }\n\t  });\n\t}\n\t\n\t/**\r\n\t * Handle document.mouseup event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var svg = void 0;\n\t  if (lines.length > 1 && (svg = (0, _utils.findSVGAtPoint)(e.clientX, e.clientY))) {\n\t    var _getMetadata2 = (0, _utils.getMetadata)(svg),\n\t        documentId = _getMetadata2.documentId,\n\t        pageNumber = _getMetadata2.pageNumber;\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n\t      type: 'arrow',\n\t      width: _penSize,\n\t      color: _penColor,\n\t      lines: lines\n\t    }).then(function (annotation) {\n\t      if (path) {\n\t        svg.removeChild(path);\n\t      }\n\t\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    });\n\t  }\n\t\n\t  document.removeEventListener('mousemove', handleDocumentMousemove);\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\r\n\t * Handle document.mousemove event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  var x = lines.length === 0 ? originX : e.clientX;\n\t  var y = lines.length === 0 ? originY : e.clientY;\n\t\n\t  savePoint(x, y);\n\t}\n\t\n\t/**\r\n\t * Handle document.keyup event\r\n\t *\r\n\t * @param {Event} e The DOM event to be handled\r\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  // Cancel rect if Esc is pressed\n\t  if (e.keyCode === 27) {\n\t    lines = null;\n\t    path.parentNode.removeChild(path);\n\t    document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  }\n\t}\n\t\n\t/**\r\n\t * Save a point to the line being drawn.\r\n\t *\r\n\t * @param {Number} x The x coordinate of the point\r\n\t * @param {Number} y The y coordinate of the point\r\n\t */\n\tfunction savePoint(x, y) {\n\t  var svg = (0, _utils.findSVGAtPoint)(x, y);\n\t  if (!svg) {\n\t    return;\n\t  }\n\t\n\t  var rect = svg.getBoundingClientRect();\n\t  var point = (0, _utils.convertToSvgPoint)([x - rect.left, y - rect.top], svg);\n\t\n\t  if (lines.length < 2) {\n\t    lines.push(point);\n\t    return;\n\t  } else {\n\t    lines[1] = point; // update end point\n\t  }\n\t\n\t  if (path) {\n\t    svg.removeChild(path);\n\t  }\n\t\n\t  path = (0, _appendChild.appendChild)(svg, {\n\t    type: 'arrow',\n\t    color: _penColor,\n\t    width: _penSize,\n\t    lines: lines\n\t  });\n\t}\n\t\n\t/**\r\n\t * Set the attributes of the pen.\r\n\t *\r\n\t * @param {Number} penSize The size of the lines drawn by the pen\r\n\t * @param {String} penColor The color of the lines drawn by the pen\r\n\t */\n\tfunction setArrow() {\n\t  var penSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n\t  var penColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '0000FF';\n\t\n\t  _penSize = parseInt(penSize, 10);\n\t  _penColor = penColor;\n\t}\n\t\n\t/**\r\n\t * Enable the pen behavior\r\n\t */\n\tfunction enableArrow() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\r\n\t * Disable the pen behavior\r\n\t */\n\tfunction disableArrow() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t  (0, _utils.enableUserSelect)();\n\t}\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.enablePoint = enablePoint;\n\texports.disablePoint = disablePoint;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar input = void 0;\n\t\n\t/**\r\n\t * Handle document.mouseup event\r\n\t *\r\n\t * @param {Event} The DOM event to be handled\r\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  if (input || !(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t\n\t  input = document.createElement('input');\n\t  input.setAttribute('id', 'pdf-annotate-point-input');\n\t  input.setAttribute('placeholder', 'Enter comment');\n\t  input.style.border = '3px solid ' + _utils.BORDER_COLOR;\n\t  input.style.borderRadius = '3px';\n\t  input.style.position = 'absolute';\n\t  input.style.top = e.clientY + 'px';\n\t  input.style.left = e.clientX + 'px';\n\t\n\t  input.addEventListener('blur', handleInputBlur);\n\t  input.addEventListener('keyup', handleInputKeyup);\n\t\n\t  document.body.appendChild(input);\n\t  input.focus();\n\t}\n\t\n\t/**\r\n\t * Handle input.blur event\r\n\t */\n\tfunction handleInputBlur() {\n\t  savePoint();\n\t}\n\t\n\t/**\r\n\t * Handle input.keyup event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleInputKeyup(e) {\n\t  if (e.keyCode === 27) {\n\t    closeInput();\n\t  } else if (e.keyCode === 13) {\n\t    savePoint();\n\t  }\n\t}\n\t\n\t/**\r\n\t * Save a new point annotation from input\r\n\t */\n\tfunction savePoint() {\n\t  if (input.value.trim().length > 0) {\n\t    var clientX = parseInt(input.style.left, 10);\n\t    var clientY = parseInt(input.style.top, 10);\n\t    var content = input.value.trim();\n\t    var svg = (0, _utils.findSVGAtPoint)(clientX, clientY);\n\t    if (!svg) {\n\t      return;\n\t    }\n\t\n\t    var rect = svg.getBoundingClientRect();\n\t\n\t    var _getMetadata = (0, _utils.getMetadata)(svg),\n\t        documentId = _getMetadata.documentId,\n\t        pageNumber = _getMetadata.pageNumber;\n\t\n\t    var annotation = Object.assign({\n\t      type: 'point'\n\t    }, (0, _utils.scaleDown)(svg, {\n\t      x: clientX - rect.left,\n\t      y: clientY - rect.top\n\t    }));\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t      _PDFJSAnnotate2.default.getStoreAdapter().addComment(documentId, annotation.uuid, content);\n\t\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    });\n\t  }\n\t\n\t  closeInput();\n\t}\n\t\n\t/**\r\n\t * Close the input element\r\n\t */\n\tfunction closeInput() {\n\t  input.removeEventListener('blur', handleInputBlur);\n\t  input.removeEventListener('keyup', handleInputKeyup);\n\t  document.body.removeChild(input);\n\t  input = null;\n\t}\n\t\n\t/**\r\n\t * Enable point annotation behavior\r\n\t */\n\tfunction enablePoint() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\r\n\t * Disable point annotation behavior\r\n\t */\n\tfunction disablePoint() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.enableRect = enableRect;\n\texports.disableRect = disableRect;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar _enabled = false;\n\tvar _type = void 0;\n\tvar overlay = void 0;\n\tvar originY = void 0;\n\tvar originX = void 0;\n\t\n\t/**\r\n\t * Get the current window selection as rects\r\n\t *\r\n\t * @return {Array} An Array of rects\r\n\t */\n\tfunction getSelectionRects() {\n\t  try {\n\t    var selection = window.getSelection();\n\t    var range = selection.getRangeAt(0);\n\t    var rects = range.getClientRects();\n\t\n\t    if (rects.length > 0 && rects[0].width > 0 && rects[0].height > 0) {\n\t      return rects;\n\t    }\n\t  } catch (e) {}\n\t\n\t  return null;\n\t}\n\t\n\t/**\r\n\t * Handle document.mousedown event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleDocumentMousedown(e) {\n\t  var svg = void 0;\n\t  if (_type !== 'area' || !(svg = (0, _utils.findSVGAtPoint)(e.clientX, e.clientY))) {\n\t    return;\n\t  }\n\t\n\t  var rect = svg.getBoundingClientRect();\n\t  originY = e.clientY;\n\t  originX = e.clientX;\n\t\n\t  overlay = document.createElement('div');\n\t  overlay.style.position = 'absolute';\n\t  overlay.style.top = originY - rect.top + 'px';\n\t  overlay.style.left = originX - rect.left + 'px';\n\t  overlay.style.border = '3px solid ' + _utils.BORDER_COLOR;\n\t  overlay.style.borderRadius = '3px';\n\t  svg.parentNode.appendChild(overlay);\n\t\n\t  document.addEventListener('mousemove', handleDocumentMousemove);\n\t  (0, _utils.disableUserSelect)();\n\t}\n\t\n\t/**\r\n\t * Handle document.mousemove event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleDocumentMousemove(e) {\n\t  var svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t  var rect = svg.getBoundingClientRect();\n\t\n\t  if (originX + (e.clientX - originX) < rect.right) {\n\t    overlay.style.width = e.clientX - originX + 'px';\n\t  }\n\t\n\t  if (originY + (e.clientY - originY) < rect.bottom) {\n\t    overlay.style.height = e.clientY - originY + 'px';\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.mouseup event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var rects = void 0;\n\t  if (_type !== 'area' && (rects = getSelectionRects())) {\n\t    var svg = (0, _utils.findSVGAtPoint)(rects[0].left, rects[0].top);\n\t    saveRect(_type, [].concat(_toConsumableArray(rects)).map(function (r) {\n\t      return {\n\t        top: r.top,\n\t        left: r.left,\n\t        width: r.width,\n\t        height: r.height\n\t      };\n\t    }));\n\t  } else if (_type === 'area' && overlay) {\n\t    var _svg = overlay.parentNode.querySelector(_config2.default.annotationSvgQuery());\n\t    var rect = _svg.getBoundingClientRect();\n\t    saveRect(_type, [{\n\t      top: parseInt(overlay.style.top, 10) + rect.top,\n\t      left: parseInt(overlay.style.left, 10) + rect.left,\n\t      width: parseInt(overlay.style.width, 10),\n\t      height: parseInt(overlay.style.height, 10)\n\t    }]);\n\t\n\t    overlay.parentNode.removeChild(overlay);\n\t    overlay = null;\n\t\n\t    document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    (0, _utils.enableUserSelect)();\n\t  }\n\t}\n\t\n\t/**\r\n\t * Handle document.keyup event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleDocumentKeyup(e) {\n\t  // Cancel rect if Esc is pressed\n\t  if (e.keyCode === 27) {\n\t    var selection = window.getSelection();\n\t    selection.removeAllRanges();\n\t    if (overlay && overlay.parentNode) {\n\t      overlay.parentNode.removeChild(overlay);\n\t      overlay = null;\n\t      document.removeEventListener('mousemove', handleDocumentMousemove);\n\t    }\n\t  }\n\t}\n\t\n\t/**\r\n\t * Save a rect annotation\r\n\t *\r\n\t * @param {String} type The type of rect (area, highlight, strikeout)\r\n\t * @param {Array} rects The rects to use for annotation\r\n\t * @param {String} color The color of the rects\r\n\t */\n\tfunction saveRect(type, rects, color) {\n\t  var svg = (0, _utils.findSVGAtPoint)(rects[0].left, rects[0].top);\n\t  var annotation = void 0;\n\t\n\t  if (!svg) {\n\t    return;\n\t  }\n\t\n\t  var boundingRect = svg.getBoundingClientRect();\n\t\n\t  if (!color) {\n\t    if (type === 'highlight') {\n\t      color = 'FFFF00';\n\t    } else if (type === 'strikeout') {\n\t      color = 'FF0000';\n\t    }\n\t  }\n\t\n\t  // Initialize the annotation\n\t  annotation = {\n\t    type: type,\n\t    color: color,\n\t    rectangles: [].concat(_toConsumableArray(rects)).map(function (r) {\n\t      var offset = 0;\n\t\n\t      if (type === 'strikeout') {\n\t        offset = r.height / 2;\n\t      }\n\t\n\t      return (0, _utils.convertToSvgRect)({\n\t        y: r.top + offset - boundingRect.top,\n\t        x: r.left - boundingRect.left,\n\t        width: r.width,\n\t        height: r.height\n\t      }, svg);\n\t    }).filter(function (r) {\n\t      return r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1;\n\t    })\n\t  };\n\t\n\t  // Short circuit if no rectangles exist\n\t  if (annotation.rectangles.length === 0) {\n\t    return;\n\t  }\n\t\n\t  // Special treatment for area as it only supports a single rect\n\t  if (type === 'area') {\n\t    var rect = annotation.rectangles[0];\n\t    delete annotation.rectangles;\n\t    annotation.x = rect.x;\n\t    annotation.y = rect.y;\n\t    annotation.width = rect.width;\n\t    annotation.height = rect.height;\n\t  }\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg),\n\t      documentId = _getMetadata.documentId,\n\t      pageNumber = _getMetadata.pageNumber;\n\t\n\t  // Add the annotation\n\t\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t    (0, _appendChild.appendChild)(svg, annotation);\n\t  });\n\t}\n\t\n\t/**\r\n\t * Enable rect behavior\r\n\t */\n\tfunction enableRect(type) {\n\t  _type = type;\n\t\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t  document.addEventListener('mousedown', handleDocumentMousedown);\n\t  document.addEventListener('keyup', handleDocumentKeyup);\n\t}\n\t\n\t/**\r\n\t * Disable rect behavior\r\n\t */\n\tfunction disableRect() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t  document.removeEventListener('mousedown', handleDocumentMousedown);\n\t  document.removeEventListener('keyup', handleDocumentKeyup);\n\t}\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setCircle = setCircle;\n\texports.enableCircle = enableCircle;\n\texports.disableCircle = disableCircle;\n\texports.addCircle = addCircle;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar _type = void 0;\n\tvar _circleRadius = 10;\n\tvar _circleColor = '0000FF';\n\t\n\t/**\r\n\t * Set the attributes of the pen.\r\n\t *\r\n\t * @param {Number} circleRadius The radius of the circle\r\n\t * @param {String} circleColor The color of the circle\r\n\t */\n\tfunction setCircle() {\n\t  var circleRadius = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n\t  var circleColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '0000FF';\n\t\n\t  _circleRadius = parseInt(circleRadius, 10);\n\t  _circleColor = circleColor;\n\t}\n\t\n\t/**\r\n\t * Handle document.mouseup event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  var svg = (0, _utils.findSVGAtPoint)(e.clientX, e.clientY);\n\t  if (!svg) {\n\t    return;\n\t  }\n\t  var rect = svg.getBoundingClientRect();\n\t  saveCircle(svg, _type, {\n\t    x: e.clientX - rect.left,\n\t    y: e.clientY - rect.top\n\t  }, _circleRadius, _circleColor);\n\t}\n\t\n\t/**\r\n\t * Save a circle annotation\r\n\t *\r\n\t * @param {String} type The type of circle (circle, emptycircle, fillcircle)\r\n\t * @param {Object} pt The point to use for annotation\r\n\t * @param {String} color The color of the rects\r\n\t */\n\tfunction saveCircle(svg, type, pt, radius, color) {\n\t  // Initialize the annotation\n\t  var svg_pt = (0, _utils.convertToSvgPoint)([pt.x, pt.y], svg);\n\t  var annotation = {\n\t    type: type,\n\t    color: color,\n\t    cx: svg_pt[0],\n\t    cy: svg_pt[1],\n\t    r: radius\n\t  };\n\t\n\t  var _getMetadata = (0, _utils.getMetadata)(svg),\n\t      documentId = _getMetadata.documentId,\n\t      pageNumber = _getMetadata.pageNumber;\n\t\n\t  // Add the annotation\n\t\n\t\n\t  _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t    (0, _appendChild.appendChild)(svg, annotation);\n\t  });\n\t}\n\t\n\t/**\r\n\t * Enable circle behavior\r\n\t */\n\tfunction enableCircle(type) {\n\t  _type = type;\n\t\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\r\n\t * Disable circle behavior\r\n\t */\n\tfunction disableCircle() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\tfunction addCircle(type, e) {\n\t  var oldType = _type;\n\t  _type = type;\n\t  handleDocumentMouseup(e);\n\t  _type = oldType;\n\t}\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setText = setText;\n\texports.enableText = enableText;\n\texports.disableText = disableText;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _appendChild = __webpack_require__(8);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _enabled = false;\n\tvar input = void 0;\n\tvar _textSize = void 0;\n\tvar _textColor = void 0;\n\t\n\t/**\r\n\t * Handle document.mouseup event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleDocumentMouseup(e) {\n\t  if (input || !(0, _utils.findSVGAtPoint)(e.clientX, e.clientY)) {\n\t    return;\n\t  }\n\t  if (!e.srcElement.classList.contains('annotationLayer')) {\n\t    return;\n\t  }\n\t  input = document.createElement('input');\n\t  input.setAttribute('id', 'pdf-annotate-text-input');\n\t  input.setAttribute('placeholder', 'Enter text');\n\t  input.style.border = '3px solid ' + _utils.BORDER_COLOR;\n\t  input.style.borderRadius = '3px';\n\t  input.style.position = 'absolute';\n\t  input.style.top = e.clientY + 'px';\n\t  input.style.left = e.clientX + 'px';\n\t  input.style.fontSize = _textSize + 'px';\n\t  input.style.zIndex = \"41\";\n\t  input.addEventListener('blur', handleInputBlur);\n\t  input.addEventListener('keyup', handleInputKeyup);\n\t\n\t  document.body.appendChild(input);\n\t  input.focus();\n\t}\n\t\n\t/**\r\n\t * Handle input.blur event\r\n\t */\n\tfunction handleInputBlur() {\n\t  saveText();\n\t}\n\t\n\t/**\r\n\t * Handle input.keyup event\r\n\t *\r\n\t * @param {Event} e The DOM event to handle\r\n\t */\n\tfunction handleInputKeyup(e) {\n\t  if (e.keyCode === 27) {\n\t    closeInput();\n\t  } else if (e.keyCode === 13) {\n\t    saveText();\n\t  }\n\t}\n\t\n\t/**\r\n\t * Save a text annotation from input\r\n\t */\n\tfunction saveText() {\n\t  if (input.value.trim().length > 0) {\n\t    var clientX = parseInt(input.style.left, 10);\n\t    var clientY = parseInt(input.style.top, 10);\n\t    var svg = (0, _utils.findSVGAtPoint)(clientX, clientY);\n\t    if (!svg) {\n\t      return;\n\t    }\n\t    var height = _textSize;\n\t\n\t    var _getMetadata = (0, _utils.getMetadata)(svg),\n\t        documentId = _getMetadata.documentId,\n\t        pageNumber = _getMetadata.pageNumber,\n\t        viewport = _getMetadata.viewport;\n\t\n\t    var scale = 1 / viewport.scale;\n\t    var rect = svg.getBoundingClientRect();\n\t    var pt = (0, _utils.convertToSvgPoint)([clientX - rect.left, clientY - rect.top + height], svg, viewport);\n\t    var annotation = {\n\t      type: 'textbox',\n\t      size: _textSize * scale,\n\t      color: _textColor,\n\t      content: input.value.trim(),\n\t      x: pt[0],\n\t      y: pt[1],\n\t      rotation: -viewport.rotation\n\t    };\n\t\n\t    _PDFJSAnnotate2.default.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation).then(function (annotation) {\n\t      (0, _appendChild.appendChild)(svg, annotation);\n\t    });\n\t  }\n\t\n\t  closeInput();\n\t}\n\t\n\t/**\r\n\t * Close the input\r\n\t */\n\tfunction closeInput() {\n\t  if (input) {\n\t    input.removeEventListener('blur', handleInputBlur);\n\t    input.removeEventListener('keyup', handleInputKeyup);\n\t    document.body.removeChild(input);\n\t    input = null;\n\t  }\n\t}\n\t\n\t/**\r\n\t * Set the text attributes\r\n\t *\r\n\t * @param {Number} textSize The size of the text\r\n\t * @param {String} textColor The color of the text\r\n\t */\n\tfunction setText() {\n\t  var textSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 12;\n\t  var textColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '000000';\n\t\n\t  _textSize = parseInt(textSize, 10);\n\t  _textColor = textColor;\n\t}\n\t\n\t/**\r\n\t * Enable text behavior\r\n\t */\n\tfunction enableText() {\n\t  if (_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = true;\n\t  document.addEventListener('mouseup', handleDocumentMouseup);\n\t}\n\t\n\t/**\r\n\t * Disable text behavior\r\n\t */\n\tfunction disableText() {\n\t  if (!_enabled) {\n\t    return;\n\t  }\n\t\n\t  _enabled = false;\n\t  document.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.createPage = createPage;\n\texports.renderPage = renderPage;\n\t\n\tvar _PDFJSAnnotate = __webpack_require__(1);\n\t\n\tvar _PDFJSAnnotate2 = _interopRequireDefault(_PDFJSAnnotate);\n\t\n\tvar _config = __webpack_require__(27);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tvar _renderScreenReaderHints = __webpack_require__(23);\n\t\n\tvar _renderScreenReaderHints2 = _interopRequireDefault(_renderScreenReaderHints);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// Template for creating a new page\n\tvar PAGE_TEMPLATE = '\\n  <div style=\"visibility: hidden;\" class=\"page\" data-loaded=\"false\">\\n    <div class=\"canvasWrapper\">\\n      <canvas></canvas>\\n    </div>\\n    <div class=\"' + _config2.default.textLayerName + '\"></div>\\n    <svg class=\"' + _config2.default.annotationLayerName + '\"></svg>\\n  </div>\\n';\n\t\n\t/**\r\n\t * Create a new page to be appended to the DOM.\r\n\t *\r\n\t * @param {Number} pageNumber The page number that is being created\r\n\t * @return {HTMLElement}\r\n\t */\n\tfunction createPage(pageNumber) {\n\t  var temp = document.createElement('div');\n\t  temp.innerHTML = PAGE_TEMPLATE;\n\t\n\t  var page = temp.children[0];\n\t  var canvas = page.querySelector('canvas');\n\t\n\t  page.setAttribute('id', 'pageContainer' + pageNumber);\n\t  page.setAttribute('data-page-number', pageNumber);\n\t\n\t  canvas.mozOpaque = true;\n\t  canvas.setAttribute('id', 'page' + pageNumber);\n\t\n\t  return page;\n\t}\n\t\n\t/**\r\n\t * Render a page that has already been created.\r\n\t *\r\n\t * @param {Number} pageNumber The page number to be rendered\r\n\t * @param {Object} renderOptions The options for rendering\r\n\t * @return {Promise} Settled once rendering has completed\r\n\t *  A settled Promise will be either:\r\n\t *    - fulfilled: [pdfPage, annotations]\r\n\t *    - rejected: Error\r\n\t */\n\tfunction renderPage(pageNumber, renderOptions) {\n\t  var documentId = renderOptions.documentId,\n\t      pdfDocument = renderOptions.pdfDocument,\n\t      scale = renderOptions.scale,\n\t      rotate = renderOptions.rotate;\n\t\n\t  // Load the page and annotations\n\t\n\t  return Promise.all([pdfDocument.getPage(pageNumber), _PDFJSAnnotate2.default.getAnnotations(documentId, pageNumber)]).then(function (_ref) {\n\t    var _ref2 = _slicedToArray(_ref, 2),\n\t        pdfPage = _ref2[0],\n\t        annotations = _ref2[1];\n\t\n\t    var page = document.getElementById('pageContainer' + pageNumber);\n\t    var svg = page.querySelector(_config2.default.annotationClassQuery());\n\t    var canvas = page.querySelector('.canvasWrapper canvas');\n\t    var canvasContext = canvas.getContext('2d', { alpha: false });\n\t    var totalRotation = (rotate + pdfPage.rotate) % 360;\n\t    var viewport = pdfPage.getViewport(scale, totalRotation);\n\t    var transform = scalePage(pageNumber, viewport, canvasContext);\n\t\n\t    // Render the page\n\t    return Promise.all([pdfPage.render({ canvasContext: canvasContext, viewport: viewport, transform: transform }), _PDFJSAnnotate2.default.render(svg, viewport, annotations)]).then(function () {\n\t      // Text content is needed for a11y, but is also necessary for creating\n\t      // highlight and strikeout annotations which require selecting text.\n\t      return pdfPage.getTextContent({ normalizeWhitespace: true }).then(function (textContent) {\n\t        return new Promise(function (resolve, reject) {\n\t          // Render text layer for a11y of text content\n\t          var textLayer = page.querySelector(_config2.default.textClassQuery());\n\t          var textLayerFactory = new PDFJS.DefaultTextLayerFactory();\n\t          var textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber - 1, viewport);\n\t          textLayerBuilder.setTextContent(textContent);\n\t          textLayerBuilder.render();\n\t\n\t          // Enable a11y for annotations\n\t          // Timeout is needed to wait for `textLayerBuilder.render`\n\t          setTimeout(function () {\n\t            try {\n\t              (0, _renderScreenReaderHints2.default)(annotations.annotations);\n\t              resolve();\n\t            } catch (e) {\n\t              reject(e);\n\t            }\n\t          });\n\t        });\n\t      });\n\t    }).then(function () {\n\t      // Indicate that the page was loaded\n\t      page.setAttribute('data-loaded', 'true');\n\t\n\t      return [pdfPage, annotations];\n\t    });\n\t  });\n\t}\n\t\n\t/**\r\n\t * Scale the elements of a page.\r\n\t *\r\n\t * @param {Number} pageNumber The page number to be scaled\r\n\t * @param {Object} viewport The viewport of the PDF page (see pdfPage.getViewport(scale, rotate))\r\n\t * @param {Object} context The canvas context that the PDF page is rendered to\r\n\t * @return {Array} The transform data for rendering the PDF page\r\n\t */\n\tfunction scalePage(pageNumber, viewport, context) {\n\t  var page = document.getElementById('pageContainer' + pageNumber);\n\t  var canvas = page.querySelector('.canvasWrapper canvas');\n\t  var svg = page.querySelector(_config2.default.annotationClassQuery());\n\t  var wrapper = page.querySelector('.canvasWrapper');\n\t  var textLayer = page.querySelector(_config2.default.textClassQuery());\n\t  var outputScale = getOutputScale(context);\n\t  var transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\n\t  var sfx = approximateFraction(outputScale.sx);\n\t  var sfy = approximateFraction(outputScale.sy);\n\t\n\t  // Adjust width/height for scale\n\t  page.style.visibility = '';\n\t  canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n\t  canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n\t  canvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\n\t  canvas.style.height = roundToDivide(viewport.height, sfx[1]) + 'px';\n\t  svg.setAttribute('width', viewport.width);\n\t  svg.setAttribute('height', viewport.height);\n\t  svg.style.width = viewport.width + 'px';\n\t  svg.style.height = viewport.height + 'px';\n\t  page.style.width = viewport.width + 'px';\n\t  page.style.height = viewport.height + 'px';\n\t  wrapper.style.width = viewport.width + 'px';\n\t  wrapper.style.height = viewport.height + 'px';\n\t  textLayer.style.width = viewport.width + 'px';\n\t  textLayer.style.height = viewport.height + 'px';\n\t\n\t  return transform;\n\t}\n\t\n\t/**\r\n\t * Approximates a float number as a fraction using Farey sequence (max order of 8).\r\n\t *\r\n\t * @param {Number} x Positive float number\r\n\t * @return {Array} Estimated fraction: the first array item is a numerator,\r\n\t *                 the second one is a denominator.\r\n\t */\n\tfunction approximateFraction(x) {\n\t  // Fast path for int numbers or their inversions.\n\t  if (Math.floor(x) === x) {\n\t    return [x, 1];\n\t  }\n\t\n\t  var xinv = 1 / x;\n\t  var limit = 8;\n\t  if (xinv > limit) {\n\t    return [1, limit];\n\t  } else if (Math.floor(xinv) === xinv) {\n\t    return [1, xinv];\n\t  }\n\t\n\t  var x_ = x > 1 ? xinv : x;\n\t\n\t  // a/b and c/d are neighbours in Farey sequence.\n\t  var a = 0,\n\t      b = 1,\n\t      c = 1,\n\t      d = 1;\n\t\n\t  // Limit search to order 8.\n\t  while (true) {\n\t    // Generating next term in sequence (order of q).\n\t    var p = a + c,\n\t        q = b + d;\n\t    if (q > limit) {\n\t      break;\n\t    }\n\t    if (x_ <= p / q) {\n\t      c = p;d = q;\n\t    } else {\n\t      a = p;b = q;\n\t    }\n\t  }\n\t\n\t  // Select closest of neighbours to x.\n\t  if (x_ - a / b < c / d - x_) {\n\t    return x_ === x ? [a, b] : [b, a];\n\t  } else {\n\t    return x_ === x ? [c, d] : [d, c];\n\t  }\n\t}\n\t\n\tfunction getOutputScale(ctx) {\n\t  var devicePixelRatio = window.devicePixelRatio || 1;\n\t  var backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n\t  var pixelRatio = devicePixelRatio / backingStoreRatio;\n\t  return {\n\t    sx: pixelRatio,\n\t    sy: pixelRatio,\n\t    scaled: pixelRatio !== 1\n\t  };\n\t}\n\t\n\tfunction roundToDivide(x, div) {\n\t  var r = x % div;\n\t  return r === 0 ? x : Math.round(x - r + div);\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** dist/pdf-annotate.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f514bf1d80ed5ef5c12d\n **/","import PDFJSAnnotate from './src/PDFJSAnnotate';\r\n\r\nexport default PDFJSAnnotate;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","import StoreAdapter from './adapter/StoreAdapter';\r\nimport LocalStoreAdapter from './adapter/LocalStoreAdapter';\r\nimport render from './render';\r\nimport UI from './UI';\r\nimport config from './config';\r\nimport uuid from './utils/uuid';\r\nimport { \r\n  findAnnotationAtPoint, \r\n  findSVGContainer,\r\n  convertToScreenPoint\r\n} from './UI/utils';\r\n\r\nexport default {\r\n  findAnnotationAtPoint,\r\n  findSVGContainer,\r\n  convertToScreenPoint,\r\n\r\n  /**\r\n   * Abstract class that needs to be defined so PDFJSAnnotate\r\n   * knows how to communicate with your server.\r\n   */\r\n  StoreAdapter,\r\n\r\n  /**\r\n   * Implementation of StoreAdapter that stores annotation data to localStorage.\r\n   */\r\n  LocalStoreAdapter,\r\n\r\n  /**\r\n   * Abstract instance of StoreAdapter\r\n   */\r\n  __storeAdapter: new StoreAdapter(),\r\n\r\n  /**\r\n   * Getter for the underlying StoreAdapter property\r\n   *\r\n   * @return {StoreAdapter}\r\n   */\r\n  getStoreAdapter() {\r\n    return this.__storeAdapter;\r\n  },\r\n\r\n  /**\r\n   * Setter for the underlying StoreAdapter property\r\n   *\r\n   * @param {StoreAdapter} adapter The StoreAdapter implementation to be used.\r\n   */\r\n  setStoreAdapter(adapter) {\r\n    // TODO this throws an error when bundled\r\n    // if (!(adapter instanceof StoreAdapter)) {\r\n    //   throw new Error('adapter must be an instance of StoreAdapter');\r\n    // }\r\n\r\n    this.__storeAdapter = adapter;\r\n  },\r\n\r\n  /**\r\n   * UI is a helper for instrumenting UI interactions for creating,\r\n   * editing, and deleting annotations in the browser.\r\n   */\r\n  UI,\r\n\r\n  /**\r\n   * Render the annotations for a page in the PDF Document\r\n   *\r\n   * @param {SVGElement} svg The SVG element that annotations should be rendered to\r\n   * @param {PageViewport} viewport The PDFPage.getViewport data\r\n   * @param {Object} data The StoreAdapter.getAnnotations data\r\n   * @return {Promise}\r\n   */\r\n  render,\r\n\r\n  /**\r\n   * Convenience method for getting annotation data\r\n   *\r\n   * @alias StoreAdapter.getAnnotations\r\n   * @param {String} documentId The ID of the document\r\n   * @param {String} pageNumber The page number\r\n   * @return {Promise}\r\n   */\r\n  getAnnotations(documentId, pageNumber) {\r\n    return this.getStoreAdapter().getAnnotations(...arguments);\r\n  },\r\n\r\n  config,\r\n\r\n  uuid\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/PDFJSAnnotate.js\n **/","import abstractFunction from '../utils/abstractFunction';\r\nimport { fireEvent } from '../UI/event';\r\n\r\n// Adapter should never be invoked publicly\r\nexport default class StoreAdapter {\r\n  /**\r\n   * Create a new StoreAdapter instance\r\n   *\r\n   * @param {Object} [definition] The definition to use for overriding abstract methods\r\n   */\r\n  constructor(definition = {}) {\r\n    // Copy each function from definition if it is a function we know about\r\n    Object.keys(definition).forEach((key) => {\r\n      if (typeof definition[key] === 'function' &&\r\n          typeof this[key] === 'function') {\r\n        this[key] = definition[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all the annotations for a given document and page number.\r\n   *\r\n   * @param {String} documentId The ID for the document the annotations belong to\r\n   * @param {Number} pageNumber The number of the page the annotations belong to\r\n   * @return {Promise}\r\n   */\r\n  __getAnnotations(documentId, pageNumber) { abstractFunction('getAnnotations'); }\r\n  get getAnnotations() { return this.__getAnnotations; }\r\n  set getAnnotations(fn) {\r\n    this.__getAnnotations = function getAnnotations(documentId, pageNumber) {\r\n      return fn(...arguments).then((annotations) => {\r\n        // TODO may be best to have this happen on the server\r\n        if (annotations.annotations) {\r\n          annotations.annotations.forEach((a) => {\r\n            a.documentId = documentId;\r\n          });\r\n        }\r\n        return annotations;\r\n      });\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get the definition for a specific annotation.\r\n   *\r\n   * @param {String} documentId The ID for the document the annotation belongs to\r\n   * @param {String} annotationId The ID for the annotation\r\n   * @return {Promise}\r\n   */\r\n  getAnnotation(documentId, annotationId) { abstractFunction('getAnnotation'); }\r\n\r\n  /**\r\n   * Add an annotation\r\n   *\r\n   * @param {String} documentId The ID for the document to add the annotation to\r\n   * @param {String} pageNumber The page number to add the annotation to\r\n   * @param {Object} annotation The definition for the new annotation\r\n   * @return {Promise}\r\n   */\r\n  __addAnnotation(documentId, pageNumber, annotation) { abstractFunction('addAnnotation'); }\r\n  get addAnnotation() { return this.__addAnnotation; }\r\n  set addAnnotation(fn) {\r\n    this.__addAnnotation = function addAnnotation(documentId, pageNumber, annotation) {\r\n      return fn(...arguments).then((annotation) => {\r\n        fireEvent('annotation:add', documentId, pageNumber, annotation);\r\n        return annotation;\r\n      });\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Edit an annotation\r\n   *\r\n   * @param {String} documentId The ID for the document\r\n   * @param {String} pageNumber the page number of the annotation\r\n   * @param {Object} annotation The definition of the modified annotation\r\n   * @return {Promise}\r\n   */\r\n  __editAnnotation(documentId, pageNumber, annotation) { abstractFunction('editAnnotation'); }\r\n  get editAnnotation() { return this.__editAnnotation; }\r\n  set editAnnotation(fn) {\r\n    this.__editAnnotation = function editAnnotation(documentId, annotationId, annotation) {\r\n      return fn(...arguments).then((annotation) => {\r\n        fireEvent('annotation:edit', documentId, annotationId, annotation);\r\n        return annotation;\r\n      });\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Delete an annotation\r\n   *\r\n   * @param {String} documentId The ID for the document\r\n   * @param {String} annotationId The ID for the annotation\r\n   * @return {Promise}\r\n   */\r\n  __deleteAnnotation(documentId, annotationId) { abstractFunction('deleteAnnotation'); }\r\n  get deleteAnnotation() { return this.__deleteAnnotation; }\r\n  set deleteAnnotation(fn) {\r\n    this.__deleteAnnotation = function deleteAnnotation(documentId, annotationId) {\r\n      return fn(...arguments).then((success) => {\r\n        if (success) {\r\n          fireEvent('annotation:delete', documentId, annotationId);\r\n        }\r\n        return success;\r\n      });\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get all the comments for an annotation\r\n   *\r\n   * @param {String} documentId The ID for the document\r\n   * @param {String} annotationId The ID for the annotation\r\n   * @return {Promise}\r\n   */\r\n  getComments(documentId, annotationId) { abstractFunction('getComments'); }\r\n\r\n  /**\r\n   * Add a new comment\r\n   *\r\n   * @param {String} documentId The ID for the document\r\n   * @param {String} annotationId The ID for the annotation\r\n   * @param {Object} content The definition of the comment\r\n   * @return {Promise}\r\n   */\r\n  __addComment(documentId, annotationId, content) { abstractFunction('addComment'); }\r\n  get addComment() { return this.__addComment; }\r\n  set addComment(fn) {\r\n    this.__addComment = function addComment(documentId, annotationId, content) {\r\n      return fn(...arguments).then((comment) => {\r\n        fireEvent('comment:add', documentId, annotationId, comment);\r\n        return comment;\r\n      });\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Delete a comment\r\n   *\r\n   * @param {String} documentId The ID for the document\r\n   * @param {String} commentId The ID for the comment\r\n   * @return {Promise}\r\n   */\r\n  __deleteComment(documentId, commentId) { abstractFunction('deleteComment'); }\r\n  get deleteComment() { return this.__deleteComment; }\r\n  set deleteComment(fn) {\r\n    this.__deleteComment = function deleteComment(documentId, commentId) {\r\n      return fn(...arguments).then((success) => {\r\n        if (success) {\r\n          fireEvent('comment:delete', documentId, commentId);\r\n        }\r\n        return success;\r\n      });\r\n    };\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/adapter/StoreAdapter.js\n **/","/**\r\n * Throw an Error for an abstract function that hasn't been implemented.\r\n *\r\n * @param {String} name The name of the abstract function\r\n */\r\nexport default function abstractFunction(name) {\r\n  throw new Error(name + ' is not implemented');\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/abstractFunction.js\n **/","import EventEmitter from 'events';\r\nimport {\r\n  findAnnotationAtPoint,\r\n  findSVGAtPoint\r\n} from './utils';\r\n\r\nconst emitter = new EventEmitter;\r\n\r\nlet clickNode;\r\n\r\n/**\r\n * Handle document.click event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\ndocument.addEventListener('click', function handleDocumentClick(e) {\r\n  if (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\r\n\r\n  let target = findAnnotationAtPoint(e.clientX, e.clientY);\r\n\r\n  // Emit annotation:blur if clickNode is no longer clicked\r\n  if (clickNode && clickNode !== target) {\r\n    emitter.emit('annotation:blur', clickNode);\r\n  }\r\n\r\n  // Emit annotation:click if target was clicked\r\n  if (target) {\r\n    emitter.emit('annotation:click', target);\r\n  }\r\n\r\n  clickNode = target;\r\n});\r\n\r\n// let mouseOverNode;\r\n// document.addEventListener('mousemove', function handleDocumentMousemove(e) {\r\n//   let target = findAnnotationAtPoint(e.clientX, e.clientY);\r\n//\r\n//   // Emit annotation:mouseout if target was mouseout'd\r\n//   if (mouseOverNode && !target) {\r\n//     emitter.emit('annotation:mouseout', mouseOverNode);\r\n//   }\r\n//\r\n//   // Emit annotation:mouseover if target was mouseover'd\r\n//   if (target && mouseOverNode !== target) {\r\n//     emitter.emit('annotation:mouseover', target);\r\n//   }\r\n//\r\n//   mouseOverNode = target;\r\n// });\r\n\r\nexport function fireEvent() { emitter.emit(...arguments); };\r\nexport function addEventListener() { emitter.on(...arguments); };\r\nexport function removeEventListener() { emitter.removeListener(...arguments); };\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/event.js\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/events/events.js\n ** module id = 5\n ** module chunks = 0\n **/","import createStyleSheet from 'create-stylesheet';\r\nimport { getTranslation } from '../render/appendChild';\r\nimport { \r\n  applyTransform, \r\n  applyInverseTransform, \r\n  translate,\r\n  rotate,\r\n  scale \r\n} from '../utils/mathUtils';\r\n\r\n\r\nexport const BORDER_COLOR = '#00BFFF';\r\n\r\nconst userSelectStyleSheet = createStyleSheet({\r\n  body: {\r\n    '-webkit-user-select': 'none',\r\n       '-moz-user-select': 'none',\r\n        '-ms-user-select': 'none',\r\n            'user-select': 'none'\r\n  }\r\n});\r\nuserSelectStyleSheet.setAttribute('data-pdf-annotate-user-select', 'true');\r\n\r\n/**\r\n * Find the SVGElement that contains all the annotations for a page\r\n *\r\n * @param {Element} node An annotation within that container\r\n * @return {SVGElement} The container SVG or null if it can't be found\r\n */\r\nexport function findSVGContainer(node) {\r\n  let parentNode = node;\r\n\r\n  while ((parentNode = parentNode.parentNode) &&\r\n          parentNode !== document) {\r\n    if (parentNode.nodeName.toUpperCase() === 'SVG' &&\r\n        parentNode.getAttribute('data-pdf-annotate-container') === 'true') {\r\n      return parentNode;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Find an SVGElement container at a given point\r\n *\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n * @return {SVGElement} The container SVG or null if one can't be found\r\n */\r\nexport function findSVGAtPoint(x, y) {\r\n  let elements = document.querySelectorAll('svg[data-pdf-annotate-container=\"true\"]');\r\n\r\n  for (let i=0, l=elements.length; i<l; i++) {\r\n    let el = elements[i];\r\n    let rect = el.getBoundingClientRect();\r\n\r\n    if (pointIntersectsRect(x, y, rect)) {\r\n      return el;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Find an Element that represents an annotation at a given point.\r\n * \r\n * IMPORTANT: Requires the annotation layer to be the top most element so\r\n *            either use z-ordering or make it the leaf container.\r\n *\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n * @return {Element} The annotation element or null if one can't be found\r\n */\r\nexport function findAnnotationAtPoint(x, y) {\r\n  let el = null;\r\n  var candidate = document.elementFromPoint(x, y)\r\n  while (!el && candidate && candidate !== document) {  \r\n    let type = candidate.getAttribute('data-pdf-annotate-type');\r\n    if (type) {\r\n      el = candidate;\r\n    }\r\n    candidate = candidate.parentNode;\r\n  }\r\n  return el;\r\n}\r\n\r\n/**\r\n * Determine if a point intersects a rect\r\n *\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n * @param {Object} rect The points of a rect (likely from getBoundingClientRect)\r\n * @return {Boolean} True if a collision occurs, otherwise false\r\n */\r\nexport function pointIntersectsRect(x, y, rect) {\r\n  return y >= rect.top && y <= rect.bottom && x >= rect.left && x <= rect.right;\r\n}\r\n\r\n/**\r\n * Get the rect of an annotation element accounting for offset.\r\n *\r\n * @param {Element} el The element to get the rect of\r\n * @return {Object} The dimensions of the element\r\n */\r\nexport function getOffsetAnnotationRect(el) {\r\n  let rect = el.getBoundingClientRect();\r\n  let { offsetLeft, offsetTop } = getOffset(el);\r\n  return {\r\n    top: rect.top - offsetTop,\r\n    left: rect.left - offsetLeft,\r\n    right: rect.right - offsetLeft,\r\n    bottom: rect.bottom - offsetTop,\r\n    width: rect.width,\r\n    height: rect.height\r\n  };\r\n}\r\n\r\n/**\r\n * Adjust scale from normalized scale (100%) to rendered scale.\r\n *\r\n * @param {SVGElement} svg The SVG to gather metadata from\r\n * @param {Object} rect A map of numeric values to scale\r\n * @return {Object} A copy of `rect` with values scaled up\r\n */\r\nexport function scaleUp(svg, rect) {\r\n  let result = {};\r\n  let { viewport } = getMetadata(svg);\r\n\r\n  Object.keys(rect).forEach((key) => {\r\n    result[key] = rect[key] * viewport.scale;\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nexport function convertToSvgRect(rect, svg, viewport) {\r\n  var pt1 = [rect.x, rect.y];\r\n  var pt2 = [rect.x + rect.width, rect.y + rect.height];\r\n\r\n  pt1 = convertToSvgPoint(pt1, svg, viewport);\r\n  pt2 = convertToSvgPoint(pt2, svg, viewport);\r\n\r\n  return {\r\n    x: Math.min(pt1[0], pt2[0]),\r\n    y: Math.min(pt1[1], pt2[1]),\r\n    width: Math.abs(pt2[0] - pt1[0]),\r\n    height: Math.abs(pt2[1] - pt1[1])\r\n  };\r\n}\r\n\r\nexport function convertToSvgPoint(pt, svg, viewport) {\r\n  let result = {};\r\n  viewport = viewport || getMetadata(svg).viewport;\r\n\r\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\r\n  xform = scale(xform, viewport.scale, viewport.scale);\r\n  xform = rotate(xform, viewport.rotation);\r\n\r\n  let offset = getTranslation(viewport);\r\n  xform = translate(xform, offset.x, offset.y);\r\n\r\n  return applyInverseTransform(pt, xform);\r\n}\r\n\r\nexport function convertToScreenPoint(pt, svg, viewport) {\r\n  let result = {};\r\n  viewport = viewport || getMetadata(svg).viewport;\r\n\r\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\r\n  xform = scale(xform, viewport.scale, viewport.scale);\r\n  xform = rotate(xform, viewport.rotation);\r\n\r\n  let offset = getTranslation(viewport);\r\n  xform = translate(xform, offset.x, offset.y);\r\n\r\n  return applyTransform(pt, xform);\r\n}\r\n\r\n/**\r\n * Adjust scale from rendered scale to a normalized scale (100%).\r\n *\r\n * @param {SVGElement} svg The SVG to gather metadata from\r\n * @param {Object} rect A map of numeric values to scale\r\n * @return {Object} A copy of `rect` with values scaled down\r\n */\r\nexport function scaleDown(svg, rect) {\r\n  let result = {};\r\n  let { viewport } = getMetadata(svg);\r\n\r\n  Object.keys(rect).forEach((key) => {\r\n    result[key] = rect[key] / viewport.scale;\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Get the scroll position of an element, accounting for parent elements\r\n *\r\n * @param {Element} el The element to get the scroll position for\r\n * @return {Object} The scrollTop and scrollLeft position\r\n */\r\nexport function getScroll(el) {\r\n  let scrollTop = 0;\r\n  let scrollLeft = 0;\r\n  let parentNode = el;\r\n\r\n  while ((parentNode = parentNode.parentNode) &&\r\n          parentNode !== document) {\r\n    scrollTop += parentNode.scrollTop;\r\n    scrollLeft += parentNode.scrollLeft;\r\n  }\r\n\r\n  return { scrollTop, scrollLeft };\r\n}\r\n\r\n/**\r\n * Get the offset position of an element, accounting for parent elements\r\n *\r\n * @param {Element} el The element to get the offset position for\r\n * @return {Object} The offsetTop and offsetLeft position\r\n */\r\nexport function getOffset(el) {\r\n  let parentNode = el;\r\n\r\n  while ((parentNode = parentNode.parentNode) &&\r\n          parentNode !== document) {\r\n    if (parentNode.nodeName.toUpperCase() === 'SVG') {\r\n      break;\r\n    }\r\n  }\r\n\r\n  let rect = parentNode.getBoundingClientRect();\r\n\r\n  return { offsetLeft: rect.left, offsetTop: rect.top };\r\n}\r\n\r\n/**\r\n * Disable user ability to select text on page\r\n */\r\nexport function disableUserSelect() {\r\n  if (!userSelectStyleSheet.parentNode) {\r\n    document.head.appendChild(userSelectStyleSheet);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Enable user ability to select text on page\r\n */\r\nexport function enableUserSelect() {\r\n  if (userSelectStyleSheet.parentNode) {\r\n    userSelectStyleSheet.parentNode.removeChild(userSelectStyleSheet);\r\n  }\r\n}\r\n\r\n/**\r\n * Get the metadata for a SVG container\r\n *\r\n * @param {SVGElement} svg The SVG container to get metadata for\r\n */\r\nexport function getMetadata(svg) {\r\n  return {\r\n    documentId: svg.getAttribute('data-pdf-annotate-document'),\r\n    pageNumber: parseInt(svg.getAttribute('data-pdf-annotate-page'), 10),\r\n    viewport: JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'))\r\n  };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/utils.js\n **/","module.exports = function createStyleSheet(blocks) {\n  var style = document.createElement('style');\n  var text = Object.keys(blocks).map(function (selector) {\n    return processRuleSet(selector, blocks[selector]);\n  }).join('\\n');\n  \n  style.setAttribute('type', 'text/css');\n  style.appendChild(document.createTextNode(text));\n\n  return style;\n}\n\nfunction processRuleSet(selector, block) {\n  return selector + ' {\\n' + processDeclarationBlock(block) + '\\n}';\n}\n\nfunction processDeclarationBlock(block) {\n  return Object.keys(block).map(function (prop) {\n    return processDeclaration(prop, block[prop]);\n  }).join('\\n');\n}\n\nfunction processDeclaration(prop, value) {\n  if (!isNaN(value) && value != 0) {\n    value = value + 'px';\n  }\n\n  return hyphenate(prop) + ': ' + value + ';';\n}\n\nfunction hyphenate(prop) {\n  return prop.replace(/[A-Z]/g, function (match) {\n    return '-' + match.toLowerCase();\n  });\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/create-stylesheet/index.js\n ** module id = 7\n ** module chunks = 0\n **/","import objectAssign from 'object-assign';\r\nimport renderLine from './renderLine';\r\nimport renderPath from './renderPath';\r\nimport renderPoint from './renderPoint';\r\nimport renderRect from './renderRect';\r\nimport renderText from './renderText';\r\nimport renderCircle from './renderCircle';\r\nimport renderArrow from './renderArrow';\r\n\r\nconst isFirefox = /firefox/i.test(navigator.userAgent);\r\n\r\n/**\r\n * Get the x/y translation to be used for transforming the annotations\r\n * based on the rotation of the viewport.\r\n *\r\n * @param {Object} viewport The viewport data from the page\r\n * @return {Object}\r\n */\r\nexport function getTranslation(viewport) {\r\n  let x;\r\n  let y;\r\n\r\n  // Modulus 360 on the rotation so that we only\r\n  // have to worry about four possible values.\r\n  switch(viewport.rotation % 360) {\r\n    case 0:\r\n      x = y = 0;\r\n      break;\r\n    case 90:\r\n      x = 0;\r\n      y = (viewport.width / viewport.scale) * -1;\r\n      break;\r\n    case 180:\r\n      x = (viewport.width / viewport.scale) * -1;\r\n      y = (viewport.height / viewport.scale) * -1;\r\n      break;\r\n    case 270:\r\n      x = (viewport.height / viewport.scale) * -1;\r\n      y = 0;\r\n      break;\r\n  }\r\n\r\n  return { x, y };\r\n}\r\n\r\n/**\r\n * Transform the rotation and scale of a node using SVG's native transform attribute.\r\n *\r\n * @param {Node} node The node to be transformed\r\n * @param {Object} viewport The page's viewport data\r\n * @return {Node}\r\n */\r\nfunction transform(node, viewport) {\r\n  let trans = getTranslation(viewport);\r\n\r\n  // Let SVG natively transform the element\r\n  node.setAttribute('transform', `scale(${viewport.scale}) rotate(${viewport.rotation}) translate(${trans.x}, ${trans.y})`);\r\n  \r\n  // Manually adjust x/y for nested SVG nodes\r\n  if (!isFirefox && node.nodeName.toLowerCase() === 'svg') {\r\n    node.setAttribute('x', parseInt(node.getAttribute('x'), 10) * viewport.scale);\r\n    node.setAttribute('y', parseInt(node.getAttribute('y'), 10) * viewport.scale);\r\n\r\n    let x = parseInt(node.getAttribute('x', 10));\r\n    let y = parseInt(node.getAttribute('y', 10));\r\n    let width = parseInt(node.getAttribute('width'), 10);\r\n    let height = parseInt(node.getAttribute('height'), 10);\r\n    let path = node.querySelector('path');\r\n    let svg = path.parentNode;\r\n   \r\n    // Scale width/height\r\n    [node, svg, path, node.querySelector('rect')].forEach((n) => {\r\n      n.setAttribute('width', parseInt(n.getAttribute('width'), 10) * viewport.scale);\r\n      n.setAttribute('height', parseInt(n.getAttribute('height'), 10) * viewport.scale);\r\n    });\r\n\r\n    // Transform path but keep scale at 100% since it will be handled natively\r\n    transform(path, objectAssign({}, viewport, { scale: 1 }));\r\n    \r\n    switch(viewport.rotation % 360) {\r\n      case 90:\r\n        node.setAttribute('x', viewport.width - y - width);\r\n        node.setAttribute('y', x);\r\n        svg.setAttribute('x', 1);\r\n        svg.setAttribute('y', 0);\r\n        break;\r\n      case 180:\r\n        node.setAttribute('x', viewport.width - x - width);\r\n        node.setAttribute('y', viewport.height - y - height);\r\n        svg.setAttribute('y', 2);\r\n        break;\r\n      case 270:\r\n        node.setAttribute('x', y);\r\n        node.setAttribute('y', viewport.height - x - height);\r\n        svg.setAttribute('x', -1);\r\n        svg.setAttribute('y', 0);\r\n        break;\r\n    }\r\n  }\r\n\r\n  return node;\r\n}\r\n\r\n/**\r\n * Append an annotation as a child of an SVG.\r\n *\r\n * @param {SVGElement} svg The SVG element to append the annotation to\r\n * @param {Object} annotation The annotation definition to render and append\r\n * @param {Object} viewport The page's viewport data\r\n * @return {SVGElement} A node that was created and appended by this function\r\n */\r\nexport function appendChild(svg, annotation, viewport) {\r\n  if (!viewport) {\r\n    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\r\n  }\r\n  \r\n  let child;\r\n  switch (annotation.type) {\r\n    case 'area':\r\n    case 'highlight':\r\n      child = renderRect(annotation);\r\n      break;\r\n    case 'circle':\r\n    case 'fillcircle':\r\n    case 'emptycircle':\r\n      child = renderCircle(annotation);\r\n      break;\r\n    case 'strikeout':\r\n      child = renderLine(annotation);\r\n      break;\r\n    case 'point':\r\n      child = renderPoint(annotation);\r\n      break;\r\n    case 'textbox':\r\n      child = renderText(annotation);\r\n      break;\r\n    case 'drawing':\r\n      child = renderPath(annotation);\r\n      break;\r\n    case 'arrow':\r\n      child = renderArrow(annotation);\r\n      break;\r\n  }\r\n\r\n  // If no type was provided for an annotation it will result in node being null.\r\n  // Skip appending/transforming if node doesn't exist.\r\n  if (child) {\r\n    // Set attributes\r\n    child.setAttribute('data-pdf-annotate-id', annotation.uuid);\r\n    child.setAttribute('data-pdf-annotate-type', annotation.type);\r\n    child.setAttribute('data-pdf-annotate-userId', annotation.userId);\r\n    child.setAttribute('aria-hidden', true);\r\n\r\n    svg.appendChild(transform(child, viewport));\r\n  }\r\n\r\n  return child;\r\n}\r\n\r\n/**\r\n * Transform a child annotation of an SVG.\r\n *\r\n * @param {SVGElement} svg The SVG element with the child annotation\r\n * @param {Object} child The SVG child to transform\r\n * @param {Object} viewport The page's viewport data\r\n * @return {SVGElement} A node that was transformed by this function\r\n */\r\nexport function transformChild(svg, child, viewport) {\r\n  if (!viewport) {\r\n    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\r\n  }\r\n\r\n  // If no type was provided for an annotation it will result in node being null.\r\n  // Skip transforming if node doesn't exist.\r\n  if (child) {\r\n    child = transform(child, viewport);\r\n  }\r\n\r\n  return child;\r\n}\r\n\r\nexport default {\r\n  /**\r\n   * Get the x/y translation to be used for transforming the annotations\r\n   * based on the rotation of the viewport.\r\n   */\r\n  getTranslation,\r\n  \r\n  /**\r\n   * Append an SVG child for an annotation\r\n   */\r\n  appendChild,\r\n\r\n  /**\r\n   * Transform an existing SVG child\r\n   */  \r\n  transformChild\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/appendChild.js\n **/","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/object-assign/index.js\n ** module id = 9\n ** module chunks = 0\n **/","import setAttributes from '../utils/setAttributes';\r\nimport normalizeColor from '../utils/normalizeColor';\r\n\r\n/**\r\n * Create SVGLineElements from an annotation definition.\r\n * This is used for anntations of type `strikeout`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGGElement} A group of all lines to be rendered\r\n */\r\nexport default function renderLine(a) {\r\n  let group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n  setAttributes(group, {\r\n    stroke: normalizeColor(a.color || '#f00'),\r\n    strokeWidth: 1\r\n  });\r\n\r\n  a.rectangles.forEach((r) => {\r\n    let line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n\r\n    setAttributes(line, {\r\n      x1: r.x,\r\n      y1: r.y,\r\n      x2: r.x + r.width,\r\n      y2: r.y,\r\n    });\r\n\r\n    group.appendChild(line);\r\n  });\r\n\r\n  return group;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderLine.js\n **/","const UPPER_REGEX = /[A-Z]/g;\r\n\r\n// Don't convert these attributes from camelCase to hyphenated-attributes\r\nconst BLACKLIST = [\r\n  'viewBox'\r\n];\r\n\r\nlet keyCase = (key) => {\r\n  if (BLACKLIST.indexOf(key) === -1) {\r\n    key = key.replace(UPPER_REGEX, match => '-' + match.toLowerCase());\r\n  }\r\n  return key;\r\n}\r\n\r\n/**\r\n * Set attributes for a node from a map\r\n *\r\n * @param {Node} node The node to set attributes on\r\n * @param {Object} attributes The map of key/value pairs to use for attributes\r\n */\r\nexport default function setAttributes(node, attributes) {\r\n  Object.keys(attributes).forEach((key) => {\r\n    node.setAttribute(keyCase(key), attributes[key]);\r\n  });\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/setAttributes.js\n **/","const REGEX_HASHLESS_HEX = /^([a-f0-9]{6}|[a-f0-9]{3})$/i;\r\n\r\n/**\r\n * Normalize a color value\r\n *\r\n * @param {String} color The color to normalize\r\n * @return {String}\r\n */\r\nexport default function normalizeColor(color) {\r\n  if (REGEX_HASHLESS_HEX.test(color)) {\r\n    color = `#${color}`;\r\n  }\r\n  return color;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/normalizeColor.js\n **/","import setAttributes from '../utils/setAttributes';\r\nimport normalizeColor from '../utils/normalizeColor';\r\n\r\n/**\r\n * Create SVGPathElement from an annotation definition.\r\n * This is used for anntations of type `drawing`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGPathElement} The path to be rendered\r\n */\r\nexport default function renderPath(a) {\r\n  let d = [];\r\n  let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n  \r\n  \r\n  for (let i=0, l=a.lines.length; i<l; i++) {\r\n    var p1 = a.lines[i];\r\n    var p2 = a.lines[i+1];\r\n    if (p2) {\r\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\r\n    }\r\n  }\r\n\r\n/*\r\n  \r\n   if(a.lines.length>2) {\r\n    var p1 = a.lines[0];\r\n    var p2 = a.lines[a.lines.length-1];\r\n\r\n    var p3 = []; //arrow \r\n    var p4 = [];\r\n    var p0 = []; //arrow intersection\r\n\r\n\r\n \r\n    if (p2) {\r\n      var k = -(p2[0]-p1[0])/(p2[1]-p1[1]);\r\n\r\n      var deltaX = 3;\r\n      p0[0] = p1[0]+0.8*(p2[0]-p1[0]);\r\n      p0[1] = p1[1]+0.8*(p2[1]-p1[1]);\r\n\r\n      p3[0] = p0[0] + deltaX;\r\n      p3[1] = p0[1] + k*deltaX;\r\n\r\n      p4[0] = p0[0] - deltaX;\r\n      p4[1] = p0[1] - k*deltaX;\r\n\r\n      if(Math.abs(p2[1]-p1[1]) < 20) {\r\n\r\n        p3[0] = p0[0] ;\r\n        p3[1] = p0[1] + deltaX*1;\r\n\r\n        p4[0] = p0[0] ;\r\n        p4[1] = p0[1] - deltaX*1;\r\n\r\n      }\r\n\r\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\r\n       //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\r\n      d.push(`M${p2[0]} ${p2[1]} ${p3[0]} ${p3[1]}`);\r\n      d.push(`M${p3[0]} ${p3[1]} ${p4[0]} ${p4[1]}`);\r\n      d.push(`M${p4[0]} ${p4[1]} ${p2[0]} ${p2[1]}`);\r\n     }\r\n    }*/\r\n  \r\n  setAttributes(path, {\r\n    d: `${d.join(' ')}Z`,\r\n    stroke: normalizeColor(a.color || '#000'),\r\n    strokeWidth: a.width || 1,\r\n    fill: 'none'\r\n  });\r\n\r\n  return path;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderPath.js\n **/","import setAttributes from '../utils/setAttributes';\r\n\r\nconst SIZE = 25;\r\nconst D = 'M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z';\r\n\r\n/**\r\n * Create SVGElement from an annotation definition.\r\n * This is used for anntations of type `comment`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGElement} A svg to be rendered\r\n */\r\nexport default function renderPoint(a) {\r\n  let outerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n  let innerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n  let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n  let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n\r\n  setAttributes(outerSVG,  {\r\n    width: SIZE,\r\n    height: SIZE,\r\n    x: a.x,\r\n    y: a.y\r\n  });\r\n\r\n  setAttributes(innerSVG, {\r\n    width: SIZE,\r\n    height: SIZE,\r\n    x: 0,\r\n    y: (SIZE * 0.05) * -1,\r\n    viewBox: '0 0 1000 1000'\r\n  });\r\n\r\n  setAttributes(rect, {\r\n    width: SIZE,\r\n    height: SIZE,\r\n    stroke: '#000',\r\n    fill: '#ff0'\r\n  });\r\n\r\n  setAttributes(path, {\r\n    d: D,\r\n    strokeWidth: 50,\r\n    stroke: '#000',\r\n    fill: '#fff'\r\n  });\r\n\r\n  innerSVG.appendChild(path);\r\n  outerSVG.appendChild(rect);\r\n  outerSVG.appendChild(innerSVG);\r\n\r\n  return outerSVG;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderPoint.js\n **/","import setAttributes from '../utils/setAttributes';\r\nimport normalizeColor from '../utils/normalizeColor';\r\n\r\n/**\r\n * Create SVGRectElements from an annotation definition.\r\n * This is used for anntations of type `area` and `highlight`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGGElement|SVGRectElement} A group of all rects to be rendered\r\n */\r\nexport default function renderRect(a) {\r\n  if (a.type === 'highlight') {\r\n    let group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n    setAttributes(group, {\r\n      fill: normalizeColor(a.color || '#ff0'),\r\n      fillOpacity: 0.2\r\n    });\r\n    \r\n    a.rectangles.forEach((r) => {\r\n      group.appendChild(createRect(r));\r\n    });\r\n\r\n    return group;\r\n  } else {\r\n    let rect = createRect(a);\r\n    setAttributes(rect, {\r\n      stroke: normalizeColor(a.color || '#f00'),\r\n      fill: 'none'\r\n    });\r\n\r\n    return rect;\r\n  }\r\n}\r\n\r\nfunction createRect(r) {\r\n  let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n\r\n  setAttributes(rect, {\r\n    x: r.x,\r\n    y: r.y,\r\n    width: r.width,\r\n    height: r.height\r\n  });\r\n\r\n  return rect;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderRect.js\n **/","import setAttributes from '../utils/setAttributes';\r\nimport normalizeColor from '../utils/normalizeColor';\r\n\r\n/**\r\n * Create SVGTextElement from an annotation definition.\r\n * This is used for anntations of type `textbox`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGTextElement} A text to be rendered\r\n */\r\nexport default function renderText(a) {\r\n\r\n  // Text should be rendered at 0 degrees relative to\r\n  // document rotation\r\n  let text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n  let x = a.x;\r\n  let y = a.y;\r\n\r\n  setAttributes(text, {\r\n    x: x,\r\n    y: y,\r\n    fill: normalizeColor(a.color || '#000'),\r\n    fontSize: a.size,\r\n    transform: `rotate(${a.rotation}, ${x}, ${y})`\r\n  });\r\n  text.innerHTML = a.content;\r\n\r\n  var g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n  g.appendChild(text);\r\n\r\n  return g;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderText.js\n **/","import setAttributes from '../utils/setAttributes';\r\nimport normalizeColor from '../utils/normalizeColor';\r\n\r\n/**\r\n * Create an SVGCircleElement from an annotation definition.\r\n * This is used for annotations of type `circle`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGGElement|SVGCircleElement} A circle to be rendered\r\n */\r\nexport default function renderCircle(a) {\r\n  let circle = createCircle(a);\r\n  let color = normalizeColor(a.color || '#f00')\r\n\r\n  if (a.type === 'circle')\r\n    setAttributes(circle, {\r\n      stroke: color,\r\n      fill: 'none',\r\n      'stroke-width': 5\r\n    });\r\n  if (a.type === 'emptycircle')\r\n    setAttributes(circle, {\r\n      stroke: color,\r\n      fill: 'none',\r\n      'stroke-width': 2\r\n    });\r\n\r\n  if (a.type === 'fillcircle')\r\n    setAttributes(circle, {\r\n      stroke: color,\r\n      fill: color,\r\n      'stroke-width': 5\r\n    });\r\n\r\n  return circle;\r\n}\r\n\r\nfunction createCircle(a) {\r\n  let circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n  setAttributes(circle, {\r\n    cx: a.cx,\r\n    cy: a.cy,\r\n    r: a.r\r\n  });\r\n\r\n  return circle;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderCircle.js\n **/","import setAttributes from '../utils/setAttributes';\r\nimport normalizeColor from '../utils/normalizeColor';\r\nimport { \r\n  makePoint, makeVector, makeVectorFromPoints,\r\n  magnitude, unitVector, crossProduct,\r\n  addVector, multiplyVector, negateVector\r\n} from '../utils/mathUtils';\r\n\r\n/**\r\n * Create SVGPathElement from an annotation definition.\r\n * This is used for anntations of type `drawing`.\r\n *\r\n * @param {Object} a The annotation definition\r\n * @return {SVGPathElement} The path to be rendered\r\n */\r\nexport default function renderArrow(a) {\r\n  let d = [];\r\n  let arrow = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\r\n\r\n  if (a.lines.length == 2) {\r\n    let p1 = a.lines[0];\r\n    let p2 = a.lines[a.lines.length - 1];\r\n\r\n    let arrowLength = 40;\r\n    let pt0 = makePoint(p1[0], p1[1], 0);\r\n    let pt1 = makePoint(p2[0], p2[1], 0);\r\n    let x = makeVectorFromPoints(pt0, pt1);\r\n    let unitX = unitVector(x);\r\n    pt1 = addVector(pt0, multiplyVector(unitX, arrowLength));\r\n    x = makeVectorFromPoints(pt0, pt1);\r\n    let unitZ = makeVector(0, 0, 1);\r\n    let unitY = unitVector(crossProduct(unitX, unitZ));\r\n    let thickness = a.width || 10;\r\n\r\n    let A = addVector(pt0, multiplyVector(unitY, thickness * 0.5)); \r\n    let B = addVector(A, multiplyVector(unitX, magnitude(x) - thickness * 2.0)); \r\n    let C = addVector(B, multiplyVector(unitY, thickness)); \r\n    let D = pt1;\r\n    let G = addVector(pt0, multiplyVector(negateVector(unitY), thickness * 0.5)); \r\n    let F = addVector(G, multiplyVector(unitX, magnitude(x) - thickness * 2.0)); \r\n    let E = addVector(F, multiplyVector(negateVector(unitY), thickness)); \r\n\r\n    let points = '' + \r\n      A.x + ',' + A.y + ' ' +\r\n      B.x + ',' + B.y + ' ' +\r\n      C.x + ',' + C.y + ' ' +\r\n      D.x + ',' + D.y + ' ' +\r\n      E.x + ',' + E.y + ' ' +\r\n      F.x + ',' + F.y + ' ' +\r\n      G.x + ',' + G.y\r\n\r\n    setAttributes(arrow, {\r\n      points: points,\r\n      stroke: normalizeColor(a.color || '#000'),\r\n      fill: normalizeColor(a.color || '#000')\r\n    });\r\n  }\r\n\r\n  return arrow;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/renderArrow.js\n **/","// Transform point by matrix\r\n//\r\nexport function applyTransform(p, m) {\r\n  var xt = p[0] * m[0] + p[1] * m[2] + m[4];\r\n  var yt = p[0] * m[1] + p[1] * m[3] + m[5];\r\n  return [xt, yt];\r\n};\r\n\r\n// Transform point by matrix inverse\r\n//\r\nexport function applyInverseTransform(p, m) {\r\n  var d = m[0] * m[3] - m[1] * m[2];\r\n  var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\r\n  var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\r\n  return [xt, yt];\r\n};\r\n\r\n\r\n// Concatenates two transformation matrices together and returns the result.\r\nexport function transform(m1, m2) {\r\n  return [\r\n    m1[0] * m2[0] + m1[2] * m2[1],\r\n    m1[1] * m2[0] + m1[3] * m2[1],\r\n    m1[0] * m2[2] + m1[2] * m2[3],\r\n    m1[1] * m2[2] + m1[3] * m2[3],\r\n    m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\r\n    m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\r\n  ];\r\n};\r\n\r\nexport function translate(m, x, y) {\r\n  return [\r\n    m[0],\r\n    m[1],\r\n    m[2],\r\n    m[3],\r\n    m[0] * x + m[2] * y + m[4],\r\n    m[1] * x + m[3] * y + m[5]\r\n  ];\r\n};\r\n\r\n\r\nexport function rotate(m, angle) {\r\n  angle = angle * Math.PI / 180;\r\n\r\n  var cosValue = Math.cos(angle);\r\n  var sinValue = Math.sin(angle);\r\n\r\n  return [\r\n    m[0] * cosValue + m[2] * sinValue,\r\n    m[1] * cosValue + m[3] * sinValue,\r\n    m[0] * (-sinValue) + m[2] * cosValue,\r\n    m[1] * (-sinValue) + m[3] * cosValue,\r\n    m[4],\r\n    m[5]\r\n  ];\r\n};\r\n\r\nexport function scale(m, x, y) {\r\n  return [\r\n    m[0] * x,\r\n    m[1] * x,\r\n    m[2] * y,\r\n    m[3] * y,\r\n    m[4],\r\n    m[5]\r\n  ];\r\n};\r\n  \r\nfunction getInverseTransform(m) {\r\n  var d = m[0] * m[3] - m[1] * m[2];\r\n  return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\r\n    (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\r\n};\r\n\r\n\r\nexport function makePoint(x, y, z) {\r\n  return { x: x, y: y, z: z }\r\n}\r\n\r\nexport function makeVector(xcoord, ycoord, zcoord) {\r\n  return { xcoord: xcoord, ycoord: ycoord, zcoord: zcoord }\r\n}\r\n\r\nexport function makeVectorFromPoints(pt1, pt2)\r\n{\r\n  let xcoord = pt2.x - pt1.x;\r\n  let ycoord = pt2.y - pt1.y;\r\n  let zcoord = pt2.z - pt1.z;\r\n  return makeVector(xcoord, ycoord, zcoord);\r\n}\r\n\r\nexport function addVector(pt, v) {\r\n  return makePoint(pt.x + v.xcoord, pt.y + v.ycoord, pt.z + v.zcoord);\r\n}\r\n\r\nexport function multiplyVector(v, scalar) {\r\n  return makeVector(v.xcoord * scalar, v.ycoord * scalar, v.zcoord * scalar);\r\n}\r\n\r\nexport function magnitude(v)\r\n{\r\n  return Math.sqrt(\r\n    Math.pow(v.xcoord, 2) + Math.pow(v.ycoord, 2) + Math.pow(v.zcoord, 2)\r\n  );\r\n}\r\n\r\nexport function negateVector(v) {\r\n  return multiplyVector(v, -1);\r\n}\r\n\r\nexport function unitVector(v) {\r\n  let mag = magnitude(v);\r\n  let xcoord = v.xcoord / mag;\r\n  let ycoord = v.ycoord / mag;\r\n  let zcoord = v.zcoord / mag;\r\n  return makeVector(xcoord, ycoord, zcoord);\r\n} \r\n\r\nexport function crossProduct(u, v) {\r\n  //\r\n  // u X v = < u2*v3 - u3*v2,\r\n  //           u3*v1 - u1*v3,\r\n  //           u1*v2 - u2*v1 >\r\n  let xcoord = u.ycoord * v.zcoord - u.zcoord * v.ycoord;\r\n  let ycoord = u.zcoord * v.xcoord - u.xcoord * v.zcoord;\r\n  let zcoord = u.xcoord * v.ycoord - u.ycoord * v.xcoord;\r\n  return makeVector(xcoord, ycoord, zcoord);\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/mathUtils.js\n **/","import uuid from '../utils/uuid';\r\nimport StoreAdapter from './StoreAdapter';\r\n\r\n// StoreAdapter for working with localStorage\r\n// This is ideal for testing, examples, and prototyping\r\nexport default class LocalStoreAdapter extends StoreAdapter {\r\n  constructor(userId = \"user\") {\r\n    super({\r\n      getAnnotations(documentId, pageNumber) {\r\n        return new Promise((resolve, reject) => {\r\n          let annotations = getAllAnnotations().filter((i) => {\r\n            return i.page === pageNumber && i.class === 'Annotation';\r\n          });\r\n\r\n          resolve({\r\n            documentId,\r\n            pageNumber,\r\n            annotations\r\n          });\r\n        });\r\n      },\r\n\r\n      getAnnotation(documentId, annotationId) {\r\n        return Promise.resolve(getAnnotations(documentId, userId)[findAnnotation(documentId, userId, annotationId)]);\r\n      },\r\n\r\n      addAnnotation(documentId, pageNumber, annotation) {\r\n        return new Promise((resolve, reject) => {\r\n          annotation.class = 'Annotation';\r\n          annotation.uuid = uuid();\r\n          annotation.page = pageNumber;\r\n          annotation.userId = userId;\r\n\r\n          let annotations = getAnnotations(documentId, userId);\r\n          annotations.push(annotation);\r\n          updateAnnotations(documentId, userId, annotations);\r\n\r\n          resolve(annotation);\r\n        });\r\n      },\r\n\r\n      editAnnotation(documentId, annotationId, annotation) {\r\n        return new Promise((resolve, reject) => {\r\n          let annotations = getAnnotations(documentId, userId);\r\n          annotations[findAnnotation(documentId, userId, annotationId)] = annotation;\r\n          updateAnnotations(documentId, userId, annotations);\r\n\r\n          resolve(annotation);\r\n        });\r\n      },\r\n\r\n      deleteAnnotation(documentId, annotationId) {\r\n        return new Promise((resolve, reject) => {\r\n          let index = findAnnotation(documentId, userId, annotationId);\r\n          if (index > -1) {\r\n            let annotations = getAnnotations(documentId, userId);\r\n            annotations.splice(index, 1);\r\n            updateAnnotations(documentId, userId, annotations);\r\n          }\r\n\r\n          resolve(true);\r\n        });\r\n      },\r\n\r\n      getComments(documentId, annotationId) {\r\n        return new Promise((resolve, reject) => {\r\n          resolve(getAnnotations(documentId, userId).filter((i) => {\r\n            return i.class === 'Comment' && i.annotation === annotationId;\r\n          }));\r\n        });\r\n      },\r\n\r\n      addComment(documentId, annotationId, content) {\r\n        return new Promise((resolve, reject) => {\r\n          let comment = {\r\n            class: 'Comment',\r\n            uuid: uuid(),\r\n            annotation: annotationId,\r\n            content: content\r\n          };\r\n\r\n          let annotations = getAnnotations(documentId, userId);\r\n          annotations.push(comment);\r\n          updateAnnotations(documentId, userId, annotations);\r\n\r\n          resolve(comment);\r\n        });\r\n      },\r\n\r\n      deleteComment(documentId, commentId) {\r\n        return new Promise((resolve, reject) => {\r\n          getAnnotations(documentId, userId);\r\n          let index = -1;\r\n          let annotations = getAnnotations(documentId, userId);\r\n          for (let i=0, l=annotations.length; i<l; i++) {\r\n            if (annotations[i].uuid === commentId) {\r\n              index = i;\r\n              break;\r\n            }\r\n          }\r\n\r\n          if (index > -1) {\r\n            annotations.splice(index, 1);\r\n            updateAnnotations(documentId, userId, annotations);\r\n          }\r\n\r\n          resolve(true);\r\n        });\r\n      }\r\n    });\r\n    this._userId = userId;\r\n  }\r\n  get userId(){\r\n    return this._userId;\r\n  }\r\n}\r\n\r\nfunction getAllAnnotations(){\r\n  let all_annotations = [];\r\n  for(let i = 0 ; i < localStorage.length; i++){\r\n    if(localStorage.key(i).includes('annotations')){\r\n      all_annotations.push(...JSON.parse(localStorage.getItem(localStorage.key(i))));\r\n    }\r\n  }\r\n  return all_annotations;\r\n}\r\n\r\nfunction getAnnotations(documentId, userId) {\r\n  return JSON.parse(localStorage.getItem(`${documentId}/${userId}/annotations`)) || [];\r\n}\r\n\r\nfunction updateAnnotations(documentId, userId, annotations) {\r\n  localStorage.setItem(`${documentId}/${userId}/annotations`, JSON.stringify(annotations));\r\n}\r\n/**\r\n * \r\n * @param {String} documentId Document id of the annotation\r\n * @param {String} userId User id of the annotation\r\n * @param {String} annotationId The id of the annotation\r\n * \r\n * This function finds all the annotation made by one user.\r\n * \r\n * @return {int} The index of the annotation in localstorage\r\n */\r\nfunction findAnnotation(documentId, userId, annotationId) {\r\n  let index = -1;\r\n  let annotations = getAnnotations(documentId, userId);\r\n  for (let i=0, l=annotations.length; i<l; i++) {\r\n    if (annotations[i].uuid === annotationId) {\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n  return index;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/adapter/LocalStoreAdapter.js\n **/","const REGEXP = /[xy]/g\r\nconst PATTERN = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\r\n\r\nfunction replacement(c) {\r\n  let r = Math.random()*16|0;\r\n  let v = c == 'x' ? r : (r&0x3|0x8);\r\n  return v.toString(16);\r\n}\r\n\r\n/**\r\n * Generate a univierally unique identifier\r\n *\r\n * @return {String}\r\n */\r\nexport default function uuid() {\r\n  return PATTERN.replace(REGEXP, replacement);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/uuid.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport { appendChild, transformChild } from './appendChild';\r\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\r\n\r\n/**\r\n * Render the response from PDFJSAnnotate.getStoreAdapter().getAnnotations to SVG\r\n *\r\n * @param {SVGElement} svg The SVG element to render the annotations to\r\n * @param {Object} viewport The page viewport data\r\n * @param {Object} data The response from PDFJSAnnotate.getStoreAdapter().getAnnotations\r\n * @return {Promise} Settled once rendering has completed\r\n *  A settled Promise will be either:\r\n *    - fulfilled: SVGElement\r\n *    - rejected: Error\r\n */\r\nexport default function render(svg, viewport, data) {\r\n  return new Promise((resolve, reject) => {\r\n    // Reset the content of the SVG\r\n    svg.setAttribute('data-pdf-annotate-container', true);\r\n    svg.setAttribute('data-pdf-annotate-viewport', JSON.stringify(viewport));\r\n    svg.removeAttribute('data-pdf-annotate-document');\r\n    svg.removeAttribute('data-pdf-annotate-page');\r\n\r\n    // If there's no data nothing can be done\r\n    if (!data) {\r\n      svg.innerHTML = ''; \r\n      return resolve(svg);\r\n    }\r\n\r\n    svg.setAttribute('data-pdf-annotate-document', data.documentId);\r\n    svg.setAttribute('data-pdf-annotate-page', data.pageNumber);\r\n  \r\n    // Make sure annotations is an array\r\n    if (!Array.isArray(data.annotations) || data.annotations.length === 0) {\r\n      return resolve(svg);\r\n    }\r\n\r\n    // Append or transform annotation to svg\r\n    data.annotations.forEach((a) => {\r\n      var node = svg.querySelector('[data-pdf-annotate-id=\"' + a.uuid + '\"]');\r\n      if (node) {\r\n        transformChild(svg, node, viewport);\r\n      } else {\r\n        appendChild(svg, a, viewport);\r\n      }\r\n    });\r\n\r\n    resolve(svg);\r\n  });\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/render/index.js\n **/","import insertScreenReaderHint from './insertScreenReaderHint';\r\nimport initEventHandlers from './initEventHandlers';\r\n\r\n// TODO This is not the right place for this to live\r\ninitEventHandlers();\r\n\r\n/**\r\n * Insert hints into the DOM for screen readers.\r\n *\r\n * @param {Array} annotations The annotations that hints are inserted for\r\n */\r\nexport default function renderScreenReaderHints(annotations) {\r\n  annotations = Array.isArray(annotations) ? annotations : [];\r\n\r\n  // Insert hints for each type\r\n  Object.keys(SORT_TYPES).forEach((type) => {\r\n    let sortBy = SORT_TYPES[type];\r\n    annotations\r\n      .filter((a) => a.type === type)\r\n      .sort(sortBy)\r\n      .forEach((a, i) => insertScreenReaderHint(a, i + 1));\r\n  });\r\n}\r\n\r\n// Sort annotations first by y, then by x.\r\n// This allows hints to be injected in the order they appear,\r\n// which makes numbering them easier.\r\nfunction sortByPoint(a, b) {\r\n  if (a.y < b.y) {\r\n    return a.x - b.x;\r\n  } else {\r\n    return 1;\r\n  }\r\n}\r\n\r\n// Sort annotation by it's first rectangle\r\nfunction sortByRectPoint(a, b) {\r\n  return sortByPoint(a.rectangles[0], b.rectangles[0]);\r\n}\r\n\r\n// Sort annotation by it's first line\r\nfunction sortByLinePoint(a, b) {\r\n  let lineA = a.lines[0];\r\n  let lineB = b.lines[0];\r\n  return sortByPoint(\r\n    {x: lineA[0], y: lineA[1]},\r\n    {x: lineB[0], y: lineB[1]}\r\n  );\r\n}\r\n\r\n// Arrange supported types and associated sort methods\r\nconst SORT_TYPES = {\r\n  'highlight': sortByRectPoint,\r\n  'strikeout': sortByRectPoint,\r\n  'drawing': sortByLinePoint,\r\n  'textbox': sortByPoint,\r\n  'point': sortByPoint,\r\n  'area': sortByPoint\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/renderScreenReaderHints.js\n **/","import createScreenReaderOnly from './createScreenReaderOnly';\r\nimport insertElementWithinChildren from './insertElementWithinChildren';\r\nimport insertElementWithinElement from './insertElementWithinElement';\r\nimport renderScreenReaderComments from './renderScreenReaderComments';\r\n\r\n// Annotation types that support comments\r\nconst COMMENT_TYPES = ['highlight', 'point', 'area','circle','emptycircle','fillcircle'];\r\n\r\n/**\r\n * Insert a hint into the DOM for screen readers for a specific annotation.\r\n *\r\n * @param {Object} annotation The annotation to insert a hint for\r\n * @param {Number} num The number of the annotation out of all annotations of the same type\r\n */\r\nexport default function insertScreenReaderHint(annotation, num = 0) {\r\n  switch (annotation.type) {\r\n    case 'highlight':\r\n    case 'strikeout':\r\n      let rects = annotation.rectangles;\r\n      let first = rects[0];\r\n      let last = rects[rects.length - 1];\r\n\r\n      insertElementWithinElement(\r\n        createScreenReaderOnly(`Begin ${annotation.type} annotation ${num}`, annotation.uuid),\r\n        first.x, first.y, annotation.page, true\r\n      );\r\n\r\n      insertElementWithinElement(\r\n        createScreenReaderOnly(`End ${annotation.type} annotation ${num}`, `${annotation.uuid}-end`),\r\n        last.x + last.width, last.y, annotation.page, false\r\n      );\r\n      break;\r\n\r\n    case 'textbox':\r\n    case 'point':\r\n      let text = annotation.type === 'textbox' ? ` (content: ${annotation.content})` : '';\r\n\r\n      insertElementWithinChildren(\r\n        createScreenReaderOnly(`${annotation.type} annotation ${num}${text}`, annotation.uuid),\r\n        annotation.x, annotation.y, annotation.page\r\n      );\r\n      break;\r\n\r\n    case 'drawing':\r\n    case 'area':\r\n      let x = typeof annotation.x !== 'undefined' ? annotation.x : annotation.lines[0][0];\r\n      let y = typeof annotation.y !== 'undefined' ? annotation.y : annotation.lines[0][1];\r\n\r\n      insertElementWithinChildren(\r\n        createScreenReaderOnly(`Unlabeled drawing`, annotation.uuid),\r\n        x, y, annotation.page\r\n      );\r\n      break;\r\n\r\n    case 'circle':\r\n    case 'fillcircle':\r\n    case 'emptycircle':\r\n      let x2 = typeof annotation.cx !== 'undefined' ? annotation.cx : annotation.lines[0][0];\r\n      let y2 = typeof annotation.cy !== 'undefined' ? annotation.cy : annotation.lines[0][1];\r\n\r\n      insertElementWithinChildren(\r\n        createScreenReaderOnly(`Unlabeled drawing`, annotation.uuid),\r\n        x2, y2, annotation.page\r\n      );\r\n      break;\r\n  }\r\n\r\n  // Include comments in screen reader hint\r\n  if (COMMENT_TYPES.includes(annotation.type)) {\r\n    renderScreenReaderComments(annotation.documentId, annotation.uuid);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertScreenReaderHint.js\n **/","/**\r\n * Create a node that is only visible to screen readers\r\n *\r\n * @param {String} content The text content that should be read by screen reader\r\n * @param {String} [annotationId] The ID of the annotation assocaited\r\n * @return {Element} An Element that is only visible to screen readers\r\n */\r\nexport default function createScreenReaderOnly(content, annotationId) {\r\n  let node = document.createElement('div');\r\n  let text = document.createTextNode(content);\r\n  node.appendChild(text);\r\n  node.setAttribute('id', `pdf-annotate-screenreader-${annotationId}`);\r\n  node.style.position = 'absolute';\r\n  node.style.left = '-10000px';\r\n  node.style.top = 'auto';\r\n  node.style.width = '1px';\r\n  node.style.height = '1px';\r\n  node.style.overflow = 'hidden';\r\n  return node;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/createScreenReaderOnly.js\n **/","import config from '../config';\r\nimport insertElementWithinElement from './insertElementWithinElement';\r\nimport { pointIntersectsRect } from '../UI/utils';\r\nimport { scaleUp } from '../UI/utils'; \r\n\r\n/**\r\n * Insert an element at a point within the document.\r\n * This algorithm will try to insert between elements if possible.\r\n * It will however use `insertElementWithinElement` if it is more accurate.\r\n *\r\n * @param {Element} el The element to be inserted\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n * @param {Number} pageNumber The page number to limit elements to\r\n * @return {Boolean} True if element was able to be inserted, otherwise false\r\n */\r\nexport default function insertElementWithinChildren(el, x, y, pageNumber) {\r\n  // Try and use most accurate method of inserting within an element\r\n  if (insertElementWithinElement(el, x, y, pageNumber, true)) {\r\n    return true;\r\n  }\r\n\r\n  // Fall back to inserting between elements\r\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\r\n  let rect = svg.getBoundingClientRect();\r\n  let nodes = [...svg.parentNode.querySelectorAll(config.textClassQuery() + ' > div')];\r\n\r\n  y = scaleUp(svg, {y}).y + rect.top;\r\n  x = scaleUp(svg, {x}).x + rect.left;\r\n\r\n  // Find the best node to insert before\r\n  for (let i=0, l=nodes.length; i<l; i++) {\r\n    let n = nodes[i];\r\n    let r = n.getBoundingClientRect();\r\n    if (y <= r.top) {\r\n      n.parentNode.insertBefore(el, n);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // If all else fails try to append to the bottom\r\n  let textLayer = svg.parentNode.querySelector(config.textClassQuery());\r\n  if (textLayer) {\r\n    let textRect = textLayer.getBoundingClientRect();\r\n    if (pointIntersectsRect(x, y, textRect)) {\r\n      textLayer.appendChild(el);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertElementWithinChildren.js\n **/","export default {\r\n    annotationLayerName: 'annotationLayer',\r\n    textLayerName: 'textLayer',\r\n    annotationSvgQuery: function () {\r\n        return 'svg.' + this.annotationLayerName;\r\n    },\r\n    annotationClassQuery: function () {\r\n        return '.' + this.annotationLayerName;\r\n    },\r\n    textClassQuery: function () {\r\n        return '.' + this.textLayerName;\r\n    }    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/config.js\n **/","import config from '../config'\r\nimport {\r\n  pointIntersectsRect,\r\n  scaleUp,\r\n  scaleDown\r\n} from '../UI/utils'; \r\n\r\n/**\r\n * Insert an element at a point within the document.\r\n * This algorithm will only insert within an element amidst it's text content.\r\n *\r\n * @param {Element} el The element to be inserted\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n * @param {Number} pageNumber The page number to limit elements to\r\n * @param {Boolean} insertBefore Whether the element is to be inserted before or after x\r\n * @return {Boolean} True if element was able to be inserted, otherwise false\r\n */\r\nexport default function insertElementWithinElement(el, x, y, pageNumber, insertBefore) {\r\n  const OFFSET_ADJUST = 2;\r\n\r\n  // If inserting before adjust `x` by looking for element a few px to the right\r\n  // Otherwise adjust a few px to the left\r\n  // This is to allow a little tolerance by searching within the box, instead\r\n  // of getting a false negative by testing right on the border.\r\n  x = Math.max(x + (OFFSET_ADJUST * (insertBefore ? 1 : -1)), 0);\r\n\r\n  let node = textLayerElementFromPoint(x, y + OFFSET_ADJUST, pageNumber);\r\n  if (!node) {\r\n    return false;\r\n  }\r\n  \r\n  // Now that node has been found inverse the adjustment for `x`.\r\n  // This is done to accomodate tolerance by cutting off on the outside of the\r\n  // text boundary, instead of missing a character by cutting off within.\r\n  x = x + (OFFSET_ADJUST * (insertBefore ? -1 : 1));\r\n\r\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\r\n  let left = scaleDown(svg, {left: node.getBoundingClientRect().left}).left - svg.getBoundingClientRect().left;\r\n  let temp = node.cloneNode(true);\r\n  let head = temp.innerHTML.split('');\r\n  let tail = [];\r\n\r\n  // Insert temp off screen\r\n  temp.style.position = 'absolute';\r\n  temp.style.top = '-10000px';\r\n  temp.style.left = '-10000px';\r\n  document.body.appendChild(temp);\r\n\r\n  while (head.length) {\r\n    // Don't insert within HTML tags\r\n    if (head[head.length - 1] === '>') {\r\n      while(head.length) {\r\n        tail.unshift(head.pop());\r\n        if (tail[0] === '<') {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Check if width of temp based on current head value satisfies x\r\n    temp.innerHTML = head.join('');\r\n    let width = scaleDown(svg, {width: temp.getBoundingClientRect().width}).width;\r\n    if (left + width <= x) {\r\n      break;\r\n    }\r\n    tail.unshift(head.pop());\r\n  }\r\n  \r\n  // Update original node with new markup, including element to be inserted\r\n  node.innerHTML = head.join('') + el.outerHTML + tail.join('');\r\n  temp.parentNode.removeChild(temp);\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Get a text layer element at a given point on a page\r\n *\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n * @param {Number} pageNumber The page to limit elements to\r\n * @return {Element} First text layer element found at the point\r\n */\r\nfunction textLayerElementFromPoint(x, y, pageNumber) {\r\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\r\n  let rect = svg.getBoundingClientRect();\r\n  y = scaleUp(svg, {y}).y + rect.top;\r\n  x = scaleUp(svg, {x}).x + rect.left;\r\n  return [...svg.parentNode.querySelectorAll(config.textClassQuery() + ' [data-canvas-width]')].filter((el) => {\r\n    return pointIntersectsRect(x, y, el.getBoundingClientRect());\r\n  })[0];\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertElementWithinElement.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport insertScreenReaderComment from './insertScreenReaderComment';\r\n\r\n/**\r\n * Insert the comments into the DOM to be available by screen reader\r\n *\r\n * Example output:\r\n *   <div class=\"screenReaderOnly\">\r\n *    <div>Begin highlight 1</div>\r\n *    <ol aria-label=\"Comments\">\r\n *      <li>Foo</li>\r\n *      <li>Bar</li>\r\n *      <li>Baz</li>\r\n *      <li>Qux</li>\r\n *    </ol>\r\n *  </div>\r\n *  <div>Some highlighted text goes here...</div>\r\n *  <div class=\"screenReaderOnly\">End highlight 1</div>\r\n *\r\n * NOTE: `screenReaderOnly` is not a real class, just used for brevity\r\n *\r\n * @param {String} documentId The ID of the document\r\n * @param {String} annotationId The ID of the annotation\r\n * @param {Array} [comments] Optionally preloaded comments to be rendered\r\n * @return {Promise}\r\n */\r\nexport default function renderScreenReaderComments(documentId, annotationId, comments) {\r\n  let promise;\r\n\r\n  if (Array.isArray(comments)) {\r\n    promise = Promise.resolve(comments);\r\n  } else {\r\n    promise = PDFJSAnnotate.getStoreAdapter().getComments(documentId, annotationId);\r\n  }\r\n\r\n  return promise.then((comments) => {\r\n    // Node needs to be found by querying DOM as it may have been inserted as innerHTML\r\n    // leaving `screenReaderNode` as an invalid reference (see `insertElementWithinElement`).\r\n    let node = document.getElementById(`pdf-annotate-screenreader-${annotationId}`);\r\n    if (node) { \r\n      let list = document.createElement('ol');\r\n      list.setAttribute('id', `pdf-annotate-screenreader-comment-list-${annotationId}`);\r\n      list.setAttribute('aria-label', 'Comments');\r\n      node.appendChild(list);\r\n      comments.forEach(insertScreenReaderComment);\r\n    }\r\n  });\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/renderScreenReaderComments.js\n **/","/**\r\n * Insert a comment into the DOM to be available by screen reader\r\n *\r\n * @param {Object} comment The comment to be inserted\r\n */\r\nexport default function insertScreenReaderComment(comment) {\r\n  if (!comment) {\r\n    return;\r\n  }\r\n\r\n  let list = document.querySelector(`#pdf-annotate-screenreader-${comment.annotation} ol`);\r\n  if (list) {\r\n    let item = document.createElement('li');\r\n    item.setAttribute('id', `pdf-annotate-screenreader-comment-${comment.uuid}`);\r\n    item.appendChild(document.createTextNode(`${comment.content}`));\r\n    list.appendChild(item);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/insertScreenReaderComment.js\n **/","import insertScreenReaderHint from './insertScreenReaderHint';\r\nimport renderScreenReaderHints from './renderScreenReaderHints';\r\nimport insertScreenReaderComment from './insertScreenReaderComment';\r\nimport renderScreenReaderComments from './renderScreenReaderComments';\r\nimport { addEventListener } from '../UI/event';\r\nimport PDFJSAnnotate from '../PDFJSAnnotate';\r\n\r\n/**\r\n * Initialize the event handlers for keeping screen reader hints synced with data\r\n */\r\nexport default function initEventHandlers() {\r\n  addEventListener('annotation:add', (documentId, pageNumber, annotation) => {\r\n    reorderAnnotationsByType(documentId, pageNumber, annotation.type);\r\n  });\r\n  addEventListener('annotation:edit', (documentId, annotationId, annotation) => {\r\n    reorderAnnotationsByType(documentId, annotation.page, annotation.type);\r\n  });\r\n  addEventListener('annotation:delete', removeAnnotation);\r\n  addEventListener('comment:add', insertComment);\r\n  addEventListener('comment:delete', removeComment);\r\n}\r\n\r\n/**\r\n * Reorder the annotation numbers by annotation type\r\n *\r\n * @param {String} documentId The ID of the document\r\n * @param {Number} pageNumber The page number of the annotations\r\n * @param {Strig} type The annotation type\r\n */\r\nfunction reorderAnnotationsByType(documentId, pageNumber, type) {\r\n  PDFJSAnnotate.getStoreAdapter().getAnnotations(documentId, pageNumber)\r\n    .then((annotations) => {\r\n      return annotations.annotations.filter((a) => {\r\n        return a.type === type;\r\n      });\r\n    })\r\n    .then((annotations) => {\r\n      annotations.forEach((a) => {\r\n        removeAnnotation(documentId, a.uuid);\r\n      });\r\n\r\n      return annotations;\r\n    })\r\n    .then(renderScreenReaderHints);\r\n}\r\n\r\n/**\r\n * Remove the screen reader hint for an annotation\r\n *\r\n * @param {String} documentId The ID of the document\r\n * @param {String} annotationId The Id of the annotation\r\n */\r\nfunction removeAnnotation(documentId, annotationId) {\r\n  removeElementById(`pdf-annotate-screenreader-${annotationId}`);\r\n  removeElementById(`pdf-annotate-screenreader-${annotationId}-end`);\r\n}\r\n\r\n/**\r\n * Insert a screen reader hint for a comment\r\n *\r\n * @param {String} documentId The ID of the document\r\n * @param {String} annotationId The ID of tha assocated annotation\r\n * @param {Object} comment The comment to insert a hint for\r\n */\r\nfunction insertComment(documentId, annotationId, comment) {\r\n  let list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\r\n  let promise;\r\n\r\n  if (!list) {\r\n    promise = renderScreenReaderComments(documentId, annotationId, []).then(() => {\r\n      list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\r\n      return true;\r\n    });\r\n  } else {\r\n    promise = Promise.resolve(true);\r\n  }\r\n\r\n  promise.then(() => {\r\n    insertScreenReaderComment(comment);\r\n  });\r\n}\r\n\r\n/**\r\n * Remove a screen reader hint for a comment\r\n *\r\n * @param {String} documentId The ID of the document\r\n * @param {String} commentId The ID of the comment\r\n */\r\nfunction removeComment(documentId, commentId) {\r\n  removeElementById(`pdf-annotate-screenreader-comment-${commentId}`);\r\n}\r\n\r\n/**\r\n * Remove an element from the DOM by it's ID if it exists\r\n *\r\n * @param {String} elementID The ID of the element to be removed\r\n */\r\nfunction removeElementById(elementId) {\r\n  let el = document.getElementById(elementId);\r\n  if (el) {\r\n    el.parentNode.removeChild(el);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/a11y/initEventHandlers.js\n **/","import { addEventListener, removeEventListener, fireEvent } from './event';\r\nimport { disableEdit, enableEdit } from './edit';\r\nimport { disablePen, enablePen, setPen } from './pen';\r\nimport { enableEraser, disableEraser } from './eraser';\r\nimport { disableArrow, enableArrow, setArrow } from './arrow';\r\nimport { disablePoint, enablePoint } from './point';\r\nimport { disableRect, enableRect } from './rect';\r\nimport { disableCircle, enableCircle, setCircle, addCircle } from './circle';\r\nimport { disableText, enableText, setText } from './text';\r\nimport { createPage, renderPage } from './page';\r\n\r\nexport default {\r\n  addEventListener, removeEventListener, fireEvent,\r\n  disableEdit, enableEdit,\r\n  disablePen, enablePen, setPen,\r\n  enableEraser, disableEraser,\r\n  disablePoint, enablePoint,\r\n  disableRect, enableRect,\r\n  disableCircle, enableCircle, setCircle, addCircle,\r\n  disableArrow, enableArrow, setArrow,\r\n  disableText, enableText, setText,\r\n  createPage, renderPage\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/index.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport config from '../config';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  addEventListener,\r\n  removeEventListener\r\n} from './event';\r\nimport {\r\n  BORDER_COLOR,\r\n  disableUserSelect,\r\n  enableUserSelect,\r\n  findSVGContainer,\r\n  findSVGAtPoint,\r\n  getOffsetAnnotationRect,\r\n  getMetadata,\r\n  scaleUp,\r\n  convertToSvgPoint\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet isDragging = false, overlay;\r\nlet dragOffsetX, dragOffsetY, dragStartX, dragStartY;\r\nconst OVERLAY_BORDER_SIZE = 3;\r\n\r\n/**\r\n * Create an overlay for editing an annotation.\r\n *\r\n * @param {Element} target The annotation element to apply overlay for\r\n */\r\nfunction createEditOverlay(target) {\r\n  destroyEditOverlay();\r\n\r\n  overlay = document.createElement('div');\r\n  let anchor = document.createElement('a');\r\n  let parentNode = findSVGContainer(target).parentNode;\r\n  let id = target.getAttribute('data-pdf-annotate-id');\r\n  let rect = getOffsetAnnotationRect(target);\r\n  let styleLeft = rect.left - OVERLAY_BORDER_SIZE;\r\n  let styleTop = rect.top - OVERLAY_BORDER_SIZE;\r\n  \r\n  overlay.setAttribute('id', 'pdf-annotate-edit-overlay');\r\n  overlay.setAttribute('data-target-id', id);\r\n  overlay.style.boxSizing = 'content-box';\r\n  overlay.style.position = 'absolute';\r\n  overlay.style.top = `${styleTop}px`;\r\n  overlay.style.left = `${styleLeft}px`;\r\n  overlay.style.width = `${rect.width}px`;\r\n  overlay.style.height = `${rect.height}px`;\r\n  overlay.style.border = `${OVERLAY_BORDER_SIZE}px solid ${BORDER_COLOR}`;\r\n  overlay.style.borderRadius = `${OVERLAY_BORDER_SIZE}px`;\r\n  overlay.style.zIndex = 20100;\r\n\r\n  anchor.innerHTML = '';\r\n  anchor.setAttribute('href', 'javascript://');\r\n  anchor.style.background = '#fff';\r\n  anchor.style.borderRadius = '20px';\r\n  anchor.style.border = '1px solid #bbb';\r\n  anchor.style.color = '#bbb';\r\n  anchor.style.fontSize = '16px';\r\n  anchor.style.padding = '2px';\r\n  anchor.style.textAlign = 'center';\r\n  anchor.style.textDecoration = 'none';\r\n  anchor.style.position = 'absolute';\r\n  anchor.style.top = '-13px';\r\n  anchor.style.right = '-13px';\r\n  anchor.style.width = '25px';\r\n  anchor.style.height = '25px';\r\n  \r\n  overlay.appendChild(anchor);\r\n  parentNode.appendChild(overlay);\r\n  document.addEventListener('click', handleDocumentClick);\r\n  document.addEventListener('keyup', handleDocumentKeyup);\r\n  document.addEventListener('mousedown', handleDocumentMousedown);\r\n  anchor.addEventListener('click', deleteAnnotation);\r\n  anchor.addEventListener('mouseover', () => {\r\n    anchor.style.color = '#35A4DC';\r\n    anchor.style.borderColor = '#999';\r\n    anchor.style.boxShadow = '0 1px 1px #ccc';\r\n  });\r\n  anchor.addEventListener('mouseout', () => {\r\n    anchor.style.color = '#bbb';\r\n    anchor.style.borderColor = '#bbb';\r\n    anchor.style.boxShadow = '';\r\n  });\r\n  overlay.addEventListener('mouseover', () => {\r\n    if (!isDragging) { anchor.style.display = ''; }\r\n  });\r\n  overlay.addEventListener('mouseout', () => {\r\n    anchor.style.display = 'none';\r\n  });\r\n}\r\n\r\n/**\r\n * Destroy the edit overlay if it exists.\r\n */\r\nfunction destroyEditOverlay() {\r\n  if (overlay) {\r\n    overlay.parentNode.removeChild(overlay);\r\n    overlay = null;\r\n  }\r\n\r\n  document.removeEventListener('click', handleDocumentClick);\r\n  document.removeEventListener('keyup', handleDocumentKeyup);\r\n  document.removeEventListener('mousedown', handleDocumentMousedown);\r\n  document.removeEventListener('mousemove', handleDocumentMousemove);\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n  enableUserSelect();\r\n}\r\n\r\n/**\r\n * Delete currently selected annotation\r\n */\r\nfunction deleteAnnotation() {\r\n  if (!overlay) { return; }\r\n\r\n  let annotationId = overlay.getAttribute('data-target-id');\r\n  let nodes = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\r\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\r\n  let { documentId } = getMetadata(svg);\r\n\r\n  [...nodes].forEach((n) => {\r\n    n.parentNode.removeChild(n);\r\n  });\r\n  \r\n  PDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, annotationId);\r\n\r\n  destroyEditOverlay();\r\n}\r\n\r\n/**\r\n * Handle document.click event\r\n *\r\n * @param {Event} e The DOM event that needs to be handled\r\n */\r\nfunction handleDocumentClick(e) {\r\n  if (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\r\n\r\n  // Remove current overlay\r\n  let overlay = document.getElementById('pdf-annotate-edit-overlay');\r\n  if (overlay) {\r\n    if (isDragging || e.target === overlay) {\r\n      return;\r\n    }\r\n\r\n    destroyEditOverlay();\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.keyup event\r\n *\r\n * @param {Event} e The DOM event that needs to be handled\r\n */\r\nfunction handleDocumentKeyup(e) {\r\n  if (overlay && e.keyCode === 46 &&\r\n      e.target.nodeName.toLowerCase() !== 'textarea' &&\r\n      e.target.nodeName.toLowerCase() !== 'input') {\r\n    deleteAnnotation();\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.mousedown event\r\n *\r\n * @param {Event} e The DOM event that needs to be handled\r\n */\r\nfunction handleDocumentMousedown(e) {\r\n  if (e.target !== overlay) { return; }\r\n\r\n  // Highlight and strikeout annotations are bound to text within the document.\r\n  // It doesn't make sense to allow repositioning these types of annotations.\r\n  let annotationId = overlay.getAttribute('data-target-id');\r\n  let target = document.querySelector(`[data-pdf-annotate-id=\"${annotationId}\"]`);\r\n  let type = target.getAttribute('data-pdf-annotate-type');\r\n\r\n  if (type === 'highlight' || type === 'strikeout') { return; }\r\n\r\n  isDragging = true;\r\n  dragOffsetX = e.clientX;\r\n  dragOffsetY = e.clientY;\r\n  dragStartX = overlay.offsetLeft;\r\n  dragStartY = overlay.offsetTop;\r\n\r\n  overlay.style.background = 'rgba(255, 255, 255, 0.7)';\r\n  overlay.style.cursor = 'move';\r\n  overlay.querySelector('a').style.display = 'none';\r\n\r\n  document.addEventListener('mousemove', handleDocumentMousemove);\r\n  document.addEventListener('mouseup', handleDocumentMouseup);\r\n  disableUserSelect();\r\n}\r\n\r\n/**\r\n * Handle document.mousemove event\r\n *\r\n * @param {Event} e The DOM event that needs to be handled\r\n */\r\nfunction handleDocumentMousemove(e) {\r\n  let annotationId = overlay.getAttribute('data-target-id');\r\n  let parentNode = overlay.parentNode;\r\n  let rect = parentNode.getBoundingClientRect();\r\n  let y = (dragStartY + (e.clientY - dragOffsetY));\r\n  let x = (dragStartX + (e.clientX - dragOffsetX));\r\n  let minY = 0;\r\n  let maxY = rect.height;\r\n  let minX = 0;\r\n  let maxX = rect.width;\r\n\r\n  if (y > minY && y + overlay.offsetHeight < maxY) {\r\n    overlay.style.top = `${y}px`;\r\n  }\r\n\r\n  if (x > minX && x + overlay.offsetWidth < maxX) {\r\n    overlay.style.left = `${x}px`;\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.mouseup event\r\n *\r\n * @param {Event} e The DOM event that needs to be handled\r\n */\r\nfunction handleDocumentMouseup(e) {\r\n  let annotationId = overlay.getAttribute('data-target-id');\r\n  let target = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\r\n  let type = target[0].getAttribute('data-pdf-annotate-type');\r\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\r\n  let { documentId } = getMetadata(svg);\r\n  \r\n  overlay.querySelector('a').style.display = '';\r\n\r\n  PDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, annotationId).then((annotation) => {\r\n    let attribX = 'x';\r\n    let attribY = 'y';\r\n    if (['circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\r\n      attribX = 'cx';\r\n      attribY = 'cy';\r\n    }\r\n    if (['area', 'highlight', 'point', 'textbox', 'circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\r\n      let modelStart = convertToSvgPoint([dragStartX, dragStartY], svg);\r\n      let modelEnd = convertToSvgPoint([overlay.offsetLeft, overlay.offsetTop], svg);\r\n      let modelDelta = {\r\n        x: modelEnd[0] - modelStart[0],\r\n        y: modelEnd[1] - modelStart[1]\r\n      };\r\n\r\n      if (type === 'textbox') {\r\n        target = [target[0].firstChild];\r\n      }\r\n\r\n      [...target].forEach((t, i) => {\r\n        let modelX = parseInt(t.getAttribute(attribX), 10);\r\n        let modelY = parseInt(t.getAttribute(attribY), 10);\r\n        if (modelDelta.y !== 0) {\r\n          modelY = modelY + modelDelta.y;\r\n          let viewY = modelY;\r\n\r\n          if (type === 'point') {\r\n            viewY = scaleUp(svg, { viewY }).viewY;\r\n          }\r\n\r\n          t.setAttribute(attribY, viewY);\r\n          if (annotation.rectangles && i < annotation.rectangles.length) {\r\n            annotation.rectangles[i].y = modelY;\r\n          } else if (annotation[attribY]) {\r\n            annotation[attribY] = modelY;\r\n          }\r\n        }\r\n        if (modelDelta.x !== 0) {\r\n          modelX = modelX + modelDelta.x;\r\n          let viewX = modelX;\r\n\r\n          if (type === 'point') {\r\n            viewX = scaleUp(svg, { viewX }).viewX;\r\n          }\r\n\r\n          t.setAttribute(attribX, viewX);\r\n          if (annotation.rectangles  && i < annotation.rectangles.length) {\r\n            annotation.rectangles[i].x = modelX;\r\n          } else if (annotation[attribX]) {\r\n            annotation[attribX] = modelX;\r\n          }\r\n        }\r\n      });\r\n    // } else if (type === 'strikeout') {\r\n    //   let { deltaX, deltaY } = getDelta('x1', 'y1');\r\n    //   [...target].forEach(target, (t, i) => {\r\n    //     if (deltaY !== 0) {\r\n    //       t.setAttribute('y1', parseInt(t.getAttribute('y1'), 10) + deltaY);\r\n    //       t.setAttribute('y2', parseInt(t.getAttribute('y2'), 10) + deltaY);\r\n    //       annotation.rectangles[i].y = parseInt(t.getAttribute('y1'), 10);\r\n    //     }\r\n    //     if (deltaX !== 0) {\r\n    //       t.setAttribute('x1', parseInt(t.getAttribute('x1'), 10) + deltaX);\r\n    //       t.setAttribute('x2', parseInt(t.getAttribute('x2'), 10) + deltaX);\r\n    //       annotation.rectangles[i].x = parseInt(t.getAttribute('x1'), 10);\r\n    //     }\r\n    //   });\r\n    } else if (type === 'drawing' || type === 'arrow') {\r\n      let modelStart = convertToSvgPoint([dragStartX, dragStartY], svg);\r\n      let modelEnd = convertToSvgPoint([overlay.offsetLeft, overlay.offsetTop], svg);\r\n      let modelDelta = {\r\n        x: modelEnd[0] - modelStart[0],\r\n        y: modelEnd[1] - modelStart[1]\r\n      };\r\n\r\n      annotation.lines.forEach((line, i) => {\r\n        let [x, y] = annotation.lines[i];\r\n        annotation.lines[i][0] = x + modelDelta.x;\r\n        annotation.lines[i][1] = y + modelDelta.y;\r\n      });\r\n\r\n      target[0].parentNode.removeChild(target[0]);\r\n      appendChild(svg, annotation);\r\n    } \r\n\r\n    PDFJSAnnotate.getStoreAdapter().editAnnotation(documentId, annotationId, annotation);\r\n  });\r\n\r\n  setTimeout(() => {\r\n    isDragging = false;\r\n  }, 0);\r\n\r\n  overlay.style.background = '';\r\n  overlay.style.cursor = '';\r\n\r\n  document.removeEventListener('mousemove', handleDocumentMousemove);\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n  enableUserSelect();\r\n}\r\n\r\n/**\r\n * Handle annotation.click event\r\n *\r\n * @param {Element} e The annotation element that was clicked\r\n */\r\nfunction handleAnnotationClick(target) {\r\n  createEditOverlay(target);\r\n}\r\n\r\n/**\r\n * Enable edit mode behavior.\r\n */\r\nexport function enableEdit () {\r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  addEventListener('annotation:click', handleAnnotationClick);\r\n};\r\n\r\n/**\r\n * Disable edit mode behavior.\r\n */\r\nexport function disableEdit () {\r\n  destroyEditOverlay();\r\n\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  removeEventListener('annotation:click', handleAnnotationClick);\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/edit.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  disableUserSelect,\r\n  enableUserSelect,\r\n  findSVGAtPoint,\r\n  getMetadata,\r\n  convertToSvgPoint\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet _candraw = false;\r\nlet _penSize;\r\nlet _penColor;\r\nlet path;\r\nlet lines = [];\r\n\r\nconst isFirefox = /firefox/i.test(navigator.userAgent);\r\n\r\n/**\r\n * Handle document.touchdown or document.pointerdown event\r\n */\r\nfunction handleDocumentPointerdown(e) {\r\n  e.preventDefault();\r\n  path = null;\r\n  lines = [];\r\n  _candraw = true;\r\n}\r\n\r\n/**\r\n * Handle document.touchup or document.pointerup event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\nfunction handleDocumentKeyupChrome(e){\r\n  saveToStorage(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n}\r\n\r\nfunction handleDocumentPointerup(e) {\r\n  saveToStorage(e.clientX, e.clientY);\r\n}\r\n\r\nfunction saveToStorage(x, y){\r\n  _candraw = false;\r\n  let svg;\r\n  if (lines.length > 1 && (svg = findSVGAtPoint(x, y))) {\r\n    let { documentId, pageNumber } = getMetadata(svg);\r\n\r\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, {\r\n        type: 'drawing',\r\n        width: _penSize,\r\n        color: _penColor,\r\n        lines\r\n      }\r\n    ).then((annotation) => {\r\n      if (path) {\r\n        svg.removeChild(path);\r\n      }\r\n\r\n      appendChild(svg, annotation);\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.mousemove event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\nfunction handleDocumentPointermove(e) {\r\n  if(!e.srcElement.classList.contains('annotationLayer')){\r\n    return;\r\n  }\r\n  if(_candraw){\r\n    savePoint(e.clientX, e.clientY);\r\n  }\r\n}\r\n\r\nfunction handleDocumentPointermoveChrome(e){\r\n  if(!e.srcElement.classList.contains('annotationLayer')){\r\n    return;\r\n  }\r\n  if(_candraw){\r\n    savePoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.keyup event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\nfunction handleDocumentKeyup(e) {\r\n  // Cancel rect if Esc is pressed\r\n  if (e.keyCode === 27) {\r\n    lines = null;\r\n    path.parentNode.removeChild(path);\r\n    document.removeEventListener('pointermove', handleDocumentPointermove);\r\n    document.removeEventListener('pointerup', handleDocumentPointerup);\r\n  }\r\n}\r\n\r\n/**\r\n * Save a point to the line being drawn.\r\n *\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n */\r\nfunction savePoint(x, y) {\r\n  let svg = findSVGAtPoint(x, y);\r\n  if (!svg) {\r\n    return;\r\n  }\r\n\r\n  let rect = svg.getBoundingClientRect();\r\n  let point = convertToSvgPoint([\r\n    x - rect.left,\r\n    y - rect.top\r\n  ], svg);\r\n  point[0] = point[0].toFixed(2);\r\n  point[1] = point[1].toFixed(2);\r\n  lines.push(point);\r\n\r\n  if (lines.length <= 1) {\r\n    return;\r\n  }\r\n\r\n  if (path) {\r\n    svg.removeChild(path);\r\n  }\r\n\r\n  path = appendChild(svg, {\r\n    type: 'drawing',\r\n    color: _penColor,\r\n    width: _penSize,\r\n    lines\r\n  });\r\n}\r\n\r\n/**\r\n * Set the attributes of the pen.\r\n *\r\n * @param {Number} penSize The size of the lines drawn by the pen\r\n * @param {String} penColor The color of the lines drawn by the pen\r\n */\r\nexport function setPen(penSize = 1, penColor = '000000') {\r\n  _penSize = parseInt(penSize, 10);\r\n  _penColor = penColor;\r\n}\r\n\r\n/**\r\n * Enable the pen behavior\r\n */\r\nexport function enablePen() {\r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  // Chrome and Firefox has different behaviors with how pen works, so we need different events.\r\n  if (!isFirefox){\r\n    document.addEventListener('touchstart', handleDocumentPointerdown);\r\n    document.addEventListener('touchmove', handleDocumentPointermoveChrome);\r\n    document.addEventListener('touchend', handleDocumentKeyupChrome);\r\n    document.addEventListener('mousedown', handleDocumentPointerdown);\r\n    document.addEventListener('mousemove', handleDocumentPointermove);\r\n    document.addEventListener('mouseup', handleDocumentPointerup);\r\n  } else {\r\n    document.addEventListener('pointerdown', handleDocumentPointerdown);\r\n    document.addEventListener('pointermove', handleDocumentPointermove);\r\n    document.addEventListener('pointerup', handleDocumentPointerup);\r\n  }\r\n  document.addEventListener('keyup', handleDocumentKeyup);\r\n  disableUserSelect();\r\n}\r\n\r\n/**\r\n * Disable the pen behavior\r\n */\r\nexport function disablePen() {\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  if (!isFirefox){\r\n    document.removeEventListener('touchstart', handleDocumentPointerdown);\r\n    document.removeEventListener('touchmove', handleDocumentPointermoveChrome);\r\n    document.removeEventListener('touchend', handleDocumentKeyupChrome);\r\n    document.removeEventListener('mousedown', handleDocumentPointerdown);\r\n    document.removeEventListener('mousemove', handleDocumentPointermove);\r\n    document.removeEventListener('mouseup', handleDocumentPointerup);\r\n  } else {\r\n    document.removeEventListener('pointerdown', handleDocumentPointerdown);\r\n    document.removeEventListener('pointermove', handleDocumentPointermove);\r\n    document.removeEventListener('pointerup', handleDocumentPointerup);\r\n  }\r\n  document.removeEventListener('keyup', handleDocumentKeyup);\r\n  enableUserSelect();\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/pen.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport config from '../config';\r\nimport {\r\n  findAnnotationAtPoint,\r\n  findSVGAtPoint,\r\n  getMetadata\r\n} from './utils';\r\n\r\nlet _canerase = false;\r\nlet userId = \"user\";\r\n\r\nfunction handleDocumentMouseDown(e){\r\n  _canerase = true;\r\n}\r\n\r\nfunction handleDocumentMouseUp(e){\r\n  _canerase = false;\r\n}\r\n\r\nfunction handleDocumentMouseMove(e){\r\n  if(_canerase){\r\n    let target = findAnnotationAtPoint(e.clientX, e.clientY);\r\n    if(target && target.getAttribute('data-pdf-annotate-userId') == userId){\r\n      let { documentId } = getMetadata(target.parentElement);\r\n      let annotationId = target.getAttribute('data-pdf-annotate-id');\r\n      let nodes = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\r\n      [...nodes].forEach((n) => {\r\n        n.parentNode.removeChild(n);\r\n      });\r\n      \r\n      PDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, annotationId);\r\n    }\r\n  }\r\n}\r\n\r\nexport function enableEraser(){\r\n  userId = PDFJSAnnotate.getStoreAdapter().userId;\r\n  document.addEventListener('mousemove', handleDocumentMouseMove);\r\n  document.addEventListener('mousedown', handleDocumentMouseDown);\r\n  document.addEventListener('mouseup', handleDocumentMouseUp);\r\n}\r\n\r\nexport function disableEraser(){\r\n  document.removeEventListener('mousemove', handleDocumentMouseMove);\r\n  document.removeEventListener('mousedown', handleDocumentMouseDown);\r\n  document.removeEventListener('mouseup', handleDocumentMouseUp);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/eraser.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  disableUserSelect,\r\n  enableUserSelect,\r\n  findSVGAtPoint,\r\n  findSVGContainer,\r\n  getMetadata,\r\n  convertToSvgPoint,\r\n  convertToScreenPoint,\r\n  findAnnotationAtPoint\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet _penSize;\r\nlet _penColor;\r\nlet path;\r\nlet lines;\r\nlet originY;\r\nlet originX;\r\n\r\n/**\r\n * Handle document.mousedown event\r\n */\r\nfunction handleDocumentMousedown(e) {\r\n  let target = findAnnotationAtPoint(e.clientX, e.clientY);\r\n  if (target === null)\r\n    return;\r\n\r\n  let type = target.getAttribute('data-pdf-annotate-type');\r\n  if (type !== 'circle' && type !== 'fillcircle' && type !== 'emptycircle') {\r\n    return;\r\n  }\r\n\r\n  let svg = findSVGContainer(target);\r\n  let { documentId } = getMetadata(svg);\r\n  let annotationId = target.getAttribute('data-pdf-annotate-id');\r\n\r\n  let event = e;\r\n  PDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, annotationId).then((annotation) => {\r\n    if (annotation) {\r\n      path = null;\r\n      lines = [];\r\n\r\n      let point = convertToScreenPoint([\r\n        annotation.cx,\r\n        annotation.cy\r\n      ], svg);\r\n\r\n      let rect = svg.getBoundingClientRect();\r\n\r\n      originX = point[0] + rect.left;\r\n      originY = point[1] + rect.top;    \r\n\r\n      document.addEventListener('mousemove', handleDocumentMousemove);\r\n      document.addEventListener('mouseup', handleDocumentMouseup);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Handle document.mouseup event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\nfunction handleDocumentMouseup(e) {\r\n  let svg;\r\n  if (lines.length > 1 && (svg = findSVGAtPoint(e.clientX, e.clientY))) {\r\n    let { documentId, pageNumber } = getMetadata(svg);\r\n\r\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, {\r\n        type: 'arrow',\r\n        width: _penSize,\r\n        color: _penColor,\r\n        lines\r\n      }\r\n    ).then((annotation) => {\r\n      if (path) {\r\n        svg.removeChild(path);\r\n      }\r\n\r\n      appendChild(svg, annotation);\r\n    });\r\n  }\r\n\r\n  document.removeEventListener('mousemove', handleDocumentMousemove);\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\n/**\r\n * Handle document.mousemove event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\nfunction handleDocumentMousemove(e) {\r\n  let x = lines.length === 0 ? originX : e.clientX;\r\n  let y = lines.length === 0 ? originY : e.clientY;\r\n\r\n  savePoint(x, y);\r\n}\r\n\r\n/**\r\n * Handle document.keyup event\r\n *\r\n * @param {Event} e The DOM event to be handled\r\n */\r\nfunction handleDocumentKeyup(e) {\r\n  // Cancel rect if Esc is pressed\r\n  if (e.keyCode === 27) {\r\n    lines = null;\r\n    path.parentNode.removeChild(path);\r\n    document.removeEventListener('mousemove', handleDocumentMousemove);\r\n    document.removeEventListener('mouseup', handleDocumentMouseup);\r\n  }\r\n}\r\n\r\n/**\r\n * Save a point to the line being drawn.\r\n *\r\n * @param {Number} x The x coordinate of the point\r\n * @param {Number} y The y coordinate of the point\r\n */\r\nfunction savePoint(x, y) {\r\n  let svg = findSVGAtPoint(x, y);\r\n  if (!svg) {\r\n    return;\r\n  }\r\n\r\n  let rect = svg.getBoundingClientRect();\r\n  let point = convertToSvgPoint([\r\n    x - rect.left,\r\n    y - rect.top\r\n  ], svg);\r\n\r\n  if (lines.length < 2) {\r\n    lines.push(point);\r\n    return;\r\n  } else {\r\n    lines[1] = point; // update end point\r\n  }\r\n\r\n  if (path) {\r\n    svg.removeChild(path);\r\n  }\r\n\r\n  path = appendChild(svg, {\r\n    type: 'arrow',\r\n    color: _penColor,\r\n    width: _penSize,\r\n    lines\r\n  });\r\n}\r\n\r\n/**\r\n * Set the attributes of the pen.\r\n *\r\n * @param {Number} penSize The size of the lines drawn by the pen\r\n * @param {String} penColor The color of the lines drawn by the pen\r\n */\r\nexport function setArrow(penSize = 10, penColor = '0000FF') {\r\n  _penSize = parseInt(penSize, 10);\r\n  _penColor = penColor;\r\n}\r\n\r\n/**\r\n * Enable the pen behavior\r\n */\r\nexport function enableArrow() {\r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  document.addEventListener('mousedown', handleDocumentMousedown);\r\n  document.addEventListener('keyup', handleDocumentKeyup);\r\n  disableUserSelect();\r\n}\r\n\r\n/**\r\n * Disable the pen behavior\r\n */\r\nexport function disableArrow() {\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  document.removeEventListener('mousedown', handleDocumentMousedown);\r\n  document.removeEventListener('keyup', handleDocumentKeyup);\r\n  enableUserSelect();\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/arrow.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  BORDER_COLOR,\r\n  findSVGAtPoint,\r\n  getMetadata,\r\n  scaleDown\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet input;\r\n\r\n/**\r\n * Handle document.mouseup event\r\n *\r\n * @param {Event} The DOM event to be handled\r\n */\r\nfunction handleDocumentMouseup(e) {\r\n  if (input || !findSVGAtPoint(e.clientX, e.clientY)) {\r\n    return\r\n  }\r\n  \r\n  input = document.createElement('input');\r\n  input.setAttribute('id', 'pdf-annotate-point-input');\r\n  input.setAttribute('placeholder', 'Enter comment');\r\n  input.style.border = `3px solid ${BORDER_COLOR}`;\r\n  input.style.borderRadius = '3px';\r\n  input.style.position = 'absolute';\r\n  input.style.top = `${e.clientY}px`;\r\n  input.style.left = `${e.clientX}px`;\r\n\r\n  input.addEventListener('blur', handleInputBlur);\r\n  input.addEventListener('keyup', handleInputKeyup);\r\n\r\n  document.body.appendChild(input);\r\n  input.focus();\r\n}\r\n\r\n/**\r\n * Handle input.blur event\r\n */\r\nfunction handleInputBlur() {\r\n  savePoint();\r\n}\r\n\r\n/**\r\n * Handle input.keyup event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleInputKeyup(e) {\r\n  if (e.keyCode === 27) {\r\n    closeInput();\r\n  } else if (e.keyCode === 13) {\r\n    savePoint();\r\n  }\r\n}\r\n\r\n/**\r\n * Save a new point annotation from input\r\n */\r\nfunction savePoint() {\r\n  if (input.value.trim().length > 0) {\r\n    let clientX = parseInt(input.style.left, 10);\r\n    let clientY = parseInt(input.style.top, 10);\r\n    let content = input.value.trim();\r\n    let svg = findSVGAtPoint(clientX, clientY);\r\n    if (!svg) {\r\n      return;\r\n    }\r\n\r\n    let rect = svg.getBoundingClientRect();\r\n    let { documentId, pageNumber } = getMetadata(svg);\r\n    let annotation = Object.assign({\r\n        type: 'point'\r\n      }, scaleDown(svg, {\r\n        x: clientX - rect.left,\r\n        y: clientY - rect.top\r\n      })\r\n    );\r\n\r\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\r\n      .then((annotation) => {\r\n        PDFJSAnnotate.getStoreAdapter().addComment(\r\n          documentId,\r\n          annotation.uuid,\r\n          content\r\n        );\r\n\r\n        appendChild(svg, annotation);\r\n      });\r\n  }\r\n\r\n  closeInput();\r\n}\r\n\r\n/**\r\n * Close the input element\r\n */\r\nfunction closeInput() {\r\n  input.removeEventListener('blur', handleInputBlur);\r\n  input.removeEventListener('keyup', handleInputKeyup);\r\n  document.body.removeChild(input);\r\n  input = null;\r\n}\r\n\r\n/**\r\n * Enable point annotation behavior\r\n */\r\nexport function enablePoint() {\r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  document.addEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\n/**\r\n * Disable point annotation behavior\r\n */\r\nexport function disablePoint() {\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/point.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport config from '../config';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  BORDER_COLOR,\r\n  disableUserSelect,\r\n  enableUserSelect,\r\n  findSVGAtPoint,\r\n  getMetadata,\r\n  convertToSvgRect\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet _type;\r\nlet overlay;\r\nlet originY;\r\nlet originX;\r\n\r\n/**\r\n * Get the current window selection as rects\r\n *\r\n * @return {Array} An Array of rects\r\n */\r\nfunction getSelectionRects() {\r\n  try {\r\n    let selection = window.getSelection();\r\n    let range = selection.getRangeAt(0);\r\n    let rects = range.getClientRects();\r\n\r\n    if (rects.length > 0 &&\r\n        rects[0].width > 0 &&\r\n        rects[0].height > 0) {\r\n      return rects;\r\n    }\r\n  } catch (e) {}\r\n  \r\n  return null;\r\n}\r\n\r\n/**\r\n * Handle document.mousedown event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleDocumentMousedown(e) {\r\n  let svg;\r\n  if (_type !== 'area' || !(svg = findSVGAtPoint(e.clientX, e.clientY))) {\r\n    return;\r\n  }\r\n\r\n  let rect = svg.getBoundingClientRect();\r\n  originY = e.clientY;\r\n  originX = e.clientX;\r\n\r\n  overlay = document.createElement('div');\r\n  overlay.style.position = 'absolute';\r\n  overlay.style.top = `${originY - rect.top}px`;\r\n  overlay.style.left = `${originX - rect.left}px`;\r\n  overlay.style.border = `3px solid ${BORDER_COLOR}`;\r\n  overlay.style.borderRadius = '3px';\r\n  svg.parentNode.appendChild(overlay);\r\n  \r\n  document.addEventListener('mousemove', handleDocumentMousemove);\r\n  disableUserSelect();\r\n}\r\n\r\n/**\r\n * Handle document.mousemove event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleDocumentMousemove(e) {\r\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\r\n  let rect = svg.getBoundingClientRect();\r\n\r\n  if (originX + (e.clientX - originX) < rect.right) {\r\n    overlay.style.width = `${e.clientX - originX}px`;\r\n  }\r\n\r\n  if (originY + (e.clientY - originY) < rect.bottom) {\r\n    overlay.style.height = `${e.clientY - originY}px`;\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.mouseup event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleDocumentMouseup(e) {\r\n  let rects;\r\n  if (_type !== 'area' && (rects = getSelectionRects())) {\r\n    let svg = findSVGAtPoint(rects[0].left, rects[0].top);\r\n    saveRect(_type, [...rects].map((r) => {\r\n      return {\r\n        top: r.top,\r\n        left: r.left,\r\n        width: r.width,\r\n        height: r.height\r\n      };\r\n    }));\r\n  } else if (_type === 'area' && overlay) {\r\n    let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\r\n    let rect = svg.getBoundingClientRect();\r\n    saveRect(_type, [{\r\n      top: parseInt(overlay.style.top, 10) + rect.top,\r\n      left: parseInt(overlay.style.left, 10) + rect.left,\r\n      width: parseInt(overlay.style.width, 10),\r\n      height: parseInt(overlay.style.height, 10)\r\n    }]);\r\n\r\n    overlay.parentNode.removeChild(overlay);\r\n    overlay = null;\r\n\r\n    document.removeEventListener('mousemove', handleDocumentMousemove);\r\n    enableUserSelect();\r\n  }\r\n}\r\n\r\n/**\r\n * Handle document.keyup event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleDocumentKeyup(e) {\r\n  // Cancel rect if Esc is pressed\r\n  if (e.keyCode === 27) {\r\n    let selection = window.getSelection();\r\n    selection.removeAllRanges();\r\n    if (overlay && overlay.parentNode) {\r\n      overlay.parentNode.removeChild(overlay);\r\n      overlay = null;\r\n      document.removeEventListener('mousemove', handleDocumentMousemove);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Save a rect annotation\r\n *\r\n * @param {String} type The type of rect (area, highlight, strikeout)\r\n * @param {Array} rects The rects to use for annotation\r\n * @param {String} color The color of the rects\r\n */\r\nfunction saveRect(type, rects, color) {\r\n  let svg = findSVGAtPoint(rects[0].left, rects[0].top);\r\n  let annotation;\r\n\r\n  if (!svg) {\r\n    return;\r\n  }\r\n\r\n  let boundingRect = svg.getBoundingClientRect();\r\n\r\n  if (!color) {\r\n    if (type === 'highlight') {\r\n      color = 'FFFF00';\r\n    } else if (type === 'strikeout') {\r\n      color = 'FF0000';\r\n    }\r\n  }\r\n\r\n  // Initialize the annotation\r\n  annotation = {\r\n    type,\r\n    color,\r\n    rectangles: [...rects].map((r) => {\r\n      let offset = 0;\r\n\r\n      if (type === 'strikeout') {\r\n        offset = r.height / 2;\r\n      }\r\n\r\n      return convertToSvgRect({\r\n        y: (r.top + offset) - boundingRect.top,\r\n        x: r.left - boundingRect.left,\r\n        width: r.width,\r\n        height: r.height\r\n      }, svg);\r\n    }).filter((r) => r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1)\r\n  };\r\n  \r\n  // Short circuit if no rectangles exist\r\n  if (annotation.rectangles.length === 0) {\r\n    return;\r\n  }\r\n\r\n  // Special treatment for area as it only supports a single rect\r\n  if (type === 'area') {\r\n    let rect = annotation.rectangles[0];\r\n    delete annotation.rectangles;\r\n    annotation.x = rect.x;\r\n    annotation.y = rect.y;\r\n    annotation.width = rect.width;\r\n    annotation.height = rect.height;\r\n  }\r\n\r\n  let { documentId, pageNumber } = getMetadata(svg);\r\n\r\n  // Add the annotation\r\n  PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\r\n    .then((annotation) => {\r\n      appendChild(svg, annotation);\r\n    });\r\n}\r\n\r\n/**\r\n * Enable rect behavior\r\n */\r\nexport function enableRect(type) {\r\n  _type = type;\r\n  \r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  document.addEventListener('mouseup', handleDocumentMouseup);\r\n  document.addEventListener('mousedown', handleDocumentMousedown);\r\n  document.addEventListener('keyup', handleDocumentKeyup);\r\n}\r\n\r\n/**\r\n * Disable rect behavior\r\n */\r\nexport function disableRect() {\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n  document.removeEventListener('mousedown', handleDocumentMousedown);\r\n  document.removeEventListener('keyup', handleDocumentKeyup);\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/rect.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport config from '../config';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  findSVGAtPoint,\r\n  getMetadata,\r\n  convertToSvgPoint\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet _type;\r\nlet _circleRadius = 10;\r\nlet _circleColor = '0000FF';\r\n\r\n/**\r\n * Set the attributes of the pen.\r\n *\r\n * @param {Number} circleRadius The radius of the circle\r\n * @param {String} circleColor The color of the circle\r\n */\r\nexport function setCircle(circleRadius = 10, circleColor = '0000FF') {\r\n  _circleRadius = parseInt(circleRadius, 10);\r\n  _circleColor = circleColor;\r\n}\r\n\r\n/**\r\n * Handle document.mouseup event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleDocumentMouseup(e) {\r\n  let svg = findSVGAtPoint(e.clientX, e.clientY);\r\n  if (!svg) {\r\n    return;\r\n  }\r\n  let rect = svg.getBoundingClientRect();\r\n  saveCircle(svg, _type, {\r\n      x: e.clientX - rect.left,\r\n      y: e.clientY - rect.top\r\n    }, _circleRadius, _circleColor\r\n  );\r\n}\r\n\r\n/**\r\n * Save a circle annotation\r\n *\r\n * @param {String} type The type of circle (circle, emptycircle, fillcircle)\r\n * @param {Object} pt The point to use for annotation\r\n * @param {String} color The color of the rects\r\n */\r\nfunction saveCircle(svg, type, pt, radius, color) {\r\n  // Initialize the annotation\r\n  let svg_pt = convertToSvgPoint([ pt.x, pt.y ], svg)\r\n  let annotation = {\r\n    type,\r\n    color,\r\n    cx: svg_pt[0],\r\n    cy: svg_pt[1],\r\n    r: radius\r\n  };\r\n\r\n  let { documentId, pageNumber } = getMetadata(svg);\r\n\r\n  // Add the annotation\r\n  PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\r\n    .then((annotation) => {\r\n      appendChild(svg, annotation);\r\n    });\r\n}\r\n\r\n/**\r\n * Enable circle behavior\r\n */\r\nexport function enableCircle(type) {\r\n  _type = type;\r\n  \r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  document.addEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\n/**\r\n * Disable circle behavior\r\n */\r\nexport function disableCircle() {\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\nexport function addCircle(type, e) {\r\n  let oldType = _type;\r\n  _type = type;\r\n  handleDocumentMouseup(e);\r\n  _type = oldType; \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/circle.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport { appendChild } from '../render/appendChild';\r\nimport {\r\n  BORDER_COLOR,\r\n  findSVGAtPoint,\r\n  getMetadata,\r\n  convertToSvgPoint\r\n} from './utils';\r\n\r\nlet _enabled = false;\r\nlet input;\r\nlet _textSize;\r\nlet _textColor;\r\n\r\n/**\r\n * Handle document.mouseup event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleDocumentMouseup(e) {\r\n  if (input || !findSVGAtPoint(e.clientX, e.clientY)) {\r\n    return;\r\n  }\r\n  if(!e.srcElement.classList.contains('annotationLayer')){\r\n    return;\r\n  }\r\n  input = document.createElement('input');\r\n  input.setAttribute('id', 'pdf-annotate-text-input');\r\n  input.setAttribute('placeholder', 'Enter text');\r\n  input.style.border = `3px solid ${BORDER_COLOR}`;\r\n  input.style.borderRadius = '3px';\r\n  input.style.position = 'absolute';\r\n  input.style.top = `${e.clientY}px`;\r\n  input.style.left = `${e.clientX}px`;\r\n  input.style.fontSize = `${_textSize}px`;\r\n  input.style.zIndex = \"41\";\r\n  input.addEventListener('blur', handleInputBlur);\r\n  input.addEventListener('keyup', handleInputKeyup);\r\n\r\n  document.body.appendChild(input);\r\n  input.focus();\r\n}\r\n\r\n/**\r\n * Handle input.blur event\r\n */\r\nfunction handleInputBlur() {\r\n  saveText();\r\n}\r\n\r\n/**\r\n * Handle input.keyup event\r\n *\r\n * @param {Event} e The DOM event to handle\r\n */\r\nfunction handleInputKeyup(e) {\r\n  if (e.keyCode === 27) {\r\n    closeInput();\r\n  } else if (e.keyCode === 13) {\r\n    saveText();\r\n  }\r\n}\r\n\r\n/**\r\n * Save a text annotation from input\r\n */\r\nfunction saveText() {\r\n  if (input.value.trim().length > 0) {\r\n    let clientX = parseInt(input.style.left, 10);\r\n    let clientY = parseInt(input.style.top, 10);\r\n    let svg = findSVGAtPoint(clientX, clientY);\r\n    if (!svg) {\r\n      return;\r\n    }\r\n    let height = _textSize;\r\n    let { documentId, pageNumber, viewport } = getMetadata(svg);\r\n    let scale = 1 / viewport.scale;\r\n    let rect = svg.getBoundingClientRect();\r\n    let pt = convertToSvgPoint([\r\n      clientX - rect.left, \r\n      clientY -  rect.top + height], svg, viewport);\r\n    let annotation = {\r\n        type: 'textbox',\r\n        size: _textSize * scale,\r\n        color: _textColor,\r\n        content: input.value.trim(),\r\n        x: pt[0],\r\n        y: pt[1],\r\n        rotation: -viewport.rotation\r\n    }\r\n\r\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\r\n      .then((annotation) => {\r\n        appendChild(svg, annotation);\r\n      });\r\n  }\r\n  \r\n  closeInput();\r\n}\r\n\r\n/**\r\n * Close the input\r\n */\r\nfunction closeInput() {\r\n  if (input) {\r\n    input.removeEventListener('blur', handleInputBlur);\r\n    input.removeEventListener('keyup', handleInputKeyup);\r\n    document.body.removeChild(input);\r\n    input = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Set the text attributes\r\n *\r\n * @param {Number} textSize The size of the text\r\n * @param {String} textColor The color of the text\r\n */\r\nexport function setText(textSize = 12, textColor = '000000') {\r\n  _textSize = parseInt(textSize, 10);\r\n  _textColor = textColor;\r\n}\r\n\r\n\r\n/**\r\n * Enable text behavior\r\n */\r\nexport function enableText() {\r\n  if (_enabled) { return; }\r\n\r\n  _enabled = true;\r\n  document.addEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\n\r\n/**\r\n * Disable text behavior\r\n */\r\nexport function disableText() {\r\n  if (!_enabled) { return; }\r\n\r\n  _enabled = false;\r\n  document.removeEventListener('mouseup', handleDocumentMouseup);\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/text.js\n **/","import PDFJSAnnotate from '../PDFJSAnnotate';\r\nimport config from '../config';\r\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\r\n\r\n// Template for creating a new page\r\nconst PAGE_TEMPLATE = `\r\n  <div style=\"visibility: hidden;\" class=\"page\" data-loaded=\"false\">\r\n    <div class=\"canvasWrapper\">\r\n      <canvas></canvas>\r\n    </div>\r\n    <div class=\"` + config.textLayerName + `\"></div>\r\n    <svg class=\"` + config.annotationLayerName + `\"></svg>\r\n  </div>\r\n`;\r\n\r\n/**\r\n * Create a new page to be appended to the DOM.\r\n *\r\n * @param {Number} pageNumber The page number that is being created\r\n * @return {HTMLElement}\r\n */\r\nexport function createPage(pageNumber) {\r\n  let temp = document.createElement('div');\r\n  temp.innerHTML = PAGE_TEMPLATE;\r\n\r\n  let page = temp.children[0];\r\n  let canvas = page.querySelector('canvas');\r\n\r\n  page.setAttribute('id', `pageContainer${pageNumber}`);\r\n  page.setAttribute('data-page-number', pageNumber);\r\n\r\n  canvas.mozOpaque = true;\r\n  canvas.setAttribute('id', `page${pageNumber}`);\r\n\r\n  return page;\r\n}\r\n\r\n/**\r\n * Render a page that has already been created.\r\n *\r\n * @param {Number} pageNumber The page number to be rendered\r\n * @param {Object} renderOptions The options for rendering\r\n * @return {Promise} Settled once rendering has completed\r\n *  A settled Promise will be either:\r\n *    - fulfilled: [pdfPage, annotations]\r\n *    - rejected: Error\r\n */\r\nexport function renderPage(pageNumber, renderOptions) {\r\n  let {\r\n    documentId,\r\n    pdfDocument,\r\n    scale,\r\n    rotate\r\n  } = renderOptions;\r\n\r\n  // Load the page and annotations\r\n  return Promise.all([\r\n    pdfDocument.getPage(pageNumber),\r\n    PDFJSAnnotate.getAnnotations(documentId, pageNumber)\r\n  ]).then(([pdfPage, annotations]) => {\r\n    let page = document.getElementById(`pageContainer${pageNumber}`);\r\n    let svg = page.querySelector(config.annotationClassQuery());\r\n    let canvas = page.querySelector('.canvasWrapper canvas');\r\n    let canvasContext = canvas.getContext('2d', {alpha: false});\r\n    let totalRotation = (rotate + pdfPage.rotate) % 360;\r\n    let viewport = pdfPage.getViewport(scale, totalRotation);\r\n    let transform = scalePage(pageNumber, viewport, canvasContext);\r\n\r\n    // Render the page\r\n    return Promise.all([\r\n      pdfPage.render({ canvasContext, viewport, transform }),\r\n      PDFJSAnnotate.render(svg, viewport, annotations)\r\n    ]).then(() => {\r\n      // Text content is needed for a11y, but is also necessary for creating\r\n      // highlight and strikeout annotations which require selecting text.\r\n      return pdfPage.getTextContent({normalizeWhitespace: true}).then((textContent) => {\r\n        return new Promise((resolve, reject) => {\r\n          // Render text layer for a11y of text content\r\n          let textLayer = page.querySelector(config.textClassQuery());\r\n          let textLayerFactory = new PDFJS.DefaultTextLayerFactory();\r\n          let textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber -1, viewport);\r\n          textLayerBuilder.setTextContent(textContent);\r\n          textLayerBuilder.render();\r\n\r\n          // Enable a11y for annotations\r\n          // Timeout is needed to wait for `textLayerBuilder.render`\r\n          setTimeout(() => {\r\n            try {\r\n              renderScreenReaderHints(annotations.annotations);\r\n              resolve();\r\n            } catch (e) {\r\n              reject(e);\r\n            }\r\n          });\r\n        });\r\n      });\r\n    }).then(() => {\r\n      // Indicate that the page was loaded\r\n      page.setAttribute('data-loaded', 'true');\r\n\r\n      return [pdfPage, annotations];\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Scale the elements of a page.\r\n *\r\n * @param {Number} pageNumber The page number to be scaled\r\n * @param {Object} viewport The viewport of the PDF page (see pdfPage.getViewport(scale, rotate))\r\n * @param {Object} context The canvas context that the PDF page is rendered to\r\n * @return {Array} The transform data for rendering the PDF page\r\n */\r\nfunction scalePage(pageNumber, viewport, context) {\r\n  let page = document.getElementById(`pageContainer${pageNumber}`);\r\n  let canvas = page.querySelector('.canvasWrapper canvas');\r\n  let svg = page.querySelector(config.annotationClassQuery());\r\n  let wrapper = page.querySelector('.canvasWrapper');\r\n  let textLayer = page.querySelector(config.textClassQuery());\r\n  let outputScale = getOutputScale(context);\r\n  let transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\r\n  let sfx = approximateFraction(outputScale.sx);\r\n  let sfy = approximateFraction(outputScale.sy);\r\n\r\n  // Adjust width/height for scale\r\n  page.style.visibility = '';\r\n  canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\r\n  canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\r\n  canvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\r\n  canvas.style.height = roundToDivide(viewport.height, sfx[1]) + 'px';\r\n  svg.setAttribute('width', viewport.width);\r\n  svg.setAttribute('height', viewport.height);\r\n  svg.style.width = `${viewport.width}px`;\r\n  svg.style.height = `${viewport.height}px`;\r\n  page.style.width = `${viewport.width}px`;\r\n  page.style.height = `${viewport.height}px`;\r\n  wrapper.style.width = `${viewport.width}px`;\r\n  wrapper.style.height = `${viewport.height}px`;\r\n  textLayer.style.width = `${viewport.width}px`;\r\n  textLayer.style.height = `${viewport.height}px`;\r\n\r\n  return transform;\r\n}\r\n\r\n\r\n/**\r\n * Approximates a float number as a fraction using Farey sequence (max order of 8).\r\n *\r\n * @param {Number} x Positive float number\r\n * @return {Array} Estimated fraction: the first array item is a numerator,\r\n *                 the second one is a denominator.\r\n */\r\nfunction approximateFraction(x) {\r\n  // Fast path for int numbers or their inversions.\r\n  if (Math.floor(x) === x) {\r\n    return [x, 1];\r\n  }\r\n\r\n  const xinv = 1 / x;\r\n  const limit = 8;\r\n  if (xinv > limit) {\r\n    return [1, limit];\r\n  } else if (Math.floor(xinv) === xinv) {\r\n    return [1, xinv];\r\n  }\r\n\r\n  const x_ = x > 1 ? xinv : x;\r\n  \r\n  // a/b and c/d are neighbours in Farey sequence.\r\n  let a = 0, b = 1, c = 1, d = 1;\r\n  \r\n  // Limit search to order 8.\r\n  while (true) {\r\n    // Generating next term in sequence (order of q).\r\n    let p = a + c, q = b + d;\r\n    if (q > limit) {\r\n      break;\r\n    }\r\n    if (x_ <= p / q) {\r\n      c = p; d = q;\r\n    } else {\r\n      a = p; b = q;\r\n    }\r\n  }\r\n\r\n  // Select closest of neighbours to x.\r\n  if (x_ - a / b < c / d - x_) {\r\n    return x_ === x ? [a, b] : [b, a];\r\n  } else {\r\n    return x_ === x ? [c, d] : [d, c];\r\n  }\r\n}\r\n\r\nfunction getOutputScale(ctx) {\r\n  let devicePixelRatio = window.devicePixelRatio || 1;\r\n  let backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\r\n                          ctx.mozBackingStorePixelRatio ||\r\n                          ctx.msBackingStorePixelRatio ||\r\n                          ctx.oBackingStorePixelRatio ||\r\n                          ctx.backingStorePixelRatio || 1;\r\n  let pixelRatio = devicePixelRatio / backingStoreRatio;\r\n  return {\r\n    sx: pixelRatio,\r\n    sy: pixelRatio,\r\n    scaled: pixelRatio !== 1\r\n  };\r\n}\r\n\r\nfunction roundToDivide(x, div) {\r\n  let r = x % div;\r\n  return r === 0 ? x : Math.round(x - r + div);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UI/page.js\n **/"],"sourceRoot":""}