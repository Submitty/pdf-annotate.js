{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2b6c5ed9fbef71928c7c","webpack:///./src/PDFJSAnnotate.js","webpack:///./src/UI/utils.js","webpack:///./src/render/appendChild.js","webpack:///./src/config.js","webpack:///./src/utils/setAttributes.js","webpack:///./src/utils/normalizeColor.js","webpack:///./src/UI/event.js","webpack:///./src/a11y/renderScreenReaderHints.js","webpack:///./src/adapter/StoreAdapter.js","webpack:///./src/utils/mathUtils.js","webpack:///./src/utils/uuid.js","webpack:///./src/a11y/insertScreenReaderHint.js","webpack:///./src/a11y/insertElementWithinElement.js","webpack:///./src/a11y/renderScreenReaderComments.js","webpack:///./src/a11y/insertScreenReaderComment.js","webpack:///./index.js","webpack:///./src/utils/abstractFunction.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/create-stylesheet/index.js","webpack:///./node_modules/object-assign/index.js","webpack:///./src/render/renderLine.js","webpack:///./src/render/renderPath.js","webpack:///./src/render/renderPoint.js","webpack:///./src/render/renderRect.js","webpack:///./src/render/renderText.js","webpack:///./src/render/renderCircle.js","webpack:///./src/render/renderArrow.js","webpack:///./src/adapter/LocalStoreAdapter.js","webpack:///./src/render/index.js","webpack:///./src/a11y/createScreenReaderOnly.js","webpack:///./src/a11y/insertElementWithinChildren.js","webpack:///./src/a11y/initEventHandlers.js","webpack:///./src/UI/index.js","webpack:///./src/UI/edit.js","webpack:///./src/UI/pen.js","webpack:///./src/UI/arrow.js","webpack:///./src/UI/eraser.js","webpack:///./src/UI/point.js","webpack:///./src/UI/rect.js","webpack:///./src/UI/circle.js","webpack:///./src/UI/text.js","webpack:///./src/UI/page.js"],"names":["findAnnotationAtPoint","findSVGContainer","convertToScreenPoint","StoreAdapter","LocalStoreAdapter","__storeAdapter","getStoreAdapter","setStoreAdapter","adapter","UI","render","getAnnotations","documentId","userId","pageNumber","arguments","config","uuid","findSVGAtPoint","pointIntersectsRect","getOffsetAnnotationRect","scaleUp","convertToSvgRect","convertToSvgPoint","scaleDown","getScroll","getOffset","disableUserSelect","enableUserSelect","getMetadata","BORDER_COLOR","userSelectStyleSheet","body","setAttribute","node","parentNode","document","nodeName","toUpperCase","getAttribute","x","y","elements","querySelectorAll","i","l","length","el","rect","getBoundingClientRect","candidate","elementFromPoint","type","top","bottom","left","right","width","height","extraOffsetWidth","extraOffsetHeight","indexOf","tagName","toLowerCase","getBBox","bbox","offsetLeft","offsetTop","svg","result","viewport","Object","keys","forEach","key","scale","pt1","pt2","Math","min","abs","pt","xform","rotation","offset","scrollTop","scrollLeft","head","appendChild","removeChild","parseInt","JSON","parse","getTranslation","transformChild","isFirefox","test","navigator","userAgent","transform","trans","path","querySelector","n","annotation","child","annotationLayerName","textLayerName","annotationSvgQuery","annotationClassQuery","textClassQuery","setAttributes","UPPER_REGEX","BLACKLIST","keyCase","replace","match","attributes","normalizeColor","REGEX_HASHLESS_HEX","color","fireEvent","addEventListener","removeEventListener","emitter","EventEmitter","clickNode","handleDocumentClick","e","clientX","clientY","target","emit","on","removeListener","renderScreenReaderHints","annotations","Array","isArray","SORT_TYPES","sortBy","filter","a","sort","sortByPoint","b","sortByRectPoint","rectangles","sortByLinePoint","lineA","lines","lineB","definition","annotationId","content","commentId","__getAnnotations","fn","then","__addAnnotation","addAnnotation","__editAnnotation","editAnnotation","__deleteAnnotation","deleteAnnotation","success","__addComment","addComment","comment","__deleteComment","deleteComment","applyTransform","applyInverseTransform","translate","rotate","makePoint","makeVector","makeVectorFromPoints","addVector","multiplyVector","magnitude","negateVector","unitVector","crossProduct","p","m","xt","yt","d","m1","m2","angle","PI","cosValue","cos","sinValue","sin","getInverseTransform","z","xcoord","ycoord","zcoord","v","scalar","sqrt","pow","mag","u","REGEXP","PATTERN","replacement","c","r","random","toString","insertScreenReaderHint","COMMENT_TYPES","num","rects","first","last","page","text","x2","cx","y2","cy","includes","insertElementWithinElement","insertBefore","OFFSET_ADJUST","max","textLayerElementFromPoint","temp","cloneNode","innerHTML","split","tail","style","position","unshift","pop","join","outerHTML","renderScreenReaderComments","comments","promise","Promise","resolve","PDFJSAnnotate","getComments","getElementById","list","createElement","insertScreenReaderComment","item","createTextNode","abstractFunction","name","Error","renderLine","group","createElementNS","stroke","strokeWidth","line","x1","y1","renderPath","push","p1","p2","fill","renderPoint","SIZE","D","outerSVG","innerSVG","viewBox","renderRect","fillOpacity","createRect","renderText","fontSize","size","g","renderCircle","circle","createCircle","renderArrow","arrow","arrowLength","pt0","unitX","unitZ","unitY","thickness","A","B","C","G","F","E","points","reject","getAllAnnotations","class","getAnnotation","findAnnotation","updateAnnotations","index","splice","_userId","all_annotations","localStorage","getItem","setItem","stringify","data","removeAttribute","createScreenReaderOnly","overflow","insertElementWithinChildren","nodes","textLayer","textRect","initEventHandlers","reorderAnnotationsByType","removeAnnotation","insertComment","removeComment","removeElementById","elementId","disableEdit","enableEdit","disablePen","enablePen","setPen","disablePoint","enablePoint","disableRect","enableRect","disableCircle","enableCircle","setCircle","addCircle","disableArrow","enableArrow","setArrow","disableEraser","enableEraser","disableText","enableText","setText","createPage","renderPage","_enabled","isDragging","overlay","dragOffsetX","dragOffsetY","dragStartX","dragStartY","OVERLAY_BORDER_SIZE","createEditOverlay","destroyEditOverlay","anchor","id","styleLeft","styleTop","boxSizing","border","borderRadius","zIndex","background","padding","textAlign","textDecoration","handleDocumentKeyup","handleDocumentMousedown","borderColor","boxShadow","display","handleDocumentMousemove","handleDocumentMouseup","keyTest","keyCode","preventDefault","cursor","minY","maxY","minX","maxX","offsetHeight","offsetWidth","attribX","attribY","modelStart","modelEnd","modelDelta","firstChild","t","modelX","modelY","setTimeout","handleAnnotationClick","_candraw","_penSize","_penColor","handleDocumentPointerdown","handleDocumentPointerupChrome","saveToStorage","changedTouches","handleDocumentPointerup","handleDocumentPointermove","srcElement","classList","contains","savePoint","point","toFixed","penSize","penColor","originY","originX","event","_canerase","handleDocumentDown","handleDocumentUp","handleDocumentMouseMove","erase","parentElement","input","handleInputBlur","handleInputKeyup","focus","closeInput","value","trim","assign","_type","getSelectionRects","selection","window","getSelection","range","getRangeAt","getClientRects","saveRect","map","removeAllRanges","boundingRect","_circleRadius","_circleColor","circleRadius","circleColor","saveCircle","radius","svg_pt","oldType","_textSize","_textColor","saveText","textSize","textColor","PAGE_TEMPLATE","children","canvas","mozOpaque","renderOptions","pdfDocument","all","getPage","pdfPage","canvasContext","getContext","alpha","totalRotation","getViewport","scalePage","getTextContent","normalizeWhitespace","textContent","textLayerFactory","PDFJS","DefaultTextLayerFactory","textLayerBuilder","createTextLayerBuilder","setTextContent","context","wrapper","outputScale","getOutputScale","scaled","sx","sy","sfx","approximateFraction","sfy","visibility","roundToDivide","floor","xinv","limit","x_","q","ctx","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","div","round"],"mappings":"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A1B,EAAgC;AAC7C,QAAM,IAAIC,KAAJ,CAAUD,OAAO,qBAAjB,CAAN;AACD;;;;;;;;ACPD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;;;;;;;AC/bA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,2CAA2C;AAClE;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;;AAEA;AACA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","file":"dist/pdf-annotate.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnotate\"] = factory();\n\telse\n\t\troot[\"PDFAnnotate\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2b6c5ed9fbef71928c7c","import StoreAdapter from './adapter/StoreAdapter';\nimport LocalStoreAdapter from './adapter/LocalStoreAdapter';\nimport render from './render';\nimport UI from './UI';\nimport config from './config';\nimport uuid from './utils/uuid';\nimport { \n  findAnnotationAtPoint, \n  findSVGContainer,\n  convertToScreenPoint\n} from './UI/utils';\n\nexport default {\n  findAnnotationAtPoint,\n  findSVGContainer,\n  convertToScreenPoint,\n\n  /**\n   * Abstract class that needs to be defined so PDFJSAnnotate\n   * knows how to communicate with your server.\n   */\n  StoreAdapter,\n\n  /**\n   * Implementation of StoreAdapter that stores annotation data to localStorage.\n   */\n  LocalStoreAdapter,\n\n  /**\n   * Abstract instance of StoreAdapter\n   */\n  __storeAdapter: new StoreAdapter(),\n\n  /**\n   * Getter for the underlying StoreAdapter property\n   *\n   * @return {StoreAdapter}\n   */\n  getStoreAdapter() {\n    return this.__storeAdapter;\n  },\n\n  /**\n   * Setter for the underlying StoreAdapter property\n   *\n   * @param {StoreAdapter} adapter The StoreAdapter implementation to be used.\n   */\n  setStoreAdapter(adapter) {\n    // TODO this throws an error when bundled\n    // if (!(adapter instanceof StoreAdapter)) {\n    //   throw new Error('adapter must be an instance of StoreAdapter');\n    // }\n\n    this.__storeAdapter = adapter;\n  },\n\n  /**\n   * UI is a helper for instrumenting UI interactions for creating,\n   * editing, and deleting annotations in the browser.\n   */\n  UI,\n\n  /**\n   * Render the annotations for a page in the PDF Document\n   *\n   * @param {SVGElement} svg The SVG element that annotations should be rendered to\n   * @param {PageViewport} viewport The PDFPage.getViewport data\n   * @param {Object} data The StoreAdapter.getAnnotations data\n   * @return {Promise}\n   */\n  render,\n\n  /**\n   * Convenience method for getting annotation data\n   *\n   * @alias StoreAdapter.getAnnotations\n   * @param {String} documentId The ID of the document\n   * @param {String} pageNumber The page number\n   * @return {Promise}\n   */\n  getAnnotations(documentId, userId, pageNumber) {\n    return this.getStoreAdapter().getAnnotations(...arguments);\n  },\n\n  config,\n\n  uuid\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/PDFJSAnnotate.js","import createStyleSheet from 'create-stylesheet';\nimport { getTranslation } from '../render/appendChild';\nimport {\n  applyTransform,\n  applyInverseTransform,\n  translate,\n  rotate,\n  scale\n} from '../utils/mathUtils';\n\n\nexport const BORDER_COLOR = '#00BFFF';\n\nconst userSelectStyleSheet = createStyleSheet({\n  body: {\n    '-webkit-user-select': 'none',\n       '-moz-user-select': 'none',\n        '-ms-user-select': 'none',\n            'user-select': 'none'\n  }\n});\nuserSelectStyleSheet.setAttribute('data-pdf-annotate-user-select', 'true');\n\n/**\n * Find the SVGElement that contains all the annotations for a page\n *\n * @param {Element} node An annotation within that container\n * @return {SVGElement} The container SVG or null if it can't be found\n */\nexport function findSVGContainer(node) {\n  let parentNode = node;\n\n  while ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n    if (parentNode.nodeName.toUpperCase() === 'SVG' &&\n        parentNode.getAttribute('data-pdf-annotate-container') === 'true') {\n      return parentNode;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Find an SVGElement container at a given point\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @return {SVGElement} The container SVG or null if one can't be found\n */\nexport function findSVGAtPoint(x, y) {\n  let elements = document.querySelectorAll('svg[data-pdf-annotate-container=\"true\"]');\n\n  for (let i=0, l=elements.length; i<l; i++) {\n    let el = elements[i];\n    let rect = el.getBoundingClientRect();\n\n    if (pointIntersectsRect(x, y, rect)) {\n      return el;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Find an Element that represents an annotation at a given point.\n *\n * IMPORTANT: Requires the annotation layer to be the top most element so\n *            either use z-ordering or make it the leaf container.\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @return {Element} The annotation element or null if one can't be found\n */\nexport function findAnnotationAtPoint(x, y) {\n  let el = null;\n  var candidate = document.elementFromPoint(x, y)\n  while (!el && candidate && candidate !== document) {\n    let type = candidate.getAttribute('data-pdf-annotate-type');\n    if (type) {\n      el = candidate;\n    }\n    candidate = candidate.parentNode;\n  }\n  return el;\n}\n\n/**\n * Determine if a point intersects a rect\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Object} rect The points of a rect (likely from getBoundingClientRect)\n * @return {Boolean} True if a collision occurs, otherwise false\n */\nexport function pointIntersectsRect(x, y, rect) {\n  return y >= rect.top && y <= rect.bottom && x >= rect.left && x <= rect.right;\n}\n\n/**\n * Get the rect of an annotation element accounting for offset.\n *\n * @param {Element} el The element to get the rect of\n * @return {Object} The dimensions of the element\n */\nexport function getOffsetAnnotationRect(el) {\n  let rect = el.getBoundingClientRect();\n  let { width, height } = rect;\n  let extraOffsetWidth = 0;\n  let extraOffsetHeight = 0;\n  if (['line', 'path'].indexOf(el.tagName.toLowerCase()) > -1 && el.getBBox) {\n    let bbox = el.getBBox();\n    extraOffsetWidth = (rect.width - bbox.width) / 2;\n    extraOffsetHeight = (rect.height - bbox.height) / 2;\n    width = bbox.width;\n    height = bbox.height;\n  }\n  let { offsetLeft, offsetTop } = getOffset(el);\n  return {\n    top: rect.top - offsetTop + extraOffsetHeight,\n    left: rect.left - offsetLeft + extraOffsetWidth,\n    bottom: rect.bottom - offsetTop - extraOffsetHeight,\n    right: rect.right - offsetLeft - extraOffsetWidth,\n    width: width,\n    height: height\n  };\n}\n\n/**\n * Adjust scale from normalized scale (100%) to rendered scale.\n *\n * @param {SVGElement} svg The SVG to gather metadata from\n * @param {Object} rect A map of numeric values to scale\n * @return {Object} A copy of `rect` with values scaled up\n */\nexport function scaleUp(svg, rect) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  Object.keys(rect).forEach((key) => {\n    result[key] = rect[key] * viewport.scale;\n  });\n\n  return result;\n}\n\nexport function convertToSvgRect(rect, svg, viewport) {\n  var pt1 = [rect.x, rect.y];\n  var pt2 = [rect.x + rect.width, rect.y + rect.height];\n\n  pt1 = convertToSvgPoint(pt1, svg, viewport);\n  pt2 = convertToSvgPoint(pt2, svg, viewport);\n\n  return {\n    x: Math.min(pt1[0], pt2[0]),\n    y: Math.min(pt1[1], pt2[1]),\n    width: Math.abs(pt2[0] - pt1[0]),\n    height: Math.abs(pt2[1] - pt1[1])\n  };\n}\n\nexport function convertToSvgPoint(pt, svg, viewport) {\n  let result = {};\n  viewport = viewport || getMetadata(svg).viewport;\n\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\n  xform = scale(xform, viewport.scale, viewport.scale);\n  xform = rotate(xform, viewport.rotation);\n\n  let offset = getTranslation(viewport);\n  xform = translate(xform, offset.x, offset.y);\n\n  return applyInverseTransform(pt, xform);\n}\n\nexport function convertToScreenPoint(pt, svg, viewport) {\n  let result = {};\n  viewport = viewport || getMetadata(svg).viewport;\n\n  let xform = [ 1, 0, 0, 1, 0, 0 ];\n  xform = scale(xform, viewport.scale, viewport.scale);\n  xform = rotate(xform, viewport.rotation);\n\n  let offset = getTranslation(viewport);\n  xform = translate(xform, offset.x, offset.y);\n\n  return applyTransform(pt, xform);\n}\n\n/**\n * Adjust scale from rendered scale to a normalized scale (100%).\n *\n * @param {SVGElement} svg The SVG to gather metadata from\n * @param {Object} rect A map of numeric values to scale\n * @return {Object} A copy of `rect` with values scaled down\n */\nexport function scaleDown(svg, rect) {\n  let result = {};\n  let { viewport } = getMetadata(svg);\n\n  Object.keys(rect).forEach((key) => {\n    result[key] = rect[key] / viewport.scale;\n  });\n\n  return result;\n}\n\n/**\n * Get the scroll position of an element, accounting for parent elements\n *\n * @param {Element} el The element to get the scroll position for\n * @return {Object} The scrollTop and scrollLeft position\n */\nexport function getScroll(el) {\n  let scrollTop = 0;\n  let scrollLeft = 0;\n  let parentNode = el;\n\n  while ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n    scrollTop += parentNode.scrollTop;\n    scrollLeft += parentNode.scrollLeft;\n  }\n\n  return { scrollTop, scrollLeft };\n}\n\n/**\n * Get the offset position of an element, accounting for parent elements\n *\n * @param {Element} el The element to get the offset position for\n * @return {Object} The offsetTop and offsetLeft position\n */\nexport function getOffset(el) {\n  let parentNode = el;\n\n  while ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n    if (parentNode.nodeName.toUpperCase() === 'SVG') {\n      break;\n    }\n  }\n\n  let rect = parentNode.getBoundingClientRect();\n\n  return { offsetLeft: rect.left, offsetTop: rect.top };\n}\n\n/**\n * Disable user ability to select text on page\n */\nexport function disableUserSelect() {\n  if (!userSelectStyleSheet.parentNode) {\n    document.head.appendChild(userSelectStyleSheet);\n  }\n}\n\n\n/**\n * Enable user ability to select text on page\n */\nexport function enableUserSelect() {\n  if (userSelectStyleSheet.parentNode) {\n    userSelectStyleSheet.parentNode.removeChild(userSelectStyleSheet);\n  }\n}\n\n/**\n * Get the metadata for a SVG container\n *\n * @param {SVGElement} svg The SVG container to get metadata for\n */\nexport function getMetadata(svg) {\n  return {\n    documentId: svg.getAttribute('data-pdf-annotate-document'),\n    userId: svg.getAttribute('data-pdf-annotate-user'),\n    pageNumber: parseInt(svg.getAttribute('data-pdf-annotate-page'), 10),\n    viewport: JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'))\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/utils.js","import objectAssign from 'object-assign';\nimport renderLine from './renderLine';\nimport renderPath from './renderPath';\nimport renderPoint from './renderPoint';\nimport renderRect from './renderRect';\nimport renderText from './renderText';\nimport renderCircle from './renderCircle';\nimport renderArrow from './renderArrow';\n\nconst isFirefox = /firefox/i.test(navigator.userAgent);\n\n/**\n * Get the x/y translation to be used for transforming the annotations\n * based on the rotation of the viewport.\n *\n * @param {Object} viewport The viewport data from the page\n * @return {Object}\n */\nexport function getTranslation(viewport) {\n  let x;\n  let y;\n\n  // Modulus 360 on the rotation so that we only\n  // have to worry about four possible values.\n  switch(viewport.rotation % 360) {\n    case 0:\n      x = y = 0;\n      break;\n    case 90:\n      x = 0;\n      y = (viewport.width / viewport.scale) * -1;\n      break;\n    case 180:\n      x = (viewport.width / viewport.scale) * -1;\n      y = (viewport.height / viewport.scale) * -1;\n      break;\n    case 270:\n      x = (viewport.height / viewport.scale) * -1;\n      y = 0;\n      break;\n  }\n\n  return { x, y };\n}\n\n/**\n * Transform the rotation and scale of a node using SVG's native transform attribute.\n *\n * @param {Node} node The node to be transformed\n * @param {Object} viewport The page's viewport data\n * @return {Node}\n */\nfunction transform(node, viewport) {\n  let trans = getTranslation(viewport);\n\n  // Let SVG natively transform the element\n  node.setAttribute('transform', `scale(${viewport.scale}) rotate(${viewport.rotation}) translate(${trans.x}, ${trans.y})`);\n  \n  // Manually adjust x/y for nested SVG nodes\n  if (!isFirefox && node.nodeName.toLowerCase() === 'svg') {\n    node.setAttribute('x', parseInt(node.getAttribute('x'), 10) * viewport.scale);\n    node.setAttribute('y', parseInt(node.getAttribute('y'), 10) * viewport.scale);\n\n    let x = parseInt(node.getAttribute('x', 10));\n    let y = parseInt(node.getAttribute('y', 10));\n    let width = parseInt(node.getAttribute('width'), 10);\n    let height = parseInt(node.getAttribute('height'), 10);\n    let path = node.querySelector('path');\n    let svg = path.parentNode;\n   \n    // Scale width/height\n    [node, svg, path, node.querySelector('rect')].forEach((n) => {\n      n.setAttribute('width', parseInt(n.getAttribute('width'), 10) * viewport.scale);\n      n.setAttribute('height', parseInt(n.getAttribute('height'), 10) * viewport.scale);\n    });\n\n    // Transform path but keep scale at 100% since it will be handled natively\n    transform(path, objectAssign({}, viewport, { scale: 1 }));\n    \n    switch(viewport.rotation % 360) {\n      case 90:\n        node.setAttribute('x', viewport.width - y - width);\n        node.setAttribute('y', x);\n        svg.setAttribute('x', 1);\n        svg.setAttribute('y', 0);\n        break;\n      case 180:\n        node.setAttribute('x', viewport.width - x - width);\n        node.setAttribute('y', viewport.height - y - height);\n        svg.setAttribute('y', 2);\n        break;\n      case 270:\n        node.setAttribute('x', y);\n        node.setAttribute('y', viewport.height - x - height);\n        svg.setAttribute('x', -1);\n        svg.setAttribute('y', 0);\n        break;\n    }\n  }\n\n  return node;\n}\n\n/**\n * Append an annotation as a child of an SVG.\n *\n * @param {SVGElement} svg The SVG element to append the annotation to\n * @param {Object} annotation The annotation definition to render and append\n * @param {Object} viewport The page's viewport data\n * @return {SVGElement} A node that was created and appended by this function\n */\nexport function appendChild(svg, annotation, viewport) {\n  if (!viewport) {\n    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n  }\n  \n  let child;\n  switch (annotation.type) {\n    case 'area':\n    case 'highlight':\n      child = renderRect(annotation);\n      break;\n    case 'circle':\n    case 'fillcircle':\n    case 'emptycircle':\n      child = renderCircle(annotation);\n      break;\n    case 'strikeout':\n      child = renderLine(annotation);\n      break;\n    case 'point':\n      child = renderPoint(annotation);\n      break;\n    case 'textbox':\n      child = renderText(annotation);\n      break;\n    case 'drawing':\n      child = renderPath(annotation);\n      break;\n    case 'arrow':\n      child = renderArrow(annotation);\n      break;\n  }\n\n  // If no type was provided for an annotation it will result in node being null.\n  // Skip appending/transforming if node doesn't exist.\n  if (child) {\n    // Set attributes\n    child.setAttribute('data-pdf-annotate-id', annotation.uuid);\n    child.setAttribute('data-pdf-annotate-type', annotation.type);\n    child.setAttribute('data-pdf-annotate-userId', annotation.userId);\n    child.setAttribute('aria-hidden', true);\n\n    svg.appendChild(transform(child, viewport));\n  }\n\n  return child;\n}\n\n/**\n * Transform a child annotation of an SVG.\n *\n * @param {SVGElement} svg The SVG element with the child annotation\n * @param {Object} child The SVG child to transform\n * @param {Object} viewport The page's viewport data\n * @return {SVGElement} A node that was transformed by this function\n */\nexport function transformChild(svg, child, viewport) {\n  if (!viewport) {\n    viewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n  }\n\n  // If no type was provided for an annotation it will result in node being null.\n  // Skip transforming if node doesn't exist.\n  if (child) {\n    child = transform(child, viewport);\n  }\n\n  return child;\n}\n\nexport default {\n  /**\n   * Get the x/y translation to be used for transforming the annotations\n   * based on the rotation of the viewport.\n   */\n  getTranslation,\n  \n  /**\n   * Append an SVG child for an annotation\n   */\n  appendChild,\n\n  /**\n   * Transform an existing SVG child\n   */  \n  transformChild\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/appendChild.js","export default {\n    annotationLayerName: 'annotationLayer',\n    textLayerName: 'textLayer',\n    annotationSvgQuery: function () {\n        return 'svg.' + this.annotationLayerName;\n    },\n    annotationClassQuery: function () {\n        return '.' + this.annotationLayerName;\n    },\n    textClassQuery: function () {\n        return '.' + this.textLayerName;\n    }    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","const UPPER_REGEX = /[A-Z]/g;\n\n// Don't convert these attributes from camelCase to hyphenated-attributes\nconst BLACKLIST = [\n  'viewBox'\n];\n\nlet keyCase = (key) => {\n  if (BLACKLIST.indexOf(key) === -1) {\n    key = key.replace(UPPER_REGEX, match => '-' + match.toLowerCase());\n  }\n  return key;\n}\n\n/**\n * Set attributes for a node from a map\n *\n * @param {Node} node The node to set attributes on\n * @param {Object} attributes The map of key/value pairs to use for attributes\n */\nexport default function setAttributes(node, attributes) {\n  Object.keys(attributes).forEach((key) => {\n    node.setAttribute(keyCase(key), attributes[key]);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/setAttributes.js","const REGEX_HASHLESS_HEX = /^([a-f0-9]{6}|[a-f0-9]{3})$/i;\n\n/**\n * Normalize a color value\n *\n * @param {String} color The color to normalize\n * @return {String}\n */\nexport default function normalizeColor(color) {\n  if (REGEX_HASHLESS_HEX.test(color)) {\n    color = `#${color}`;\n  }\n  return color;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/normalizeColor.js","import EventEmitter from 'events';\nimport {\n  findAnnotationAtPoint,\n  findSVGAtPoint\n} from './utils';\n\nconst emitter = new EventEmitter;\n\nlet clickNode;\n\n/**\n * Handle document.click event\n *\n * @param {Event} e The DOM event to be handled\n */\ndocument.addEventListener('click', function handleDocumentClick(e) {\n  if (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\n\n  let target = findAnnotationAtPoint(e.clientX, e.clientY);\n\n  // Emit annotation:blur if clickNode is no longer clicked\n  if (clickNode && clickNode !== target) {\n    emitter.emit('annotation:blur', clickNode);\n  }\n\n  // Emit annotation:click if target was clicked\n  if (target) {\n    emitter.emit('annotation:click', target);\n  }\n\n  clickNode = target;\n});\n\n// let mouseOverNode;\n// document.addEventListener('mousemove', function handleDocumentMousemove(e) {\n//   let target = findAnnotationAtPoint(e.clientX, e.clientY);\n//\n//   // Emit annotation:mouseout if target was mouseout'd\n//   if (mouseOverNode && !target) {\n//     emitter.emit('annotation:mouseout', mouseOverNode);\n//   }\n//\n//   // Emit annotation:mouseover if target was mouseover'd\n//   if (target && mouseOverNode !== target) {\n//     emitter.emit('annotation:mouseover', target);\n//   }\n//\n//   mouseOverNode = target;\n// });\n\nexport function fireEvent() { emitter.emit(...arguments); };\nexport function addEventListener() { emitter.on(...arguments); };\nexport function removeEventListener() { emitter.removeListener(...arguments); };\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/event.js","import insertScreenReaderHint from './insertScreenReaderHint';\nimport initEventHandlers from './initEventHandlers';\n\n// TODO This is not the right place for this to live\ninitEventHandlers();\n\n/**\n * Insert hints into the DOM for screen readers.\n *\n * @param {Array} annotations The annotations that hints are inserted for\n */\nexport default function renderScreenReaderHints(annotations) {\n  annotations = Array.isArray(annotations) ? annotations : [];\n\n  // Insert hints for each type\n  Object.keys(SORT_TYPES).forEach((type) => {\n    let sortBy = SORT_TYPES[type];\n    annotations\n      .filter((a) => a.type === type)\n      .sort(sortBy)\n      .forEach((a, i) => insertScreenReaderHint(a, i + 1));\n  });\n}\n\n// Sort annotations first by y, then by x.\n// This allows hints to be injected in the order they appear,\n// which makes numbering them easier.\nfunction sortByPoint(a, b) {\n  if (a.y < b.y) {\n    return a.x - b.x;\n  } else {\n    return 1;\n  }\n}\n\n// Sort annotation by it's first rectangle\nfunction sortByRectPoint(a, b) {\n  return sortByPoint(a.rectangles[0], b.rectangles[0]);\n}\n\n// Sort annotation by it's first line\nfunction sortByLinePoint(a, b) {\n  let lineA = a.lines[0];\n  let lineB = b.lines[0];\n  return sortByPoint(\n    {x: lineA[0], y: lineA[1]},\n    {x: lineB[0], y: lineB[1]}\n  );\n}\n\n// Arrange supported types and associated sort methods\nconst SORT_TYPES = {\n  'highlight': sortByRectPoint,\n  'strikeout': sortByRectPoint,\n  'drawing': sortByLinePoint,\n  'textbox': sortByPoint,\n  'point': sortByPoint,\n  'area': sortByPoint\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/renderScreenReaderHints.js","import abstractFunction from '../utils/abstractFunction';\nimport { fireEvent } from '../UI/event';\n\n// Adapter should never be invoked publicly\nexport default class StoreAdapter {\n  /**\n   * Create a new StoreAdapter instance\n   *\n   * @param {Object} [definition] The definition to use for overriding abstract methods\n   */\n  constructor(definition = {}) {\n    // Copy each function from definition if it is a function we know about\n    Object.keys(definition).forEach((key) => {\n      if (typeof definition[key] === 'function' &&\n          typeof this[key] === 'function') {\n        this[key] = definition[key];\n      }\n    });\n  }\n\n  /**\n   * Get all the annotations for a given document and page number.\n   *\n   * @param {String} documentId The ID for the document the annotations belong to\n   * @param {String} userId The user makeing changes to this document\n   * @param {Number} pageNumber The number of the page the annotations belong to\n   * @return {Promise}\n   */\n  __getAnnotations(documentId, userId, pageNumber) { abstractFunction('getAnnotations'); }\n  get getAnnotations() { return this.__getAnnotations; }\n  set getAnnotations(fn) {\n    this.__getAnnotations = function getAnnotations(documentId, userId, pageNumber) {\n      return fn(...arguments).then((annotations) => {\n        // TODO may be best to have this happen on the server\n        if (annotations.annotations) {\n          annotations.annotations.forEach((a) => {\n            a.documentId = documentId;\n          });\n        }\n        return annotations;\n      });\n    };\n  }\n\n  /**\n   * Get the definition for a specific annotation.\n   *\n   * @param {String} documentId The ID for the document the annotation belongs to\n   * @param {String} userId\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n  getAnnotation(documentId, userId, annotationId) { abstractFunction('getAnnotation'); }\n\n  /**\n   * Add an annotation\n   *\n   * @param {String} documentId The ID for the document to add the annotation to\n   * @param {String} userId The ID of the user\n   * @param {String} pageNumber The page number to add the annotation to\n   * @param {Object} annotation The definition for the new annotation\n   * @return {Promise}\n   */\n  __addAnnotation(documentId, userId, pageNumber, annotation) { abstractFunction('addAnnotation'); }\n  get addAnnotation() { return this.__addAnnotation; }\n  set addAnnotation(fn) {\n    this.__addAnnotation = function addAnnotation(documentId, userId, pageNumber, annotation) {\n      return fn(...arguments).then((annotation) => {\n        fireEvent('annotation:add', documentId, userId, pageNumber, annotation);\n        return annotation;\n      });\n    };\n  }\n\n  /**\n   * Edit an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} userId The Id of the user\n   * @param {String} pageNumber the page number of the annotation\n   * @param {Object} annotation The definition of the modified annotation\n   * @return {Promise}\n   */\n  __editAnnotation(documentId, userId, pageNumber, annotation) { abstractFunction('editAnnotation'); }\n  get editAnnotation() { return this.__editAnnotation; }\n  set editAnnotation(fn) {\n    this.__editAnnotation = function editAnnotation(documentId, userId, annotationId, annotation) {\n      return fn(...arguments).then((annotation) => {\n        fireEvent('annotation:edit', documentId, userId, annotationId, annotation);\n        return annotation;\n      });\n    };\n  }\n\n  /**\n   * Delete an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} userId\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n  __deleteAnnotation(documentId, userId, annotationId) { abstractFunction('deleteAnnotation'); }\n  get deleteAnnotation() { return this.__deleteAnnotation; }\n  set deleteAnnotation(fn) {\n    this.__deleteAnnotation = function deleteAnnotation(documentId, userId, annotationId) {\n      return fn(...arguments).then((success) => {\n        if (success) {\n          fireEvent('annotation:delete', documentId, userId, annotationId);\n        }\n        return success;\n      });\n    };\n  }\n\n  /**\n   * Get all the comments for an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} userId\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n  getComments(documentId, userId, annotationId) { abstractFunction('getComments'); }\n\n  /**\n   * Add a new comment\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} userId\n   * @param {String} annotationId The ID for the annotation\n   * @param {Object} content The definition of the comment\n   * @return {Promise}\n   */\n  __addComment(documentId, userId, annotationId, content) { abstractFunction('addComment'); }\n  get addComment() { return this.__addComment; }\n  set addComment(fn) {\n    this.__addComment = function addComment(documentId, userId, annotationId, content) {\n      return fn(...arguments).then((comment) => {\n        fireEvent('comment:add', documentId, userId, annotationId, comment);\n        return comment;\n      });\n    };\n  }\n\n  /**\n   * Delete a comment\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} userId\n   * @param {String} commentId The ID for the comment\n   * @return {Promise}\n   */\n  __deleteComment(documentId, userId, commentId) { abstractFunction('deleteComment'); }\n  get deleteComment() { return this.__deleteComment; }\n  set deleteComment(fn) {\n    this.__deleteComment = function deleteComment(documentId, userId, commentId) {\n      return fn(...arguments).then((success) => {\n        if (success) {\n          fireEvent('comment:delete', documentId, commentId);\n        }\n        return success;\n      });\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapter/StoreAdapter.js","// Transform point by matrix\n//\nexport function applyTransform(p, m) {\n  var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n  var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n  return [xt, yt];\n};\n\n// Transform point by matrix inverse\n//\nexport function applyInverseTransform(p, m) {\n  var d = m[0] * m[3] - m[1] * m[2];\n  var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n  var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  return [xt, yt];\n};\n\n\n// Concatenates two transformation matrices together and returns the result.\nexport function transform(m1, m2) {\n  return [\n    m1[0] * m2[0] + m1[2] * m2[1],\n    m1[1] * m2[0] + m1[3] * m2[1],\n    m1[0] * m2[2] + m1[2] * m2[3],\n    m1[1] * m2[2] + m1[3] * m2[3],\n    m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n    m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\n  ];\n};\n\nexport function translate(m, x, y) {\n  return [\n    m[0],\n    m[1],\n    m[2],\n    m[3],\n    m[0] * x + m[2] * y + m[4],\n    m[1] * x + m[3] * y + m[5]\n  ];\n};\n\n\nexport function rotate(m, angle) {\n  angle = angle * Math.PI / 180;\n\n  var cosValue = Math.cos(angle);\n  var sinValue = Math.sin(angle);\n\n  return [\n    m[0] * cosValue + m[2] * sinValue,\n    m[1] * cosValue + m[3] * sinValue,\n    m[0] * (-sinValue) + m[2] * cosValue,\n    m[1] * (-sinValue) + m[3] * cosValue,\n    m[4],\n    m[5]\n  ];\n};\n\nexport function scale(m, x, y) {\n  return [\n    m[0] * x,\n    m[1] * x,\n    m[2] * y,\n    m[3] * y,\n    m[4],\n    m[5]\n  ];\n};\n  \nfunction getInverseTransform(m) {\n  var d = m[0] * m[3] - m[1] * m[2];\n  return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\n    (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n};\n\n\nexport function makePoint(x, y, z) {\n  return { x: x, y: y, z: z }\n}\n\nexport function makeVector(xcoord, ycoord, zcoord) {\n  return { xcoord: xcoord, ycoord: ycoord, zcoord: zcoord }\n}\n\nexport function makeVectorFromPoints(pt1, pt2)\n{\n  let xcoord = pt2.x - pt1.x;\n  let ycoord = pt2.y - pt1.y;\n  let zcoord = pt2.z - pt1.z;\n  return makeVector(xcoord, ycoord, zcoord);\n}\n\nexport function addVector(pt, v) {\n  return makePoint(pt.x + v.xcoord, pt.y + v.ycoord, pt.z + v.zcoord);\n}\n\nexport function multiplyVector(v, scalar) {\n  return makeVector(v.xcoord * scalar, v.ycoord * scalar, v.zcoord * scalar);\n}\n\nexport function magnitude(v)\n{\n  return Math.sqrt(\n    Math.pow(v.xcoord, 2) + Math.pow(v.ycoord, 2) + Math.pow(v.zcoord, 2)\n  );\n}\n\nexport function negateVector(v) {\n  return multiplyVector(v, -1);\n}\n\nexport function unitVector(v) {\n  let mag = magnitude(v);\n  let xcoord = v.xcoord / mag;\n  let ycoord = v.ycoord / mag;\n  let zcoord = v.zcoord / mag;\n  return makeVector(xcoord, ycoord, zcoord);\n} \n\nexport function crossProduct(u, v) {\n  //\n  // u X v = < u2*v3 - u3*v2,\n  //           u3*v1 - u1*v3,\n  //           u1*v2 - u2*v1 >\n  let xcoord = u.ycoord * v.zcoord - u.zcoord * v.ycoord;\n  let ycoord = u.zcoord * v.xcoord - u.xcoord * v.zcoord;\n  let zcoord = u.xcoord * v.ycoord - u.ycoord * v.xcoord;\n  return makeVector(xcoord, ycoord, zcoord);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/mathUtils.js","const REGEXP = /[xy]/g\nconst PATTERN = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n\nfunction replacement(c) {\n  let r = Math.random()*16|0;\n  let v = c == 'x' ? r : (r&0x3|0x8);\n  return v.toString(16);\n}\n\n/**\n * Generate a univierally unique identifier\n *\n * @return {String}\n */\nexport default function uuid() {\n  return PATTERN.replace(REGEXP, replacement);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/uuid.js","import createScreenReaderOnly from './createScreenReaderOnly';\nimport insertElementWithinChildren from './insertElementWithinChildren';\nimport insertElementWithinElement from './insertElementWithinElement';\nimport renderScreenReaderComments from './renderScreenReaderComments';\n\n// Annotation types that support comments\nconst COMMENT_TYPES = ['highlight', 'point', 'area','circle','emptycircle','fillcircle'];\n\n/**\n * Insert a hint into the DOM for screen readers for a specific annotation.\n *\n * @param {Object} annotation The annotation to insert a hint for\n * @param {Number} num The number of the annotation out of all annotations of the same type\n */\nexport default function insertScreenReaderHint(annotation, num = 0) {\n  switch (annotation.type) {\n    case 'highlight':\n    case 'strikeout':\n      let rects = annotation.rectangles;\n      let first = rects[0];\n      let last = rects[rects.length - 1];\n\n      insertElementWithinElement(\n        createScreenReaderOnly(`Begin ${annotation.type} annotation ${num}`, annotation.uuid),\n        first.x, first.y, annotation.page, true\n      );\n\n      insertElementWithinElement(\n        createScreenReaderOnly(`End ${annotation.type} annotation ${num}`, `${annotation.uuid}-end`),\n        last.x + last.width, last.y, annotation.page, false\n      );\n      break;\n\n    case 'textbox':\n    case 'point':\n      let text = annotation.type === 'textbox' ? ` (content: ${annotation.content})` : '';\n\n      insertElementWithinChildren(\n        createScreenReaderOnly(`${annotation.type} annotation ${num}${text}`, annotation.uuid),\n        annotation.x, annotation.y, annotation.page\n      );\n      break;\n\n    case 'drawing':\n    case 'area':\n      let x = typeof annotation.x !== 'undefined' ? annotation.x : annotation.lines[0][0];\n      let y = typeof annotation.y !== 'undefined' ? annotation.y : annotation.lines[0][1];\n\n      insertElementWithinChildren(\n        createScreenReaderOnly(`Unlabeled drawing`, annotation.uuid),\n        x, y, annotation.page\n      );\n      break;\n\n    case 'circle':\n    case 'fillcircle':\n    case 'emptycircle':\n      let x2 = typeof annotation.cx !== 'undefined' ? annotation.cx : annotation.lines[0][0];\n      let y2 = typeof annotation.cy !== 'undefined' ? annotation.cy : annotation.lines[0][1];\n\n      insertElementWithinChildren(\n        createScreenReaderOnly(`Unlabeled drawing`, annotation.uuid),\n        x2, y2, annotation.page\n      );\n      break;\n  }\n\n  // Include comments in screen reader hint\n  if (COMMENT_TYPES.includes(annotation.type)) {\n    renderScreenReaderComments(annotation.documentId, annotation.uuid);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/insertScreenReaderHint.js","import config from '../config'\nimport {\n  pointIntersectsRect,\n  scaleUp,\n  scaleDown\n} from '../UI/utils'; \n\n/**\n * Insert an element at a point within the document.\n * This algorithm will only insert within an element amidst it's text content.\n *\n * @param {Element} el The element to be inserted\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page number to limit elements to\n * @param {Boolean} insertBefore Whether the element is to be inserted before or after x\n * @return {Boolean} True if element was able to be inserted, otherwise false\n */\nexport default function insertElementWithinElement(el, x, y, pageNumber, insertBefore) {\n  const OFFSET_ADJUST = 2;\n\n  // If inserting before adjust `x` by looking for element a few px to the right\n  // Otherwise adjust a few px to the left\n  // This is to allow a little tolerance by searching within the box, instead\n  // of getting a false negative by testing right on the border.\n  x = Math.max(x + (OFFSET_ADJUST * (insertBefore ? 1 : -1)), 0);\n\n  let node = textLayerElementFromPoint(x, y + OFFSET_ADJUST, pageNumber);\n  if (!node) {\n    return false;\n  }\n  \n  // Now that node has been found inverse the adjustment for `x`.\n  // This is done to accomodate tolerance by cutting off on the outside of the\n  // text boundary, instead of missing a character by cutting off within.\n  x = x + (OFFSET_ADJUST * (insertBefore ? -1 : 1));\n\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n  let left = scaleDown(svg, {left: node.getBoundingClientRect().left}).left - svg.getBoundingClientRect().left;\n  let temp = node.cloneNode(true);\n  let head = temp.innerHTML.split('');\n  let tail = [];\n\n  // Insert temp off screen\n  temp.style.position = 'absolute';\n  temp.style.top = '-10000px';\n  temp.style.left = '-10000px';\n  document.body.appendChild(temp);\n\n  while (head.length) {\n    // Don't insert within HTML tags\n    if (head[head.length - 1] === '>') {\n      while(head.length) {\n        tail.unshift(head.pop());\n        if (tail[0] === '<') {\n          break;\n        }\n      }\n    }\n    \n    // Check if width of temp based on current head value satisfies x\n    temp.innerHTML = head.join('');\n    let width = scaleDown(svg, {width: temp.getBoundingClientRect().width}).width;\n    if (left + width <= x) {\n      break;\n    }\n    tail.unshift(head.pop());\n  }\n  \n  // Update original node with new markup, including element to be inserted\n  node.innerHTML = head.join('') + el.outerHTML + tail.join('');\n  temp.parentNode.removeChild(temp);\n\n  return true;\n}\n\n/**\n * Get a text layer element at a given point on a page\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page to limit elements to\n * @return {Element} First text layer element found at the point\n */\nfunction textLayerElementFromPoint(x, y, pageNumber) {\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n  let rect = svg.getBoundingClientRect();\n  y = scaleUp(svg, {y}).y + rect.top;\n  x = scaleUp(svg, {x}).x + rect.left;\n  return [...svg.parentNode.querySelectorAll(config.textClassQuery() + ' [data-canvas-width]')].filter((el) => {\n    return pointIntersectsRect(x, y, el.getBoundingClientRect());\n  })[0];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/insertElementWithinElement.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport insertScreenReaderComment from './insertScreenReaderComment';\n\n/**\n * Insert the comments into the DOM to be available by screen reader\n *\n * Example output:\n *   <div class=\"screenReaderOnly\">\n *    <div>Begin highlight 1</div>\n *    <ol aria-label=\"Comments\">\n *      <li>Foo</li>\n *      <li>Bar</li>\n *      <li>Baz</li>\n *      <li>Qux</li>\n *    </ol>\n *  </div>\n *  <div>Some highlighted text goes here...</div>\n *  <div class=\"screenReaderOnly\">End highlight 1</div>\n *\n * NOTE: `screenReaderOnly` is not a real class, just used for brevity\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The ID of the annotation\n * @param {Array} [comments] Optionally preloaded comments to be rendered\n * @return {Promise}\n */\nexport default function renderScreenReaderComments(documentId, annotationId, comments) {\n  let promise;\n\n  if (Array.isArray(comments)) {\n    promise = Promise.resolve(comments);\n  } else {\n    promise = PDFJSAnnotate.getStoreAdapter().getComments(documentId, annotationId);\n  }\n\n  return promise.then((comments) => {\n    // Node needs to be found by querying DOM as it may have been inserted as innerHTML\n    // leaving `screenReaderNode` as an invalid reference (see `insertElementWithinElement`).\n    let node = document.getElementById(`pdf-annotate-screenreader-${annotationId}`);\n    if (node) { \n      let list = document.createElement('ol');\n      list.setAttribute('id', `pdf-annotate-screenreader-comment-list-${annotationId}`);\n      list.setAttribute('aria-label', 'Comments');\n      node.appendChild(list);\n      comments.forEach(insertScreenReaderComment);\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/renderScreenReaderComments.js","/**\n * Insert a comment into the DOM to be available by screen reader\n *\n * @param {Object} comment The comment to be inserted\n */\nexport default function insertScreenReaderComment(comment) {\n  if (!comment) {\n    return;\n  }\n\n  let list = document.querySelector(`#pdf-annotate-screenreader-${comment.annotation} ol`);\n  if (list) {\n    let item = document.createElement('li');\n    item.setAttribute('id', `pdf-annotate-screenreader-comment-${comment.uuid}`);\n    item.appendChild(document.createTextNode(`${comment.content}`));\n    list.appendChild(item);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/insertScreenReaderComment.js","import PDFJSAnnotate from './src/PDFJSAnnotate';\n\nexport default PDFJSAnnotate;\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","/**\n * Throw an Error for an abstract function that hasn't been implemented.\n *\n * @param {String} name The name of the abstract function\n */\nexport default function abstractFunction(name) {\n  throw new Error(name + ' is not implemented');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/abstractFunction.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/events/events.js\n// module id = 17\n// module chunks = 0","module.exports = function createStyleSheet(blocks) {\n  var style = document.createElement('style');\n  var text = Object.keys(blocks).map(function (selector) {\n    return processRuleSet(selector, blocks[selector]);\n  }).join('\\n');\n  \n  style.setAttribute('type', 'text/css');\n  style.appendChild(document.createTextNode(text));\n\n  return style;\n}\n\nfunction processRuleSet(selector, block) {\n  return selector + ' {\\n' + processDeclarationBlock(block) + '\\n}';\n}\n\nfunction processDeclarationBlock(block) {\n  return Object.keys(block).map(function (prop) {\n    return processDeclaration(prop, block[prop]);\n  }).join('\\n');\n}\n\nfunction processDeclaration(prop, value) {\n  if (!isNaN(value) && value != 0) {\n    value = value + 'px';\n  }\n\n  return hyphenate(prop) + ': ' + value + ';';\n}\n\nfunction hyphenate(prop) {\n  return prop.replace(/[A-Z]/g, function (match) {\n    return '-' + match.toLowerCase();\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/create-stylesheet/index.js\n// module id = 18\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/object-assign/index.js\n// module id = 19\n// module chunks = 0","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGLineElements from an annotation definition.\n * This is used for anntations of type `strikeout`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement} A group of all lines to be rendered\n */\nexport default function renderLine(a) {\n  let group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  setAttributes(group, {\n    stroke: normalizeColor(a.color || '#f00'),\n    strokeWidth: 1\n  });\n\n  a.rectangles.forEach((r) => {\n    let line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n\n    setAttributes(line, {\n      x1: r.x,\n      y1: r.y,\n      x2: r.x + r.width,\n      y2: r.y,\n    });\n\n    group.appendChild(line);\n  });\n\n  return group;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderLine.js","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGPathElement from an annotation definition.\n * This is used for anntations of type `drawing`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGPathElement} The path to be rendered\n */\nexport default function renderPath(a) {\n  let d = [];\n  let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n  if (a.lines.length > 0) {\n    d.push(`M${a.lines[0][0]} ${a.lines[0][1]}`);\n    for (let i = 1, l = a.lines.length; i < l; i++) {\n      var p1 = a.lines[i];\n      var p2 = a.lines[i+1];\n      if (p2) {\n        d.push(`L${p1[0]} ${p1[1]}`);\n      }\n    }\n  }\n\n/*\n\n   if(a.lines.length>2) {\n    var p1 = a.lines[0];\n    var p2 = a.lines[a.lines.length-1];\n\n    var p3 = []; //arrow\n    var p4 = [];\n    var p0 = []; //arrow intersection\n\n\n\n    if (p2) {\n      var k = -(p2[0]-p1[0])/(p2[1]-p1[1]);\n\n      var deltaX = 3;\n      p0[0] = p1[0]+0.8*(p2[0]-p1[0]);\n      p0[1] = p1[1]+0.8*(p2[1]-p1[1]);\n\n      p3[0] = p0[0] + deltaX;\n      p3[1] = p0[1] + k*deltaX;\n\n      p4[0] = p0[0] - deltaX;\n      p4[1] = p0[1] - k*deltaX;\n\n      if(Math.abs(p2[1]-p1[1]) < 20) {\n\n        p3[0] = p0[0] ;\n        p3[1] = p0[1] + deltaX*1;\n\n        p4[0] = p0[0] ;\n        p4[1] = p0[1] - deltaX*1;\n\n      }\n\n      d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n       //d.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n      d.push(`M${p2[0]} ${p2[1]} ${p3[0]} ${p3[1]}`);\n      d.push(`M${p3[0]} ${p3[1]} ${p4[0]} ${p4[1]}`);\n      d.push(`M${p4[0]} ${p4[1]} ${p2[0]} ${p2[1]}`);\n     }\n    }*/\n\n  setAttributes(path, {\n    d: `${d.join(' ')}`,//`${d.join(' ')}Z`,\n    stroke: normalizeColor(a.color || '#000'),\n    strokeWidth: a.width || 1,\n    fill: 'none'\n  });\n\n  return path;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderPath.js","import setAttributes from '../utils/setAttributes';\n\nconst SIZE = 25;\nconst D = 'M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z';\n\n/**\n * Create SVGElement from an annotation definition.\n * This is used for anntations of type `comment`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGElement} A svg to be rendered\n */\nexport default function renderPoint(a) {\n  let outerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  let innerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n  let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n  setAttributes(outerSVG,  {\n    width: SIZE,\n    height: SIZE,\n    x: a.x,\n    y: a.y\n  });\n\n  setAttributes(innerSVG, {\n    width: SIZE,\n    height: SIZE,\n    x: 0,\n    y: (SIZE * 0.05) * -1,\n    viewBox: '0 0 1000 1000'\n  });\n\n  setAttributes(rect, {\n    width: SIZE,\n    height: SIZE,\n    stroke: '#000',\n    fill: '#ff0'\n  });\n\n  setAttributes(path, {\n    d: D,\n    strokeWidth: 50,\n    stroke: '#000',\n    fill: '#fff'\n  });\n\n  innerSVG.appendChild(path);\n  outerSVG.appendChild(rect);\n  outerSVG.appendChild(innerSVG);\n\n  return outerSVG;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderPoint.js","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGRectElements from an annotation definition.\n * This is used for anntations of type `area` and `highlight`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement|SVGRectElement} A group of all rects to be rendered\n */\nexport default function renderRect(a) {\n  if (a.type === 'highlight') {\n    let group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    setAttributes(group, {\n      fill: normalizeColor(a.color || '#ff0'),\n      fillOpacity: 0.2\n    });\n    \n    a.rectangles.forEach((r) => {\n      group.appendChild(createRect(r));\n    });\n\n    return group;\n  } else {\n    let rect = createRect(a);\n    setAttributes(rect, {\n      stroke: normalizeColor(a.color || '#f00'),\n      fill: 'none'\n    });\n\n    return rect;\n  }\n}\n\nfunction createRect(r) {\n  let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\n  setAttributes(rect, {\n    x: r.x,\n    y: r.y,\n    width: r.width,\n    height: r.height\n  });\n\n  return rect;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderRect.js","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGTextElement from an annotation definition.\n * This is used for anntations of type `textbox`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGTextElement} A text to be rendered\n */\nexport default function renderText(a) {\n\n  // Text should be rendered at 0 degrees relative to\n  // document rotation\n  let text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n  setAttributes(text, {\n    x: a.x,\n    y: a.y,\n    fill: normalizeColor(a.color || '#000'),\n    fontSize: a.size,\n    transform: `rotate(${a.rotation})`\n  });\n  text.innerHTML = a.content;\n\n  var g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  g.appendChild(text);\n\n  return g;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderText.js","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create an SVGCircleElement from an annotation definition.\n * This is used for annotations of type `circle`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement|SVGCircleElement} A circle to be rendered\n */\nexport default function renderCircle(a) {\n  let circle = createCircle(a);\n  let color = normalizeColor(a.color || '#f00')\n\n  if (a.type === 'circle')\n    setAttributes(circle, {\n      stroke: color,\n      fill: 'none',\n      'stroke-width': 5\n    });\n  if (a.type === 'emptycircle')\n    setAttributes(circle, {\n      stroke: color,\n      fill: 'none',\n      'stroke-width': 2\n    });\n\n  if (a.type === 'fillcircle')\n    setAttributes(circle, {\n      stroke: color,\n      fill: color,\n      'stroke-width': 5\n    });\n\n  return circle;\n}\n\nfunction createCircle(a) {\n  let circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n  setAttributes(circle, {\n    cx: a.cx,\n    cy: a.cy,\n    r: a.r\n  });\n\n  return circle;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderCircle.js","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\nimport { \n  makePoint, makeVector, makeVectorFromPoints,\n  magnitude, unitVector, crossProduct,\n  addVector, multiplyVector, negateVector\n} from '../utils/mathUtils';\n\n/**\n * Create SVGPathElement from an annotation definition.\n * This is used for anntations of type `drawing`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGPathElement} The path to be rendered\n */\nexport default function renderArrow(a) {\n  let d = [];\n  let arrow = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n\n  if (a.lines.length == 2) {\n    let p1 = a.lines[0];\n    let p2 = a.lines[a.lines.length - 1];\n\n    let arrowLength = 40;\n    let pt0 = makePoint(p1[0], p1[1], 0);\n    let pt1 = makePoint(p2[0], p2[1], 0);\n    let x = makeVectorFromPoints(pt0, pt1);\n    let unitX = unitVector(x);\n    pt1 = addVector(pt0, multiplyVector(unitX, arrowLength));\n    x = makeVectorFromPoints(pt0, pt1);\n    let unitZ = makeVector(0, 0, 1);\n    let unitY = unitVector(crossProduct(unitX, unitZ));\n    let thickness = a.width || 10;\n\n    let A = addVector(pt0, multiplyVector(unitY, thickness * 0.5)); \n    let B = addVector(A, multiplyVector(unitX, magnitude(x) - thickness * 2.0)); \n    let C = addVector(B, multiplyVector(unitY, thickness)); \n    let D = pt1;\n    let G = addVector(pt0, multiplyVector(negateVector(unitY), thickness * 0.5)); \n    let F = addVector(G, multiplyVector(unitX, magnitude(x) - thickness * 2.0)); \n    let E = addVector(F, multiplyVector(negateVector(unitY), thickness)); \n\n    let points = '' + \n      A.x + ',' + A.y + ' ' +\n      B.x + ',' + B.y + ' ' +\n      C.x + ',' + C.y + ' ' +\n      D.x + ',' + D.y + ' ' +\n      E.x + ',' + E.y + ' ' +\n      F.x + ',' + F.y + ' ' +\n      G.x + ',' + G.y\n\n    setAttributes(arrow, {\n      points: points,\n      stroke: normalizeColor(a.color || '#000'),\n      fill: normalizeColor(a.color || '#000')\n    });\n  }\n\n  return arrow;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderArrow.js","import uuid from '../utils/uuid';\nimport StoreAdapter from './StoreAdapter';\n\n// StoreAdapter for working with localStorage\n// This is ideal for testing, examples, and prototyping\nexport default class LocalStoreAdapter extends StoreAdapter {\n  constructor(userId = \"user\") {\n    super({\n      getAnnotations(documentId, userId, pageNumber) {\n        return new Promise((resolve, reject) => {\n          let annotations = getAllAnnotations().filter((i) => {\n            return i.page === pageNumber && i.class === 'Annotation';\n          });\n\n          resolve({\n            documentId,\n            userId,\n            pageNumber,\n            annotations\n          });\n        });\n      },\n\n      getAnnotation(documentId, userId, annotationId) {\n        return Promise.resolve(getAnnotations(documentId, userId)[findAnnotation(documentId, userId, annotationId)]);\n      },\n\n      addAnnotation(documentId, userId, pageNumber, annotation) {\n        return new Promise((resolve, reject) => {\n          annotation.class = 'Annotation';\n          annotation.uuid = uuid();\n          annotation.page = pageNumber;\n          annotation.userId = userId;\n\n          let annotations = getAnnotations(documentId, userId);\n          annotations.push(annotation);\n          updateAnnotations(documentId, userId, annotations);\n\n          resolve(annotation);\n        });\n      },\n\n      editAnnotation(documentId, userId, annotationId, annotation) {\n        return new Promise((resolve, reject) => {\n          let annotations = getAnnotations(documentId, userId);\n          annotations[findAnnotation(documentId, userId, annotationId)] = annotation;\n          updateAnnotations(documentId, userId, annotations);\n          resolve(annotation);\n        });\n      },\n\n      deleteAnnotation(documentId, userId, annotationId) {\n        return new Promise((resolve, reject) => {\n          let index = findAnnotation(documentId, userId, annotationId);\n          if (index > -1) {\n            let annotations = getAnnotations(documentId, userId);\n            annotations.splice(index, 1);\n            updateAnnotations(documentId, userId, annotations);\n          }\n\n          resolve(true);\n        });\n      },\n\n      getComments(documentId, userId, annotationId) {\n        return new Promise((resolve, reject) => {\n          resolve(getAnnotations(documentId, userId).filter((i) => {\n            return i.class === 'Comment' && i.annotation === annotationId;\n          }));\n        });\n      },\n\n      addComment(documentId, userId, annotationId, content) {\n        return new Promise((resolve, reject) => {\n          let comment = {\n            class: 'Comment',\n            uuid: uuid(),\n            annotation: annotationId,\n            content: content,\n            userId: userId\n          };\n\n          let annotations = getAnnotations(documentId, userId);\n          annotations.push(comment);\n          updateAnnotations(documentId, userId, annotations);\n\n          resolve(comment);\n        });\n      },\n\n      deleteComment(documentId, userId, commentId) {\n        return new Promise((resolve, reject) => {\n          getAnnotations(documentId, userId);\n          let index = -1;\n          let annotations = getAnnotations(documentId, userId);\n          for (let i=0, l=annotations.length; i<l; i++) {\n            if (annotations[i].uuid === commentId) {\n              index = i;\n              break;\n            }\n          }\n\n          if (index > -1) {\n            annotations.splice(index, 1);\n            updateAnnotations(documentId, userId, annotations);\n          }\n\n          resolve(true);\n        });\n      }\n    });\n    this._userId = userId;\n  }\n  get userId(){\n    return this._userId;\n  }\n}\n\nfunction getAllAnnotations(){\n  let all_annotations = [];\n  for(let i = 0 ; i < localStorage.length; i++){\n    if(localStorage.key(i).includes('annotations')){\n      all_annotations.push(...JSON.parse(localStorage.getItem(localStorage.key(i))));\n    }\n  }\n  return all_annotations;\n}\n\nfunction getAnnotations(documentId, userId) {\n  return JSON.parse(localStorage.getItem(`${documentId}/${userId}/annotations`)) || [];\n}\n\nfunction updateAnnotations(documentId, userId, annotations) {\n  localStorage.setItem(`${documentId}/${userId}/annotations`, JSON.stringify(annotations));\n}\n/**\n *\n * @param {String} documentId Document id of the annotation\n * @param {String} userId User id of the annotation\n * @param {String} annotationId The id of the annotation\n *\n * This function finds all the annotation made by one user.\n *\n * @return {int} The index of the annotation in localstorage\n */\nfunction findAnnotation(documentId, userId, annotationId) {\n  let index = -1;\n  let annotations = getAnnotations(documentId, userId);\n  for (let i=0, l=annotations.length; i<l; i++) {\n    if (annotations[i].uuid === annotationId) {\n      index = i;\n      break;\n    }\n  }\n  return index;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapter/LocalStoreAdapter.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild, transformChild } from './appendChild';\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\n\n/**\n * Render the response from PDFJSAnnotate.getStoreAdapter().getAnnotations to SVG\n *\n * @param {SVGElement} svg The SVG element to render the annotations to\n * @param {Object} viewport The page viewport data\n * @param {Object} data The response from PDFJSAnnotate.getStoreAdapter().getAnnotations\n * @return {Promise} Settled once rendering has completed\n *  A settled Promise will be either:\n *    - fulfilled: SVGElement\n *    - rejected: Error\n */\nexport default function render(svg, viewport, data) {\n  return new Promise((resolve, reject) => {\n    // Reset the content of the SVG\n    svg.setAttribute('data-pdf-annotate-container', true);\n    svg.setAttribute('data-pdf-annotate-viewport', JSON.stringify(viewport));\n    svg.removeAttribute('data-pdf-annotate-document');\n    svg.removeAttribute('data-pdf-annotate-page');\n\n    // If there's no data nothing can be done\n    if (!data) {\n      svg.innerHTML = ''; \n      return resolve(svg);\n    }\n\n    svg.setAttribute('data-pdf-annotate-document', data.documentId);\n    svg.setAttribute('data-pdf-annotate-user', data.userId);\n    svg.setAttribute('data-pdf-annotate-page', data.pageNumber);\n  \n    // Make sure annotations is an array\n    if (!Array.isArray(data.annotations) || data.annotations.length === 0) {\n      return resolve(svg);\n    }\n\n    // Append or transform annotation to svg\n    data.annotations.forEach((a) => {\n      var node = svg.querySelector('[data-pdf-annotate-id=\"' + a.uuid + '\"]');\n      if (node) {\n        transformChild(svg, node, viewport);\n      } else {\n        appendChild(svg, a, viewport);\n      }\n    });\n\n    resolve(svg);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/index.js","/**\n * Create a node that is only visible to screen readers\n *\n * @param {String} content The text content that should be read by screen reader\n * @param {String} [annotationId] The ID of the annotation assocaited\n * @return {Element} An Element that is only visible to screen readers\n */\nexport default function createScreenReaderOnly(content, annotationId) {\n  let node = document.createElement('div');\n  let text = document.createTextNode(content);\n  node.appendChild(text);\n  node.setAttribute('id', `pdf-annotate-screenreader-${annotationId}`);\n  node.style.position = 'absolute';\n  node.style.left = '-10000px';\n  node.style.top = 'auto';\n  node.style.width = '1px';\n  node.style.height = '1px';\n  node.style.overflow = 'hidden';\n  return node;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/createScreenReaderOnly.js","import config from '../config';\nimport insertElementWithinElement from './insertElementWithinElement';\nimport { pointIntersectsRect } from '../UI/utils';\nimport { scaleUp } from '../UI/utils'; \n\n/**\n * Insert an element at a point within the document.\n * This algorithm will try to insert between elements if possible.\n * It will however use `insertElementWithinElement` if it is more accurate.\n *\n * @param {Element} el The element to be inserted\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page number to limit elements to\n * @return {Boolean} True if element was able to be inserted, otherwise false\n */\nexport default function insertElementWithinChildren(el, x, y, pageNumber) {\n  // Try and use most accurate method of inserting within an element\n  if (insertElementWithinElement(el, x, y, pageNumber, true)) {\n    return true;\n  }\n\n  // Fall back to inserting between elements\n  let svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n  let rect = svg.getBoundingClientRect();\n  let nodes = [...svg.parentNode.querySelectorAll(config.textClassQuery() + ' > div')];\n\n  y = scaleUp(svg, {y}).y + rect.top;\n  x = scaleUp(svg, {x}).x + rect.left;\n\n  // Find the best node to insert before\n  for (let i=0, l=nodes.length; i<l; i++) {\n    let n = nodes[i];\n    let r = n.getBoundingClientRect();\n    if (y <= r.top) {\n      n.parentNode.insertBefore(el, n);\n      return true;\n    }\n  }\n\n  // If all else fails try to append to the bottom\n  let textLayer = svg.parentNode.querySelector(config.textClassQuery());\n  if (textLayer) {\n    let textRect = textLayer.getBoundingClientRect();\n    if (pointIntersectsRect(x, y, textRect)) {\n      textLayer.appendChild(el);\n      return true;\n    }\n  }\n\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/insertElementWithinChildren.js","import insertScreenReaderHint from './insertScreenReaderHint';\nimport renderScreenReaderHints from './renderScreenReaderHints';\nimport insertScreenReaderComment from './insertScreenReaderComment';\nimport renderScreenReaderComments from './renderScreenReaderComments';\nimport { addEventListener } from '../UI/event';\nimport PDFJSAnnotate from '../PDFJSAnnotate';\n\n/**\n * Initialize the event handlers for keeping screen reader hints synced with data\n */\nexport default function initEventHandlers() {\n  addEventListener('annotation:add', (documentId, userId, pageNumber, annotation) => {\n    reorderAnnotationsByType(documentId, userId, pageNumber, annotation.type);\n  });\n  addEventListener('annotation:edit', (documentId, userId, annotationId, annotation) => {\n    reorderAnnotationsByType(documentId, userId, annotation.page, annotation.type);\n  });\n  addEventListener('annotation:delete', removeAnnotation);\n  addEventListener('comment:add', insertComment);\n  addEventListener('comment:delete', removeComment);\n}\n\n/**\n * Reorder the annotation numbers by annotation type\n *\n * @param {String} documentId The ID of the document\n * @param {String} userId The ID of the user\n * @param {Number} pageNumber The page number of the annotations\n * @param {Strig} type The annotation type\n */\nfunction reorderAnnotationsByType(documentId, userId, pageNumber, type) {\n  PDFJSAnnotate.getStoreAdapter().getAnnotations(documentId, userId, pageNumber)\n    .then((annotations) => {\n      return annotations.annotations.filter((a) => {\n        return a.type === type;\n      });\n    })\n    .then((annotations) => {\n      annotations.forEach((a) => {\n        removeAnnotation(documentId, a.uuid);\n      });\n\n      return annotations;\n    })\n    .then(renderScreenReaderHints);\n}\n\n/**\n * Remove the screen reader hint for an annotation\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The Id of the annotation\n */\nfunction removeAnnotation(documentId, annotationId) {\n  removeElementById(`pdf-annotate-screenreader-${annotationId}`);\n  removeElementById(`pdf-annotate-screenreader-${annotationId}-end`);\n}\n\n/**\n * Insert a screen reader hint for a comment\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The ID of tha assocated annotation\n * @param {Object} comment The comment to insert a hint for\n */\nfunction insertComment(documentId, annotationId, comment) {\n  let list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\n  let promise;\n\n  if (!list) {\n    promise = renderScreenReaderComments(documentId, annotationId, []).then(() => {\n      list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\n      return true;\n    });\n  } else {\n    promise = Promise.resolve(true);\n  }\n\n  promise.then(() => {\n    insertScreenReaderComment(comment);\n  });\n}\n\n/**\n * Remove a screen reader hint for a comment\n *\n * @param {String} documentId The ID of the document\n * @param {String} commentId The ID of the comment\n */\nfunction removeComment(documentId, commentId) {\n  removeElementById(`pdf-annotate-screenreader-comment-${commentId}`);\n}\n\n/**\n * Remove an element from the DOM by it's ID if it exists\n *\n * @param {String} elementID The ID of the element to be removed\n */\nfunction removeElementById(elementId) {\n  let el = document.getElementById(elementId);\n  if (el) {\n    el.parentNode.removeChild(el);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/a11y/initEventHandlers.js","import { addEventListener, removeEventListener, fireEvent } from './event';\nimport { disableEdit, enableEdit } from './edit';\nimport { disablePen, enablePen, setPen } from './pen';\nimport { disableArrow, enableArrow, setArrow } from './arrow';\nimport { disableEraser, enableEraser } from './eraser';\nimport { disablePoint, enablePoint } from './point';\nimport { disableRect, enableRect } from './rect';\nimport { disableCircle, enableCircle, setCircle, addCircle } from './circle';\nimport { disableText, enableText, setText } from './text';\nimport { createPage, renderPage } from './page';\n\nexport default {\n  addEventListener,\n  removeEventListener,\n  fireEvent,\n\n  disableEdit,\n  enableEdit,\n\n  disablePen,\n  enablePen,\n  setPen,\n\n  disablePoint,\n  enablePoint,\n\n  disableRect,\n  enableRect,\n\n  disableCircle,\n  enableCircle,\n  setCircle,\n  addCircle,\n\n  disableArrow,\n  enableArrow,\n  setArrow,\n\n  disableEraser,\n  enableEraser,\n\n  disableText,\n  enableText,\n  setText,\n\n  createPage,\n  renderPage\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/index.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport { appendChild } from '../render/appendChild';\nimport {\n  addEventListener,\n  removeEventListener\n} from './event';\nimport {\n  BORDER_COLOR,\n  disableUserSelect,\n  enableUserSelect,\n  findSVGContainer,\n  findSVGAtPoint,\n  getOffsetAnnotationRect,\n  getMetadata,\n  scaleUp,\n  convertToSvgPoint\n} from './utils';\n\nlet _enabled = false;\nlet isDragging = false;\nlet overlay;\nlet dragOffsetX, dragOffsetY, dragStartX, dragStartY;\nconst OVERLAY_BORDER_SIZE = 3;\n\n/**\n * Create an overlay for editing an annotation.\n *\n * @param {Element} target The annotation element to apply overlay for\n */\nfunction createEditOverlay(target) {\n  destroyEditOverlay();\n\n  overlay = document.createElement('div');\n  let anchor = document.createElement('a');\n  let parentNode = findSVGContainer(target).parentNode;\n  let id = target.getAttribute('data-pdf-annotate-id');\n  let rect = getOffsetAnnotationRect(target);\n  let styleLeft = rect.left - OVERLAY_BORDER_SIZE;\n  let styleTop = rect.top - OVERLAY_BORDER_SIZE;\n\n  overlay.setAttribute('id', 'pdf-annotate-edit-overlay');\n  overlay.setAttribute('data-target-id', id);\n  overlay.style.boxSizing = 'content-box';\n  overlay.style.position = 'absolute';\n  overlay.style.top = `${styleTop}px`;\n  overlay.style.left = `${styleLeft}px`;\n  overlay.style.width = `${rect.width}px`;\n  overlay.style.height = `${rect.height}px`;\n  overlay.style.border = `${OVERLAY_BORDER_SIZE}px solid ${BORDER_COLOR}`;\n  overlay.style.borderRadius = `${OVERLAY_BORDER_SIZE}px`;\n  overlay.style.zIndex = 20100;\n\n  anchor.innerHTML = '';\n  anchor.setAttribute('href', 'javascript://');\n  anchor.style.background = '#fff';\n  anchor.style.borderRadius = '20px';\n  anchor.style.border = '1px solid #bbb';\n  anchor.style.color = '#bbb';\n  anchor.style.fontSize = '16px';\n  anchor.style.padding = '2px';\n  anchor.style.textAlign = 'center';\n  anchor.style.textDecoration = 'none';\n  anchor.style.position = 'absolute';\n  anchor.style.top = '-13px';\n  anchor.style.right = '-13px';\n  anchor.style.width = '25px';\n  anchor.style.height = '25px';\n\n  overlay.appendChild(anchor);\n  parentNode.appendChild(overlay);\n  document.addEventListener('click', handleDocumentClick);\n  document.addEventListener('keyup', handleDocumentKeyup);\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  anchor.addEventListener('click', deleteAnnotation);\n  anchor.addEventListener('mouseover', () => {\n    anchor.style.color = '#35A4DC';\n    anchor.style.borderColor = '#999';\n    anchor.style.boxShadow = '0 1px 1px #ccc';\n  });\n  anchor.addEventListener('mouseout', () => {\n    anchor.style.color = '#bbb';\n    anchor.style.borderColor = '#bbb';\n    anchor.style.boxShadow = '';\n  });\n  overlay.addEventListener('mouseover', () => {\n    if (!isDragging) { anchor.style.display = ''; }\n  });\n  overlay.addEventListener('mouseout', () => {\n    anchor.style.display = 'none';\n  });\n}\n\n/**\n * Destroy the edit overlay if it exists.\n */\nfunction destroyEditOverlay() {\n  if (overlay) {\n    overlay.parentNode.removeChild(overlay);\n    overlay = null;\n  }\n\n  document.removeEventListener('click', handleDocumentClick);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n  enableUserSelect();\n}\n\n/**\n * Delete currently selected annotation\n */\nfunction deleteAnnotation() {\n  if (!overlay) {\n    return;\n  }\n\n  let annotationId = overlay.getAttribute('data-target-id');\n  let nodes = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n  let { documentId, userId } = getMetadata(svg);\n\n  [...nodes].forEach((n) => {\n    n.parentNode.removeChild(n);\n  });\n\n  PDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, userId, annotationId);\n\n  destroyEditOverlay();\n}\n\n/**\n * Handle document.click event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentClick(e) {\n  if (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\n\n  // Remove current overlay\n  let overlay = document.getElementById('pdf-annotate-edit-overlay');\n  if (overlay) {\n    if (isDragging || e.target === overlay) {\n      return;\n    }\n\n    destroyEditOverlay();\n  }\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {KeyboardEvent} e The DOM event that needs to be handled\n */\nfunction handleDocumentKeyup(e) {\n  // keyCode is deprecated, so prefer the newer \"key\" method if possible\n  let keyTest;\n  if (e.key) {\n    keyTest = e.key.toLowerCase() === \"delete\" || e.key.toLowerCase() === \"backspace\";\n  }\n  else {\n    keyTest = e.keyCode === 8 || e.keyCode === 46;\n  }\n  if (overlay && keyTest &&\n      e.target.nodeName.toLowerCase() !== 'textarea' &&\n      e.target.nodeName.toLowerCase() !== 'input') {\n    e.preventDefault();\n    deleteAnnotation();\n  }\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMousedown(e) {\n  if (e.target !== overlay) {\n    return;\n  }\n\n  // Highlight and strikeout annotations are bound to text within the document.\n  // It doesn't make sense to allow repositioning these types of annotations.\n  let annotationId = overlay.getAttribute('data-target-id');\n  let target = document.querySelector(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n  let type = target.getAttribute('data-pdf-annotate-type');\n\n  if (type === 'highlight' || type === 'strikeout') { return; }\n\n  isDragging = true;\n  dragOffsetX = e.clientX;\n  dragOffsetY = e.clientY;\n  dragStartX = overlay.offsetLeft;\n  dragStartY = overlay.offsetTop;\n\n  overlay.style.background = 'rgba(255, 255, 255, 0.7)';\n  overlay.style.cursor = 'move';\n  overlay.querySelector('a').style.display = 'none';\n\n  document.addEventListener('mousemove', handleDocumentMousemove);\n  document.addEventListener('mouseup', handleDocumentMouseup);\n  disableUserSelect();\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMousemove(e) {\n  let annotationId = overlay.getAttribute('data-target-id');\n  let parentNode = overlay.parentNode;\n  let rect = parentNode.getBoundingClientRect();\n  let y = (dragStartY + (e.clientY - dragOffsetY));\n  let x = (dragStartX + (e.clientX - dragOffsetX));\n  let minY = 0;\n  let maxY = rect.height;\n  let minX = 0;\n  let maxX = rect.width;\n\n  if (y > minY && y + overlay.offsetHeight < maxY) {\n    overlay.style.top = `${y}px`;\n  }\n\n  if (x > minX && x + overlay.offsetWidth < maxX) {\n    overlay.style.left = `${x}px`;\n  }\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMouseup(e) {\n  let annotationId = overlay.getAttribute('data-target-id');\n  let target = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n  let type = target[0].getAttribute('data-pdf-annotate-type');\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n  let { documentId, userId } = getMetadata(svg);\n\n  overlay.querySelector('a').style.display = '';\n\n  PDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, userId, annotationId).then((annotation) => {\n    let attribX = 'x';\n    let attribY = 'y';\n    if (['circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n      attribX = 'cx';\n      attribY = 'cy';\n    }\n\n    if (type === 'point') {\n      // Broken\n      /*\n      [...target].forEach((t, i) => {\n        let moveTo = {\n          x: overlay.offsetLeft + 3,\n          y: overlay.offsetTop + 3\n        };\n        t.setAttribute(attribX, moveTo.x);\n        t.setAttribute(attribY, moveTo.y);\n        annotation[attribX] = moveTo.x;\n        annotation[attribY] = moveTo.y;\n      });\n      */\n      return;\n    }\n    else if (['area', 'highlight', 'textbox', 'circle', 'fillcircle', 'emptycircle'].indexOf(type) > -1) {\n      let modelStart = convertToSvgPoint([dragStartX, dragStartY], svg);\n      let modelEnd = convertToSvgPoint([overlay.offsetLeft, overlay.offsetTop], svg);\n      let modelDelta = {\n        x: modelEnd[0] - modelStart[0],\n        y: modelEnd[1] - modelStart[1]\n      };\n\n      if (type === 'textbox') {\n        target = [target[0].firstChild];\n      }\n\n      [...target].forEach((t, i) => {\n        let modelX = parseInt(t.getAttribute(attribX), 10);\n        let modelY = parseInt(t.getAttribute(attribY), 10);\n        if (modelDelta.y !== 0) {\n          modelY = modelY + modelDelta.y;\n\n          t.setAttribute(attribY, modelY);\n          if (annotation.rectangles && i < annotation.rectangles.length) {\n            annotation.rectangles[i].y = modelY;\n          }\n          else if (annotation[attribY]) {\n            annotation[attribY] = modelY;\n          }\n        }\n        if (modelDelta.x !== 0) {\n          modelX = modelX + modelDelta.x;\n\n          t.setAttribute(attribX, modelX);\n          if (annotation.rectangles && i < annotation.rectangles.length) {\n            annotation.rectangles[i].x = modelX;\n          }\n          else if (annotation[attribX]) {\n            annotation[attribX] = modelX;\n          }\n        }\n      });\n    } else if (type === 'strikeout') {\n      return;\n    //   let { deltaX, deltaY } = getDelta('x1', 'y1');\n    //   [...target].forEach(target, (t, i) => {\n    //     if (deltaY !== 0) {\n    //       t.setAttribute('y1', parseInt(t.getAttribute('y1'), 10) + deltaY);\n    //       t.setAttribute('y2', parseInt(t.getAttribute('y2'), 10) + deltaY);\n    //       annotation.rectangles[i].y = parseInt(t.getAttribute('y1'), 10);\n    //     }\n    //     if (deltaX !== 0) {\n    //       t.setAttribute('x1', parseInt(t.getAttribute('x1'), 10) + deltaX);\n    //       t.setAttribute('x2', parseInt(t.getAttribute('x2'), 10) + deltaX);\n    //       annotation.rectangles[i].x = parseInt(t.getAttribute('x1'), 10);\n    //     }\n    //   });\n    }\n    else if (type === 'drawing' || type === 'arrow') {\n      // Do nothing as currently broken\n      /*\n      let modelStart = convertToSvgPoint([dragStartX, dragStartY], svg);\n      let modelEnd = convertToSvgPoint([overlay.offsetLeft, overlay.offsetTop], svg);\n      let modelDelta = {\n        x: modelEnd[0] - modelStart[0],\n        y: modelEnd[1] - modelStart[1]\n      };\n\n      annotation.lines.forEach((line, i) => {\n        let [x, y] = annotation.lines[i];\n        annotation.lines[i][0] = x + modelDelta.x;\n        annotation.lines[i][1] = y + modelDelta.y;\n      });\n\n      target[0].parentNode.removeChild(target[0]);\n      appendChild(svg, annotation);\n      */\n      return;\n    }\n\n    PDFJSAnnotate.getStoreAdapter().editAnnotation(documentId, userId, annotationId, annotation);\n  });\n\n  setTimeout(() => {\n    isDragging = false;\n  }, 0);\n\n  overlay.style.background = '';\n  overlay.style.cursor = '';\n\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n  enableUserSelect();\n}\n\n/**\n * Handle annotation.click event\n *\n * @param {Element} e The annotation element that was clicked\n */\nfunction handleAnnotationClick(target) {\n  createEditOverlay(target);\n}\n\n/**\n * Enable edit mode behavior.\n */\nexport function enableEdit() {\n  if (_enabled) {\n    return;\n  }\n\n  _enabled = true;\n  addEventListener('annotation:click', handleAnnotationClick);\n};\n\n/**\n * Disable edit mode behavior.\n */\nexport function disableEdit() {\n  destroyEditOverlay();\n\n  if (!_enabled) {\n    return;\n  }\n\n  _enabled = false;\n  removeEventListener('annotation:click', handleAnnotationClick);\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/edit.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  disableUserSelect,\n  enableUserSelect,\n  findSVGAtPoint,\n  getMetadata,\n  convertToSvgPoint\n} from './utils';\n\nlet _enabled = false;\nlet _candraw = false;\nlet _penSize;\nlet _penColor;\nlet path;\nlet lines = [];\n\nconst isFirefox = /firefox/i.test(navigator.userAgent);\n\n/**\n * Handle document.touchdown or document.pointerdown event\n */\nfunction handleDocumentPointerdown(e) {\n  e.preventDefault();\n  path = null;\n  lines = [];\n  _candraw = true;\n}\n\n/**\n * Handle document.touchup or document.pointerup event\n *\n * @param {TouchEvent} e The DOM event to be handled\n */\nfunction handleDocumentPointerupChrome(e){\n  saveToStorage(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n}\n\nfunction handleDocumentPointerup(e) {\n  saveToStorage(e.clientX, e.clientY);\n}\n\nfunction saveToStorage(x, y) {\n  _candraw = false;\n  let svg;\n  if (lines.length > 1 && (svg = findSVGAtPoint(x, y))) {\n    let { documentId, userId, pageNumber } = getMetadata(svg);\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, userId, pageNumber, {\n        type: 'drawing',\n        width: _penSize,\n        color: _penColor,\n        lines\n      }\n    ).then((annotation) => {\n      if (path) {\n        svg.removeChild(path);\n      }\n\n      appendChild(svg, annotation);\n    });\n  }\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {PointerEvent} e The DOM event to be handled\n */\nfunction handleDocumentPointermove(e) {\n  if (!e.srcElement.classList.contains('annotationLayer')) {\n    return;\n  }\n  if (_candraw) {\n    savePoint(e.clientX, e.clientY);\n  }\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {KeyboardEvent} e The DOM event to be handled\n * } e The DOM event to be handled\n */\nfunction handleDocumentKeyup(e) {\n  // Cancel rect if Esc is pressed\n  if (e.keyCode === 27) {\n    lines = null;\n    path.parentNode.removeChild(path);\n    document.removeEventListener('pointermove', handleDocumentPointermove);\n    document.removeEventListener('pointerup', handleDocumentPointerup);\n  }\n}\n\n/**\n * Save a point to the line being drawn.\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n */\nfunction savePoint(x, y) {\n  let svg = findSVGAtPoint(x, y);\n  if (!svg) {\n    return;\n  }\n\n  let rect = svg.getBoundingClientRect();\n  let point = convertToSvgPoint([\n    x - rect.left,\n    y - rect.top\n  ], svg);\n  point[0] = point[0].toFixed(2);\n  point[1] = point[1].toFixed(2);\n  lines.push(point);\n\n  if (lines.length <= 1) {\n    return;\n  }\n\n  if (path) {\n    svg.removeChild(path);\n  }\n\n  path = appendChild(svg, {\n    type: 'drawing',\n    color: _penColor,\n    width: _penSize,\n    lines\n  });\n}\n\n/**\n * Set the attributes of the pen.\n *\n * @param {Number} penSize The size of the lines drawn by the pen\n * @param {String} penColor The color of the lines drawn by the pen\n */\nexport function setPen(penSize = 1, penColor = '000000') {\n  _penSize = parseInt(penSize, 10);\n  _penColor = penColor;\n}\n\n/**\n * Enable the pen behavior\n */\nexport function enablePen() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  // Chrome and Firefox has different behaviors with how pen works, so we need different events.\n  document.addEventListener('pointerdown', handleDocumentPointerdown);\n  document.addEventListener('pointermove', handleDocumentPointermove);\n  document.addEventListener('pointerup', handleDocumentPointerup);\n\n  document.addEventListener('keyup', handleDocumentKeyup);\n  disableUserSelect();\n}\n\n/**\n * Disable the pen behavior\n */\nexport function disablePen() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('pointerdown', handleDocumentPointerdown);\n  document.removeEventListener('pointermove', handleDocumentPointermove);\n  document.removeEventListener('pointerup', handleDocumentPointerup);\n\n  document.removeEventListener('keyup', handleDocumentKeyup);\n  enableUserSelect();\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/pen.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  disableUserSelect,\n  enableUserSelect,\n  findSVGAtPoint,\n  findSVGContainer,\n  getMetadata,\n  convertToSvgPoint,\n  convertToScreenPoint,\n  findAnnotationAtPoint\n} from './utils';\n\nlet _enabled = false;\nlet _penSize;\nlet _penColor;\nlet path;\nlet lines;\nlet originY;\nlet originX;\n\n/**\n * Handle document.mousedown event\n */\nfunction handleDocumentMousedown(e) {\n  let target = findAnnotationAtPoint(e.clientX, e.clientY);\n  if (target === null)\n    return;\n\n  let type = target.getAttribute('data-pdf-annotate-type');\n  if (type !== 'circle' && type !== 'fillcircle' && type !== 'emptycircle') {\n    return;\n  }\n\n  let svg = findSVGContainer(target);\n  let { documentId, userId } = getMetadata(svg);\n  let annotationId = target.getAttribute('data-pdf-annotate-id');\n\n  let event = e;\n  PDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, userId, annotationId).then((annotation) => {\n    if (annotation) {\n      path = null;\n      lines = [];\n\n      let point = convertToScreenPoint([\n        annotation.cx,\n        annotation.cy\n      ], svg);\n\n      let rect = svg.getBoundingClientRect();\n\n      originX = point[0] + rect.left;\n      originY = point[1] + rect.top;\n\n      document.addEventListener('mousemove', handleDocumentMousemove);\n      document.addEventListener('mouseup', handleDocumentMouseup);\n    }\n  });\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n  let svg;\n  if (lines.length > 1 && (svg = findSVGAtPoint(e.clientX, e.clientY))) {\n    let { documentId, userId, pageNumber } = getMetadata(svg);\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, userId, pageNumber, {\n        type: 'arrow',\n        width: _penSize,\n        color: _penColor,\n        lines\n      }\n    ).then((annotation) => {\n      if (path) {\n        svg.removeChild(path);\n      }\n\n      appendChild(svg, annotation);\n    });\n  }\n\n  document.removeEventListener('mousemove', handleDocumentMousemove);\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMousemove(e) {\n  let x = lines.length === 0 ? originX : e.clientX;\n  let y = lines.length === 0 ? originY : e.clientY;\n\n  savePoint(x, y);\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentKeyup(e) {\n  // Cancel rect if Esc is pressed\n  if (e.keyCode === 27) {\n    lines = null;\n    path.parentNode.removeChild(path);\n    document.removeEventListener('mousemove', handleDocumentMousemove);\n    document.removeEventListener('mouseup', handleDocumentMouseup);\n  }\n}\n\n/**\n * Save a point to the line being drawn.\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n */\nfunction savePoint(x, y) {\n  let svg = findSVGAtPoint(x, y);\n  if (!svg) {\n    return;\n  }\n\n  let rect = svg.getBoundingClientRect();\n  let point = convertToSvgPoint([\n    x - rect.left,\n    y - rect.top\n  ], svg);\n\n  if (lines.length < 2) {\n    lines.push(point);\n    return;\n  } else {\n    lines[1] = point; // update end point\n  }\n\n  if (path) {\n    svg.removeChild(path);\n  }\n\n  path = appendChild(svg, {\n    type: 'arrow',\n    color: _penColor,\n    width: _penSize,\n    lines\n  });\n}\n\n/**\n * Set the attributes of the pen.\n *\n * @param {Number} penSize The size of the lines drawn by the pen\n * @param {String} penColor The color of the lines drawn by the pen\n */\nexport function setArrow(penSize = 10, penColor = '0000FF') {\n  _penSize = parseInt(penSize, 10);\n  _penColor = penColor;\n}\n\n/**\n * Enable the pen behavior\n */\nexport function enableArrow() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  document.addEventListener('keyup', handleDocumentKeyup);\n  disableUserSelect();\n}\n\n/**\n * Disable the pen behavior\n */\nexport function disableArrow() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n  enableUserSelect();\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/arrow.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport {\n  findAnnotationAtPoint,\n  findSVGAtPoint,\n  getMetadata\n} from './utils';\n\nlet _canerase = false;\nlet userId = \"user\";\n\n/**\n *\n * @param {PointerEvent} e\n */\nfunction handleDocumentDown(e) {\n  _canerase = true;\n}\n\n/**\n *\n * @param {PointerEvent} e\n */\nfunction handleDocumentUp(e) {\n  _canerase = false;\n}\n\n/**\n *\n * @param {PointerEvent} e\n */\nfunction handleDocumentMouseMove(e) {\n  erase(findAnnotationAtPoint(e.clientX, e.clientY));\n}\n\nfunction erase(target) {\n  if(_canerase){\n    if(target && target.getAttribute('data-pdf-annotate-userId') === userId){\n      let { documentId } = getMetadata(target.parentElement);\n      let annotationId = target.getAttribute('data-pdf-annotate-id');\n      let nodes = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n      [...nodes].forEach((n) => {\n        n.parentNode.removeChild(n);\n      });\n\n      PDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, userId, annotationId);\n    }\n  }\n}\n\nexport function enableEraser() {\n  userId = PDFJSAnnotate.getStoreAdapter().userId;\n  document.addEventListener('pointermove', handleDocumentMouseMove);\n  document.addEventListener('pointerdown', handleDocumentDown);\n  document.addEventListener('pointerup', handleDocumentUp);\n}\n\nexport function disableEraser() {\n  document.removeEventListener('pointermove', handleDocumentMouseMove);\n  document.removeEventListener('pointerdown', handleDocumentDown);\n  document.removeEventListener('pointerup', handleDocumentUp);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/eraser.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  BORDER_COLOR,\n  findSVGAtPoint,\n  getMetadata,\n  scaleDown\n} from './utils';\n\nlet _enabled = false;\nlet input;\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n  if (input || !findSVGAtPoint(e.clientX, e.clientY)) {\n    return\n  }\n\n  input = document.createElement('input');\n  input.setAttribute('id', 'pdf-annotate-point-input');\n  input.setAttribute('placeholder', 'Enter comment');\n  input.style.border = `3px solid ${BORDER_COLOR}`;\n  input.style.borderRadius = '3px';\n  input.style.position = 'absolute';\n  input.style.top = `${e.clientY}px`;\n  input.style.left = `${e.clientX}px`;\n\n  input.addEventListener('blur', handleInputBlur);\n  input.addEventListener('keyup', handleInputKeyup);\n\n  document.body.appendChild(input);\n  input.focus();\n}\n\n/**\n * Handle input.blur event\n */\nfunction handleInputBlur() {\n  savePoint();\n}\n\n/**\n * Handle input.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleInputKeyup(e) {\n  if (e.keyCode === 27) {\n    closeInput();\n  } else if (e.keyCode === 13) {\n    savePoint();\n  }\n}\n\n/**\n * Save a new point annotation from input\n */\nfunction savePoint() {\n  if (input.value.trim().length > 0) {\n    let clientX = parseInt(input.style.left, 10);\n    let clientY = parseInt(input.style.top, 10);\n    let content = input.value.trim();\n    let svg = findSVGAtPoint(clientX, clientY);\n    if (!svg) {\n      return;\n    }\n\n    let rect = svg.getBoundingClientRect();\n    let { documentId, userId, pageNumber } = getMetadata(svg);\n    let annotation = Object.assign({\n        type: 'point'\n      }, scaleDown(svg, {\n        x: clientX - rect.left,\n        y: clientY - rect.top\n      })\n    );\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, userId, pageNumber, annotation)\n      .then((annotation) => {\n        PDFJSAnnotate.getStoreAdapter().addComment(\n          documentId,\n          userId,\n          annotation.uuid,\n          content\n        );\n\n        appendChild(svg, annotation);\n      });\n  }\n\n  closeInput();\n}\n\n/**\n * Close the input element\n */\nfunction closeInput() {\n  input.removeEventListener('blur', handleInputBlur);\n  input.removeEventListener('keyup', handleInputKeyup);\n  document.body.removeChild(input);\n  input = null;\n}\n\n/**\n * Enable point annotation behavior\n */\nexport function enablePoint() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Disable point annotation behavior\n */\nexport function disablePoint() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/point.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport { appendChild } from '../render/appendChild';\nimport {\n  BORDER_COLOR,\n  disableUserSelect,\n  enableUserSelect,\n  findSVGAtPoint,\n  getMetadata,\n  convertToSvgRect\n} from './utils';\n\nlet _enabled = false;\nlet _type;\nlet overlay;\nlet originY;\nlet originX;\n\n/**\n * Get the current window selection as rects\n *\n * @return {Array} An Array of rects\n */\nfunction getSelectionRects() {\n  try {\n    let selection = window.getSelection();\n    let range = selection.getRangeAt(0);\n    let rects = range.getClientRects();\n\n    if (rects.length > 0 &&\n        rects[0].width > 0 &&\n        rects[0].height > 0) {\n      return rects;\n    }\n  } catch (e) {}\n  \n  return null;\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousedown(e) {\n  let svg;\n  if (_type !== 'area' || !(svg = findSVGAtPoint(e.clientX, e.clientY))) {\n    return;\n  }\n\n  let rect = svg.getBoundingClientRect();\n  originY = e.clientY;\n  originX = e.clientX;\n\n  overlay = document.createElement('div');\n  overlay.style.position = 'absolute';\n  overlay.style.top = `${originY - rect.top}px`;\n  overlay.style.left = `${originX - rect.left}px`;\n  overlay.style.border = `3px solid ${BORDER_COLOR}`;\n  overlay.style.borderRadius = '3px';\n  svg.parentNode.appendChild(overlay);\n  \n  document.addEventListener('mousemove', handleDocumentMousemove);\n  disableUserSelect();\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousemove(e) {\n  let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n  let rect = svg.getBoundingClientRect();\n\n  if (originX + (e.clientX - originX) < rect.right) {\n    overlay.style.width = `${e.clientX - originX}px`;\n  }\n\n  if (originY + (e.clientY - originY) < rect.bottom) {\n    overlay.style.height = `${e.clientY - originY}px`;\n  }\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n  let rects;\n  if (_type !== 'area' && (rects = getSelectionRects())) {\n    let svg = findSVGAtPoint(rects[0].left, rects[0].top);\n    saveRect(_type, [...rects].map((r) => {\n      return {\n        top: r.top,\n        left: r.left,\n        width: r.width,\n        height: r.height\n      };\n    }));\n  } else if (_type === 'area' && overlay) {\n    let svg = overlay.parentNode.querySelector(config.annotationSvgQuery());\n    let rect = svg.getBoundingClientRect();\n    saveRect(_type, [{\n      top: parseInt(overlay.style.top, 10) + rect.top,\n      left: parseInt(overlay.style.left, 10) + rect.left,\n      width: parseInt(overlay.style.width, 10),\n      height: parseInt(overlay.style.height, 10)\n    }]);\n\n    overlay.parentNode.removeChild(overlay);\n    overlay = null;\n\n    document.removeEventListener('mousemove', handleDocumentMousemove);\n    enableUserSelect();\n  }\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentKeyup(e) {\n  // Cancel rect if Esc is pressed\n  if (e.keyCode === 27) {\n    let selection = window.getSelection();\n    selection.removeAllRanges();\n    if (overlay && overlay.parentNode) {\n      overlay.parentNode.removeChild(overlay);\n      overlay = null;\n      document.removeEventListener('mousemove', handleDocumentMousemove);\n    }\n  }\n}\n\n/**\n * Save a rect annotation\n *\n * @param {String} type The type of rect (area, highlight, strikeout)\n * @param {Array} rects The rects to use for annotation\n * @param {String} color The color of the rects\n */\nfunction saveRect(type, rects, color) {\n  let svg = findSVGAtPoint(rects[0].left, rects[0].top);\n  let annotation;\n\n  if (!svg) {\n    return;\n  }\n\n  let boundingRect = svg.getBoundingClientRect();\n\n  if (!color) {\n    if (type === 'highlight') {\n      color = 'FFFF00';\n    } else if (type === 'strikeout') {\n      color = 'FF0000';\n    }\n  }\n\n  // Initialize the annotation\n  annotation = {\n    type,\n    color,\n    rectangles: [...rects].map((r) => {\n      let offset = 0;\n\n      if (type === 'strikeout') {\n        offset = r.height / 2;\n      }\n\n      return convertToSvgRect({\n        y: (r.top + offset) - boundingRect.top,\n        x: r.left - boundingRect.left,\n        width: r.width,\n        height: r.height\n      }, svg);\n    }).filter((r) => r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1)\n  };\n  \n  // Short circuit if no rectangles exist\n  if (annotation.rectangles.length === 0) {\n    return;\n  }\n\n  // Special treatment for area as it only supports a single rect\n  if (type === 'area') {\n    let rect = annotation.rectangles[0];\n    delete annotation.rectangles;\n    annotation.x = rect.x;\n    annotation.y = rect.y;\n    annotation.width = rect.width;\n    annotation.height = rect.height;\n  }\n\n  let { documentId, userId, pageNumber } = getMetadata(svg);\n\n  // Add the annotation\n  PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, userId, pageNumber, annotation)\n    .then((annotation) => {\n      appendChild(svg, annotation);\n    });\n}\n\n/**\n * Enable rect behavior\n */\nexport function enableRect(type) {\n  _type = type;\n  \n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n  document.addEventListener('mousedown', handleDocumentMousedown);\n  document.addEventListener('keyup', handleDocumentKeyup);\n}\n\n/**\n * Disable rect behavior\n */\nexport function disableRect() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n  document.removeEventListener('mousedown', handleDocumentMousedown);\n  document.removeEventListener('keyup', handleDocumentKeyup);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/rect.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport { appendChild } from '../render/appendChild';\nimport {\n  findSVGAtPoint,\n  getMetadata,\n  convertToSvgPoint\n} from './utils';\n\nlet _enabled = false;\nlet _type;\nlet _circleRadius = 10;\nlet _circleColor = '0000FF';\n\n/**\n * Set the attributes of the pen.\n *\n * @param {Number} circleRadius The radius of the circle\n * @param {String} circleColor The color of the circle\n */\nexport function setCircle(circleRadius = 10, circleColor = '0000FF') {\n  _circleRadius = parseInt(circleRadius, 10);\n  _circleColor = circleColor;\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n  let svg = findSVGAtPoint(e.clientX, e.clientY);\n  if (!svg) {\n    return;\n  }\n  let rect = svg.getBoundingClientRect();\n  saveCircle(svg, _type, {\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    }, _circleRadius, _circleColor\n  );\n}\n\n/**\n * Save a circle annotation\n *\n * @param {SVGElement} svg\n * @param {String} type The type of circle (circle, emptycircle, fillcircle)\n * @param {Object} pt The point to use for annotation\n * @param {float} radius\n * @param {String} color The color of the rects\n */\nfunction saveCircle(svg, type, pt, radius, color) {\n  // Initialize the annotation\n  let svg_pt = convertToSvgPoint([ pt.x, pt.y ], svg)\n  let annotation = {\n    type,\n    color,\n    cx: svg_pt[0],\n    cy: svg_pt[1],\n    r: radius\n  };\n\n  let { documentId, userId, pageNumber } = getMetadata(svg);\n\n  // Add the annotation\n  PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, userId, pageNumber, annotation)\n    .then((annotation) => {\n      appendChild(svg, annotation);\n    });\n}\n\n/**\n * Enable circle behavior\n */\nexport function enableCircle(type) {\n  _type = type;\n\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Disable circle behavior\n */\nexport function disableCircle() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\nexport function addCircle(type, e) {\n  let oldType = _type;\n  _type = type;\n  handleDocumentMouseup(e);\n  _type = oldType;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/circle.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport { appendChild } from '../render/appendChild';\nimport {\n  BORDER_COLOR,\n  findSVGAtPoint,\n  getMetadata,\n  convertToSvgPoint\n} from './utils';\n\nlet _enabled = false;\nlet input;\nlet _textSize;\nlet _textColor;\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n  if (input || !findSVGAtPoint(e.clientX, e.clientY)) {\n    return;\n  }\n  if(!e.srcElement.classList.contains('annotationLayer')){\n    return;\n  }\n  input = document.createElement('input');\n  input.setAttribute('id', 'pdf-annotate-text-input');\n  input.setAttribute('placeholder', 'Enter text');\n  input.style.border = `3px solid ${BORDER_COLOR}`;\n  input.style.borderRadius = '3px';\n  input.style.position = 'absolute';\n  input.style.top = `${e.clientY}px`;\n  input.style.left = `${e.clientX}px`;\n  input.style.fontSize = `${_textSize}px`;\n  input.style.zIndex = \"41\";\n  input.addEventListener('blur', handleInputBlur);\n  input.addEventListener('keyup', handleInputKeyup);\n\n  document.body.appendChild(input);\n  input.focus();\n}\n\n/**\n * Handle input.blur event\n */\nfunction handleInputBlur() {\n  saveText();\n}\n\n/**\n * Handle input.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleInputKeyup(e) {\n  if (e.keyCode === 27) {\n    closeInput();\n  } else if (e.keyCode === 13) {\n    saveText();\n  }\n}\n\n/**\n * Save a text annotation from input\n */\nfunction saveText() {\n  if (input.value.trim().length > 0) {\n    let clientX = parseInt(input.style.left, 10);\n    let clientY = parseInt(input.style.top, 10);\n    let svg = findSVGAtPoint(clientX, clientY);\n    if (!svg) {\n      return;\n    }\n    let height = _textSize;\n    let { documentId, userId, pageNumber, viewport } = getMetadata(svg);\n    let scale = 1 / viewport.scale;\n    let rect = svg.getBoundingClientRect();\n    let pt = convertToSvgPoint([\n      clientX - rect.left, \n      clientY -  rect.top + height], svg, viewport);\n    let annotation = {\n        type: 'textbox',\n        size: _textSize * scale,\n        color: _textColor,\n        content: input.value.trim(),\n        x: pt[0],\n        y: pt[1],\n        rotation: -viewport.rotation\n    }\n\n    PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, userId, pageNumber, annotation)\n      .then((annotation) => {\n        appendChild(svg, annotation);\n      });\n  }\n  \n  closeInput();\n}\n\n/**\n * Close the input\n */\nfunction closeInput() {\n  if (input) {\n    input.removeEventListener('blur', handleInputBlur);\n    input.removeEventListener('keyup', handleInputKeyup);\n    document.body.removeChild(input);\n    input = null;\n  }\n}\n\n/**\n * Set the text attributes\n *\n * @param {Number} textSize The size of the text\n * @param {String} textColor The color of the text\n */\nexport function setText(textSize = 12, textColor = '000000') {\n  _textSize = parseInt(textSize, 10);\n  _textColor = textColor;\n}\n\n\n/**\n * Enable text behavior\n */\nexport function enableText() {\n  if (_enabled) { return; }\n\n  _enabled = true;\n  document.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n/**\n * Disable text behavior\n */\nexport function disableText() {\n  if (!_enabled) { return; }\n\n  _enabled = false;\n  document.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/text.js","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport config from '../config';\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\n\n// Template for creating a new page\nconst PAGE_TEMPLATE = `\n  <div style=\"visibility: hidden;\" class=\"page\" data-loaded=\"false\">\n    <div class=\"canvasWrapper\">\n      <canvas></canvas>\n    </div>\n    <div class=\"` + config.textLayerName + `\"></div>\n    <svg class=\"` + config.annotationLayerName + `\"></svg>\n  </div>\n`;\n\n/**\n * Create a new page to be appended to the DOM.\n *\n * @param {Number} pageNumber The page number that is being created\n * @return {HTMLElement}\n */\nexport function createPage(pageNumber) {\n  let temp = document.createElement('div');\n  temp.innerHTML = PAGE_TEMPLATE;\n\n  let page = temp.children[0];\n  let canvas = page.querySelector('canvas');\n\n  page.setAttribute('id', `pageContainer${pageNumber}`);\n  page.setAttribute('data-page-number', pageNumber);\n\n  canvas.mozOpaque = true;\n  canvas.setAttribute('id', `page${pageNumber}`);\n\n  return page;\n}\n\n/**\n * Render a page that has already been created.\n *\n * @param {Number} pageNumber The page number to be rendered\n * @param {Object} renderOptions The options for rendering\n * @return {Promise} Settled once rendering has completed\n *  A settled Promise will be either:\n *    - fulfilled: [pdfPage, annotations]\n *    - rejected: Error\n */\nexport function renderPage(pageNumber, renderOptions) {\n  let {\n    documentId,\n    userId,\n    pdfDocument,\n    scale,\n    rotate\n  } = renderOptions;\n\n  // Load the page and annotations\n  return Promise.all([\n    pdfDocument.getPage(pageNumber),\n    PDFJSAnnotate.getAnnotations(documentId, userId, pageNumber)\n  ]).then(([pdfPage, annotations]) => {\n    let page = document.getElementById(`pageContainer${pageNumber}`);\n    let svg = page.querySelector(config.annotationClassQuery());\n    let canvas = page.querySelector('.canvasWrapper canvas');\n    let canvasContext = canvas.getContext('2d', {alpha: false});\n    let totalRotation = (rotate + pdfPage.rotate) % 360;\n    let viewport = pdfPage.getViewport(scale, totalRotation);\n    let transform = scalePage(pageNumber, viewport, canvasContext);\n\n    // Render the page\n    return Promise.all([\n      pdfPage.render({ canvasContext, viewport, transform }),\n      PDFJSAnnotate.render(svg, viewport, annotations)\n    ]).then(() => {\n      // Text content is needed for a11y, but is also necessary for creating\n      // highlight and strikeout annotations which require selecting text.\n      return pdfPage.getTextContent({normalizeWhitespace: true}).then((textContent) => {\n        return new Promise((resolve, reject) => {\n          // Render text layer for a11y of text content\n          let textLayer = page.querySelector(config.textClassQuery());\n          let textLayerFactory = new PDFJS.DefaultTextLayerFactory();\n          let textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber -1, viewport);\n          textLayerBuilder.setTextContent(textContent);\n          textLayerBuilder.render();\n\n          // Enable a11y for annotations\n          // Timeout is needed to wait for `textLayerBuilder.render`\n          setTimeout(() => {\n            try {\n              renderScreenReaderHints(annotations.annotations);\n              resolve();\n            } catch (e) {\n              reject(e);\n            }\n          });\n        });\n      });\n    }).then(() => {\n      // Indicate that the page was loaded\n      page.setAttribute('data-loaded', 'true');\n\n      return [pdfPage, annotations];\n    });\n  });\n}\n\n/**\n * Scale the elements of a page.\n *\n * @param {Number} pageNumber The page number to be scaled\n * @param {Object} viewport The viewport of the PDF page (see pdfPage.getViewport(scale, rotate))\n * @param {Object} context The canvas context that the PDF page is rendered to\n * @return {Array} The transform data for rendering the PDF page\n */\nfunction scalePage(pageNumber, viewport, context) {\n  let page = document.getElementById(`pageContainer${pageNumber}`);\n  let canvas = page.querySelector('.canvasWrapper canvas');\n  let svg = page.querySelector(config.annotationClassQuery());\n  let wrapper = page.querySelector('.canvasWrapper');\n  let textLayer = page.querySelector(config.textClassQuery());\n  let outputScale = getOutputScale(context);\n  let transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\n  let sfx = approximateFraction(outputScale.sx);\n  let sfy = approximateFraction(outputScale.sy);\n\n  // Adjust width/height for scale\n  page.style.visibility = '';\n  canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n  canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n  canvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\n  canvas.style.height = roundToDivide(viewport.height, sfx[1]) + 'px';\n  svg.setAttribute('width', viewport.width);\n  svg.setAttribute('height', viewport.height);\n  svg.style.width = `${viewport.width}px`;\n  svg.style.height = `${viewport.height}px`;\n  page.style.width = `${viewport.width}px`;\n  page.style.height = `${viewport.height}px`;\n  wrapper.style.width = `${viewport.width}px`;\n  wrapper.style.height = `${viewport.height}px`;\n  textLayer.style.width = `${viewport.width}px`;\n  textLayer.style.height = `${viewport.height}px`;\n\n  return transform;\n}\n\n\n/**\n * Approximates a float number as a fraction using Farey sequence (max order of 8).\n *\n * @param {Number} x Positive float number\n * @return {Array} Estimated fraction: the first array item is a numerator,\n *                 the second one is a denominator.\n */\nfunction approximateFraction(x) {\n  // Fast path for int numbers or their inversions.\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  const xinv = 1 / x;\n  const limit = 8;\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  const x_ = x > 1 ? xinv : x;\n  \n  // a/b and c/d are neighbours in Farey sequence.\n  let a = 0, b = 1, c = 1, d = 1;\n  \n  // Limit search to order 8.\n  while (true) {\n    // Generating next term in sequence (order of q).\n    let p = a + c, q = b + d;\n    if (q > limit) {\n      break;\n    }\n    if (x_ <= p / q) {\n      c = p; d = q;\n    } else {\n      a = p; b = q;\n    }\n  }\n\n  // Select closest of neighbours to x.\n  if (x_ - a / b < c / d - x_) {\n    return x_ === x ? [a, b] : [b, a];\n  } else {\n    return x_ === x ? [c, d] : [d, c];\n  }\n}\n\nfunction getOutputScale(ctx) {\n  let devicePixelRatio = window.devicePixelRatio || 1;\n  let backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n                          ctx.mozBackingStorePixelRatio ||\n                          ctx.msBackingStorePixelRatio ||\n                          ctx.oBackingStorePixelRatio ||\n                          ctx.backingStorePixelRatio || 1;\n  let pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\nfunction roundToDivide(x, div) {\n  let r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UI/page.js"],"sourceRoot":""}